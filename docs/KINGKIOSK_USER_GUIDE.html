<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="pandoc">
  <title>KingKiosk User Guide</title>
  <link rel="stylesheet" href="kingkiosk-docs.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='6' fill='%23f59e0b'/><text x='50%25' y='55%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-weight='800' font-size='18' font-family='system-ui'>K</text></svg>">
</head>
<body>

<!-- Top Navigation -->
<nav class="top-nav">
  <a href="index.html" class="logo">
    <span class="logo-icon">K</span>
    <span>KingKiosk Docs</span>
  </a>
  <ul class="nav-links">
    <li><a href="index.html" >Home</a></li>
    <li><a href="KINGKIOSK_USER_GUIDE.html" class="active">User Guide</a></li>
    <li><a href="MQTT_WIDGET_REFERENCE.html" >MQTT Reference</a></li>
    <li><a href="CUSTOM_WIDGET_SDK.html" >Widget SDK</a></li>
    <li><a href="https://kingkiosk.kallinnovations.com" target="_blank">Website &nearr;</a></li>
  </ul>
</nav>

<!-- Sidebar Toggle (mobile) -->
<button class="sidebar-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')" aria-label="Toggle navigation">
  &#9776;
</button>

<div class="page-wrapper">

  <!-- Sidebar with TOC -->
  <aside class="sidebar">
    <div class="toc-title">On this page</div>
    <ul>
    <li><a href="#king-kiosk-user-guide"
    id="toc-king-kiosk-user-guide"><span
    class="toc-section-number">1</span> King Kiosk User Guide</a>
    <ul>
    <li><a href="#table-of-contents" id="toc-table-of-contents"><span
    class="toc-section-number">1.1</span> Table of Contents</a></li>
    <li><a href="#welcome-to-king-kiosk"
    id="toc-welcome-to-king-kiosk"><span
    class="toc-section-number">1.2</span> 1. Welcome to King Kiosk</a>
    <ul>
    <li><a href="#what-is-king-kiosk" id="toc-what-is-king-kiosk"><span
    class="toc-section-number">1.2.1</span> What is King Kiosk?</a></li>
    <li><a href="#why-king-kiosk-is-different"
    id="toc-why-king-kiosk-is-different"><span
    class="toc-section-number">1.2.2</span> Why King Kiosk is
    Different</a></li>
    <li><a href="#platform-availability"
    id="toc-platform-availability"><span
    class="toc-section-number">1.2.3</span> Platform
    Availability</a></li>
    </ul></li>
    <li><a href="#getting-started" id="toc-getting-started"><span
    class="toc-section-number">1.3</span> 2. Getting Started</a>
    <ul>
    <li><a href="#initial-setup" id="toc-initial-setup"><span
    class="toc-section-number">1.3.1</span> Initial Setup</a></li>
    <li><a href="#android-kiosk-mode-lockdown"
    id="toc-android-kiosk-mode-lockdown"><span
    class="toc-section-number">1.3.2</span> Android Kiosk Mode
    (Lockdown)</a></li>
    <li><a href="#iosipados-kiosk-mode-guided-access"
    id="toc-iosipados-kiosk-mode-guided-access"><span
    class="toc-section-number">1.3.3</span> iOS/iPadOS Kiosk Mode
    (Guided Access)</a></li>
    <li><a href="#macos-kiosk-mode-best-effort"
    id="toc-macos-kiosk-mode-best-effort"><span
    class="toc-section-number">1.3.4</span> macOS Kiosk Mode
    (Best-Effort)</a></li>
    <li><a href="#connecting-to-your-mqtt-server"
    id="toc-connecting-to-your-mqtt-server"><span
    class="toc-section-number">1.3.5</span> Connecting to Your MQTT
    Server</a></li>
    <li><a href="#understanding-your-device-id"
    id="toc-understanding-your-device-id"><span
    class="toc-section-number">1.3.6</span> Understanding Your Device
    ID</a></li>
    <li><a href="#home-assistant-auto-discovery"
    id="toc-home-assistant-auto-discovery"><span
    class="toc-section-number">1.3.7</span> Home Assistant
    Auto-Discovery</a></li>
    </ul></li>
    <li><a href="#the-mqtt-architecture"
    id="toc-the-mqtt-architecture"><span
    class="toc-section-number">1.4</span> 3. The MQTT Architecture</a>
    <ul>
    <li><a href="#how-king-kiosk-communicates"
    id="toc-how-king-kiosk-communicates"><span
    class="toc-section-number">1.4.1</span> How King Kiosk
    Communicates</a></li>
    <li><a href="#message-addresses-topics-explained"
    id="toc-message-addresses-topics-explained"><span
    class="toc-section-number">1.4.2</span> Message Addresses (Topics)
    Explained</a></li>
    <li><a href="#command-and-response-flow"
    id="toc-command-and-response-flow"><span
    class="toc-section-number">1.4.3</span> Command and Response
    Flow</a></li>
    <li><a href="#tracking-your-commands"
    id="toc-tracking-your-commands"><span
    class="toc-section-number">1.4.4</span> Tracking Your
    Commands</a></li>
    <li><a href="#secure-command-signing-optional"
    id="toc-secure-command-signing-optional"><span
    class="toc-section-number">1.4.5</span> Secure Command Signing
    (Optional)</a></li>
    </ul></li>
    <li><a href="#the-windowing-system"
    id="toc-the-windowing-system"><span
    class="toc-section-number">1.5</span> 4. The Windowing System</a>
    <ul>
    <li><a href="#understanding-tiles-and-windows"
    id="toc-understanding-tiles-and-windows"><span
    class="toc-section-number">1.5.1</span> Understanding Tiles and
    Windows</a></li>
    <li><a href="#controlling-windows-via-touch-and-mouse"
    id="toc-controlling-windows-via-touch-and-mouse"><span
    class="toc-section-number">1.5.2</span> Controlling Windows via
    Touch and Mouse</a></li>
    <li><a href="#controlling-windows-via-mqtt"
    id="toc-controlling-windows-via-mqtt"><span
    class="toc-section-number">1.5.3</span> Controlling Windows via
    MQTT</a></li>
    <li><a href="#window-layouts-and-arrangements"
    id="toc-window-layouts-and-arrangements"><span
    class="toc-section-number">1.5.4</span> Window Layouts and
    Arrangements</a></li>
    </ul></li>
    <li><a href="#saving-and-managing-screen-states"
    id="toc-saving-and-managing-screen-states"><span
    class="toc-section-number">1.6</span> 5. Saving and Managing Screen
    States</a>
    <ul>
    <li><a href="#what-is-a-screen-state"
    id="toc-what-is-a-screen-state"><span
    class="toc-section-number">1.6.1</span> What is a Screen
    State?</a></li>
    <li><a href="#saving-your-layout" id="toc-saving-your-layout"><span
    class="toc-section-number">1.6.2</span> Saving Your Layout</a></li>
    <li><a href="#loading-saved-layouts"
    id="toc-loading-saved-layouts"><span
    class="toc-section-number">1.6.3</span> Loading Saved
    Layouts</a></li>
    <li><a href="#listing-your-saved-states"
    id="toc-listing-your-saved-states"><span
    class="toc-section-number">1.6.4</span> Listing Your Saved
    States</a></li>
    <li><a href="#deleting-a-saved-state"
    id="toc-deleting-a-saved-state"><span
    class="toc-section-number">1.6.5</span> Deleting a Saved
    State</a></li>
    <li><a href="#exporting-and-importing-for-backup"
    id="toc-exporting-and-importing-for-backup"><span
    class="toc-section-number">1.6.6</span> Exporting and Importing for
    Backup</a></li>
    <li><a href="#full-device-backup-and-restore-settings-layouts"
    id="toc-full-device-backup-and-restore-settings-layouts"><span
    class="toc-section-number">1.6.7</span> Full Device Backup and
    Restore (Settings + Layouts)</a></li>
    <li><a href="#remote-feature-server-provisioning"
    id="toc-remote-feature-server-provisioning"><span
    class="toc-section-number">1.6.8</span> Remote Feature Server
    Provisioning</a></li>
    <li><a href="#scheduling-screen-states"
    id="toc-scheduling-screen-states"><span
    class="toc-section-number">1.6.9</span> Scheduling Screen
    States</a></li>
    <li><a href="#fleet-layout-replication"
    id="toc-fleet-layout-replication"><span
    class="toc-section-number">1.6.10</span> Fleet Layout
    Replication</a></li>
    </ul></li>
    <li><a href="#system-commands" id="toc-system-commands"><span
    class="toc-section-number">1.7</span> 6. System Commands</a>
    <ul>
    <li><a href="#device-control" id="toc-device-control"><span
    class="toc-section-number">1.7.1</span> Device Control</a></li>
    <li><a href="#volume-and-brightness"
    id="toc-volume-and-brightness"><span
    class="toc-section-number">1.7.2</span> Volume and
    Brightness</a></li>
    <li><a href="#notifications-and-alerts"
    id="toc-notifications-and-alerts"><span
    class="toc-section-number">1.7.3</span> Notifications and
    Alerts</a></li>
    <li><a href="#visual-effects" id="toc-visual-effects"><span
    class="toc-section-number">1.7.4</span> Visual Effects</a></li>
    <li><a href="#text-to-speech" id="toc-text-to-speech"><span
    class="toc-section-number">1.7.5</span> Text-to-Speech</a></li>
    <li><a href="#speech-to-text" id="toc-speech-to-text"><span
    class="toc-section-number">1.7.6</span> Speech-to-Text</a></li>
    <li><a href="#screenshots-and-screen-capture"
    id="toc-screenshots-and-screen-capture"><span
    class="toc-section-number">1.7.7</span> Screenshots and Screen
    Capture</a></li>
    <li><a href="#background-settings"
    id="toc-background-settings"><span
    class="toc-section-number">1.7.8</span> Background Settings</a></li>
    <li><a href="#screensaver" id="toc-screensaver"><span
    class="toc-section-number">1.7.9</span> Screensaver</a></li>
    <li><a href="#ai-integration" id="toc-ai-integration"><span
    class="toc-section-number">1.7.10</span> AI Integration</a></li>
    <li><a href="#batch-commands-and-scripting"
    id="toc-batch-commands-and-scripting"><span
    class="toc-section-number">1.7.11</span> Batch Commands and
    Scripting</a></li>
    </ul></li>
    <li><a href="#widget-reference" id="toc-widget-reference"><span
    class="toc-section-number">1.8</span> 7. Widget Reference</a>
    <ul>
    <li><a href="#web-browsers" id="toc-web-browsers"><span
    class="toc-section-number">1.8.1</span> Web Browsers</a></li>
    <li><a href="#remote-browser-apple-tv-ios"
    id="toc-remote-browser-apple-tv-ios"><span
    class="toc-section-number">1.8.2</span> Remote Browser (Apple TV
    &amp; iOS)</a></li>
    <li><a href="#clock-widget" id="toc-clock-widget"><span
    class="toc-section-number">1.8.3</span> Clock Widget</a></li>
    <li><a href="#weather-widget" id="toc-weather-widget"><span
    class="toc-section-number">1.8.4</span> Weather Widget</a></li>
    <li><a href="#media-player" id="toc-media-player"><span
    class="toc-section-number">1.8.5</span> Media Player</a></li>
    <li><a href="#youtube-player" id="toc-youtube-player"><span
    class="toc-section-number">1.8.6</span> YouTube Player</a></li>
    <li><a href="#image-carousel" id="toc-image-carousel"><span
    class="toc-section-number">1.8.7</span> Image Carousel</a></li>
    <li><a href="#gauges-and-thermostats"
    id="toc-gauges-and-thermostats"><span
    class="toc-section-number">1.8.8</span> Gauges and
    Thermostats</a></li>
    <li><a href="#charts" id="toc-charts"><span
    class="toc-section-number">1.8.9</span> Charts</a></li>
    <li><a href="#maps" id="toc-maps"><span
    class="toc-section-number">1.8.10</span> Maps</a></li>
    <li><a href="#canvas-visual-diagrams"
    id="toc-canvas-visual-diagrams"><span
    class="toc-section-number">1.8.11</span> Canvas (Visual
    Diagrams)</a></li>
    <li><a href="#animated-text" id="toc-animated-text"><span
    class="toc-section-number">1.8.12</span> Animated Text</a></li>
    <li><a href="#mqtt-image" id="toc-mqtt-image"><span
    class="toc-section-number">1.8.13</span> MQTT Image</a></li>
    <li><a href="#mqtt-button" id="toc-mqtt-button"><span
    class="toc-section-number">1.8.14</span> MQTT Button</a></li>
    <li><a href="#calendar-with-bidirectional-sync"
    id="toc-calendar-with-bidirectional-sync"><span
    class="toc-section-number">1.8.15</span> Calendar (with
    Bidirectional Sync)</a></li>
    <li><a href="#timers-and-stopwatch"
    id="toc-timers-and-stopwatch"><span
    class="toc-section-number">1.8.16</span> Timers and
    Stopwatch</a></li>
    <li><a href="#alarmo-security-system"
    id="toc-alarmo-security-system"><span
    class="toc-section-number">1.8.17</span> Alarmo (Security
    System)</a></li>
    <li><a href="#dlna-player" id="toc-dlna-player"><span
    class="toc-section-number">1.8.18</span> DLNA Player</a></li>
    <li><a href="#pdf-viewer" id="toc-pdf-viewer"><span
    class="toc-section-number">1.8.19</span> PDF Viewer</a></li>
    <li><a href="#games" id="toc-games"><span
    class="toc-section-number">1.8.20</span> Games</a></li>
    <li><a href="#led-light-panel" id="toc-led-light-panel"><span
    class="toc-section-number">1.8.21</span> LED Light Panel</a></li>
    </ul></li>
    <li><a href="#building-your-own-widgets"
    id="toc-building-your-own-widgets"><span
    class="toc-section-number">1.9</span> 8. Building Your Own
    Widgets</a>
    <ul>
    <li><a href="#why-build-custom-widgets"
    id="toc-why-build-custom-widgets"><span
    class="toc-section-number">1.9.1</span> Why Build Custom
    Widgets?</a></li>
    <li><a href="#quick-start" id="toc-quick-start"><span
    class="toc-section-number">1.9.2</span> Quick Start</a></li>
    <li><a href="#adding-your-widget" id="toc-adding-your-widget"><span
    class="toc-section-number">1.9.3</span> Adding Your Widget</a></li>
    <li><a href="#connecting-your-widget-to-king-kiosk"
    id="toc-connecting-your-widget-to-king-kiosk"><span
    class="toc-section-number">1.9.4</span> Connecting Your Widget to
    King Kiosk</a></li>
    <li><a href="#receiving-commands" id="toc-receiving-commands"><span
    class="toc-section-number">1.9.5</span> Receiving Commands</a></li>
    <li><a href="#sending-data-back-from-your-widget"
    id="toc-sending-data-back-from-your-widget"><span
    class="toc-section-number">1.9.6</span> Sending Data Back From Your
    Widget</a></li>
    <li><a href="#persistent-storage" id="toc-persistent-storage"><span
    class="toc-section-number">1.9.7</span> Persistent Storage</a></li>
    <li><a href="#platform-considerations"
    id="toc-platform-considerations"><span
    class="toc-section-number">1.9.8</span> Platform
    Considerations</a></li>
    <li><a href="#complete-example-smart-thermostat"
    id="toc-complete-example-smart-thermostat"><span
    class="toc-section-number">1.9.9</span> Complete Example: Smart
    Thermostat</a></li>
    <li><a href="#native-widget-alternatives"
    id="toc-native-widget-alternatives"><span
    class="toc-section-number">1.9.10</span> Native Widget
    Alternatives</a></li>
    <li><a href="#canvas-declarative-native-graphics"
    id="toc-canvas-declarative-native-graphics"><span
    class="toc-section-number">1.9.11</span> Canvas: Declarative Native
    Graphics</a></li>
    <li><a href="#mqtt-image-external-rendering"
    id="toc-mqtt-image-external-rendering"><span
    class="toc-section-number">1.9.12</span> MQTT Image: External
    Rendering</a></li>
    <li><a href="#dynamic-native-widgets"
    id="toc-dynamic-native-widgets"><span
    class="toc-section-number">1.9.13</span> Dynamic Native
    Widgets</a></li>
    <li><a href="#os-widgets-home-screen-widgets"
    id="toc-os-widgets-home-screen-widgets"><span
    class="toc-section-number">1.9.14</span> OS Widgets (Home Screen
    Widgets)</a></li>
    </ul></li>
    <li><a href="#home-assistant-integration"
    id="toc-home-assistant-integration"><span
    class="toc-section-number">1.10</span> 9. Home Assistant
    Integration</a>
    <ul>
    <li><a href="#creating-custom-sensors"
    id="toc-creating-custom-sensors"><span
    class="toc-section-number">1.10.1</span> Creating Custom
    Sensors</a></li>
    <li><a href="#controlling-king-kiosk-from-home-assistant"
    id="toc-controlling-king-kiosk-from-home-assistant"><span
    class="toc-section-number">1.10.2</span> Controlling King Kiosk from
    Home Assistant</a></li>
    </ul></li>
    <li><a href="#tips-and-best-practices"
    id="toc-tips-and-best-practices"><span
    class="toc-section-number">1.11</span> 10. Tips and Best
    Practices</a>
    <ul>
    <li><a href="#performance-optimization"
    id="toc-performance-optimization"><span
    class="toc-section-number">1.11.1</span> Performance
    Optimization</a></li>
    <li><a href="#network-considerations"
    id="toc-network-considerations"><span
    class="toc-section-number">1.11.2</span> Network
    Considerations</a></li>
    <li><a href="#troubleshooting-common-issues"
    id="toc-troubleshooting-common-issues"><span
    class="toc-section-number">1.11.3</span> Troubleshooting Common
    Issues</a></li>
    </ul></li>
    <li><a href="#apple-tv-experience"
    id="toc-apple-tv-experience"><span
    class="toc-section-number">1.12</span> 11. Apple TV Experience</a>
    <ul>
    <li><a href="#a-revolutionary-window-system-for-television"
    id="toc-a-revolutionary-window-system-for-television"><span
    class="toc-section-number">1.12.1</span> A Revolutionary Window
    System for Television</a></li>
    <li><a href="#controlling-with-the-siri-remote"
    id="toc-controlling-with-the-siri-remote"><span
    class="toc-section-number">1.12.2</span> Controlling with the Siri
    Remote</a></li>
    <li><a href="#understanding-focus-navigation"
    id="toc-understanding-focus-navigation"><span
    class="toc-section-number">1.12.3</span> Understanding Focus
    Navigation</a></li>
    <li><a href="#move-mode-rearranging-your-layout"
    id="toc-move-mode-rearranging-your-layout"><span
    class="toc-section-number">1.12.4</span> Move Mode: Rearranging Your
    Layout</a></li>
    <li><a href="#interactive-mode-deep-widget-control"
    id="toc-interactive-mode-deep-widget-control"><span
    class="toc-section-number">1.12.5</span> Interactive Mode: Deep
    Widget Control</a></li>
    <li><a href="#mqtt-control-for-apple-tv"
    id="toc-mqtt-control-for-apple-tv"><span
    class="toc-section-number">1.12.6</span> MQTT Control for Apple
    TV</a></li>
    <li><a href="#remote-browser-full-web-on-your-tv"
    id="toc-remote-browser-full-web-on-your-tv"><span
    class="toc-section-number">1.12.7</span> Remote Browser: Full Web on
    Your TV</a></li>
    <li><a href="#apple-tv-tips-and-best-practices"
    id="toc-apple-tv-tips-and-best-practices"><span
    class="toc-section-number">1.12.8</span> Apple TV Tips and Best
    Practices</a></li>
    </ul></li>
    <li><a href="#feature-server" id="toc-feature-server"><span
    class="toc-section-number">1.13</span> 12. Feature Server</a>
    <ul>
    <li><a href="#what-is-the-feature-server"
    id="toc-what-is-the-feature-server"><span
    class="toc-section-number">1.13.1</span> What is the Feature
    Server?</a></li>
    <li><a href="#high-quality-text-to-speech-piper"
    id="toc-high-quality-text-to-speech-piper"><span
    class="toc-section-number">1.13.2</span> High-Quality Text-to-Speech
    (Piper)</a></li>
    <li><a href="#intercom-broadcast" id="toc-intercom-broadcast"><span
    class="toc-section-number">1.13.3</span> Intercom &amp;
    Broadcast</a></li>
    <li><a href="#remote-browser" id="toc-remote-browser"><span
    class="toc-section-number">1.13.4</span> Remote Browser</a></li>
    <li><a href="#rtsp-camera-export" id="toc-rtsp-camera-export"><span
    class="toc-section-number">1.13.5</span> RTSP Camera Export</a></li>
    <li><a href="#home-assistant-mqtt-bridge"
    id="toc-home-assistant-mqtt-bridge"><span
    class="toc-section-number">1.13.6</span> Home Assistant MQTT
    Bridge</a></li>
    </ul></li>
    <li><a href="#quick-reference-card"
    id="toc-quick-reference-card"><span
    class="toc-section-number">1.14</span> 13. Quick Reference Card</a>
    <ul>
    <li><a href="#essential-topics" id="toc-essential-topics"><span
    class="toc-section-number">1.14.1</span> Essential Topics</a></li>
    <li><a href="#most-used-commands" id="toc-most-used-commands"><span
    class="toc-section-number">1.14.2</span> Most-Used Commands</a></li>
    <li><a href="#widget-types" id="toc-widget-types"><span
    class="toc-section-number">1.14.3</span> Widget Types</a></li>
    </ul></li>
    </ul></li>
    </ul>
  </aside>

  <!-- Main Content -->
  <div class="content-wrapper">
    <main class="content">
      <header id="title-block-header">
        <h1 class="title">KingKiosk User Guide</h1>
        <p class="subtitle">Your Complete Guide to the Programmable
Display Runtime</p>
        <p class="date">Last updated: February 2026</p>
      </header>
<h1 data-number="1" id="king-kiosk-user-guide"><span
class="header-section-number">1</span> King Kiosk User Guide</h1>
<p><strong>Your Complete Guide to the World’s First Programmable Display
Runtime™</strong></p>
<p><em>Version 2.3 | Beta Tester Edition</em></p>
<hr />
<h2 data-number="1.1" id="table-of-contents"><span
class="header-section-number">1.1</span> Table of Contents</h2>
<ol type="1">
<li><a href="#1-welcome-to-king-kiosk">Welcome to King Kiosk</a>
<ul>
<li><a href="#what-is-king-kiosk">What is King Kiosk?</a></li>
<li><a href="#why-king-kiosk-is-different">Why King Kiosk is
Different</a></li>
<li><a href="#platform-availability">Platform Availability</a></li>
</ul></li>
<li><a href="#2-getting-started">Getting Started</a>
<ul>
<li><a href="#initial-setup">Initial Setup</a></li>
<li><a href="#android-kiosk-mode-lockdown">Android Kiosk Mode
(Lockdown)</a></li>
<li><a href="#iosipados-kiosk-mode-guided-access">iOS/iPadOS Kiosk Mode
(Guided Access)</a></li>
<li><a href="#macos-kiosk-mode-best-effort">macOS Kiosk Mode
(Best-Effort)</a></li>
<li><a href="#connecting-to-your-mqtt-broker">Connecting to Your MQTT
Broker</a></li>
<li><a href="#understanding-your-device-id">Understanding Your Device
ID</a></li>
<li><a href="#home-assistant-auto-discovery">Home Assistant
Auto-Discovery</a></li>
</ul></li>
<li><a href="#3-the-mqtt-architecture">The MQTT Architecture</a>
<ul>
<li><a href="#how-king-kiosk-communicates">How King Kiosk
Communicates</a></li>
<li><a href="#message-addresses-topics-explained">Message Addresses
(Topics) Explained</a></li>
<li><a href="#command-and-response-flow">Command and Response
Flow</a></li>
<li><a href="#secure-command-signing-optional">Secure Command Signing
(Optional)</a></li>
</ul></li>
<li><a href="#4-the-windowing-system">The Windowing System</a>
<ul>
<li><a href="#understanding-tiles-and-windows">Understanding Tiles and
Windows</a></li>
<li><a href="#controlling-windows-via-touch-and-mouse">Controlling
Windows via Touch and Mouse</a></li>
<li><a href="#controlling-windows-via-mqtt">Controlling Windows via
MQTT</a></li>
<li><a href="#window-layouts-and-arrangements">Window Layouts and
Arrangements</a></li>
</ul></li>
<li><a href="#5-saving-and-managing-screen-states">Saving and Managing
Screen States</a>
<ul>
<li><a href="#what-is-a-screen-state">What is a Screen State?</a></li>
<li><a href="#saving-your-layout">Saving Your Layout</a></li>
<li><a href="#loading-saved-layouts">Loading Saved Layouts</a></li>
<li><a href="#exporting-and-importing-for-backup">Exporting and
Importing for Backup</a></li>
<li><a href="#remote-feature-server-provisioning">Remote Feature Server
Provisioning</a></li>
<li><a href="#scheduling-screen-states">Scheduling Screen
States</a></li>
<li><a href="#fleet-layout-replication">Fleet Layout
Replication</a></li>
</ul></li>
<li><a href="#6-system-commands">System Commands</a>
<ul>
<li><a href="#device-control">Device Control</a></li>
<li><a href="#volume-and-brightness">Volume and Brightness</a></li>
<li><a href="#notifications-and-alerts">Notifications and
Alerts</a></li>
<li><a href="#visual-effects">Visual Effects</a></li>
<li><a href="#text-to-speech">Text-to-Speech</a></li>
<li><a href="#speech-to-text">Speech-to-Text</a></li>
<li><a href="#screenshots-and-screen-capture">Screenshots and Screen
Capture</a></li>
<li><a href="#background-settings">Background Settings</a></li>
<li><a href="#screensaver">Screensaver</a></li>
<li><a href="#ai-integration">AI Integration</a></li>
<li><a href="#batch-commands-and-scripting">Batch Commands and
Scripting</a></li>
</ul></li>
<li><a href="#7-widget-reference">Widget Reference</a>
<ul>
<li><a href="#web-browsers">Web Browsers</a></li>
<li><a href="#remote-browser-apple-tv--ios">Remote Browser (Apple TV
&amp; iOS)</a></li>
<li><a href="#clock-widget">Clock Widget</a></li>
<li><a href="#weather-widget">Weather Widget</a></li>
<li><a href="#media-player">Media Player</a></li>
<li><a href="#youtube-player">YouTube Player</a></li>
<li><a href="#image-carousel">Image Carousel</a></li>
<li><a href="#gauges-and-thermostats">Gauges and Thermostats</a></li>
<li><a href="#charts">Charts</a></li>
<li><a href="#maps">Maps</a></li>
<li><a href="#canvas-visual-diagrams">Canvas (Visual Diagrams)</a></li>
<li><a href="#animated-text">Animated Text</a></li>
<li><a href="#mqtt-image">MQTT Image</a></li>
<li><a href="#mqtt-button">MQTT Button</a></li>
<li><a href="#calendar-with-bidirectional-sync">Calendar (with
Bidirectional Sync)</a></li>
<li><a href="#timers-and-stopwatch">Timers and Stopwatch</a></li>
<li><a href="#alarmo-security-system">Alarmo (Security System)</a></li>
<li><a href="#dlna-player">DLNA Player</a></li>
<li><a href="#pdf-viewer">PDF Viewer</a></li>
<li><a href="#games">Games</a></li>
<li><a href="#led-light-panel">LED Light Panel</a></li>
</ul></li>
<li><a href="#8-building-your-own-widgets">Building Your Own Widgets</a>
<ul>
<li><a href="#why-build-custom-widgets">Why Build Custom
Widgets?</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#adding-your-widget">Adding Your Widget</a></li>
<li><a href="#connecting-your-widget-to-king-kiosk">Connecting Your
Widget to King Kiosk</a></li>
<li><a href="#receiving-commands">Receiving Commands</a></li>
<li><a href="#sending-data-back-from-your-widget">Sending Data Back From
Your Widget</a></li>
<li><a href="#persistent-storage">Persistent Storage</a></li>
<li><a href="#platform-considerations">Platform Considerations</a></li>
<li><a href="#complete-example-smart-thermostat">Complete Example: Smart
Thermostat</a></li>
<li><a href="#native-widget-alternatives">Native Widget
Alternatives</a></li>
<li><a href="#canvas-declarative-native-graphics">Canvas: Declarative
Native Graphics</a></li>
<li><a href="#mqtt-image-external-rendering">MQTT Image: External
Rendering</a></li>
<li><a href="#dynamic-native-widgets">Dynamic Native Widgets</a></li>
</ul></li>
<li><a href="#9-home-assistant-integration">Home Assistant
Integration</a>
<ul>
<li><a href="#creating-custom-sensors">Creating Custom Sensors</a></li>
<li><a href="#controlling-king-kiosk-from-home-assistant">Controlling
King Kiosk from Home Assistant</a></li>
</ul></li>
<li><a href="#10-tips-and-best-practices">Tips and Best
Practices</a></li>
</ol>
<ul>
<li><a href="#performance-optimization">Performance
Optimization</a></li>
<li><a href="#network-considerations">Network Considerations</a></li>
<li><a href="#troubleshooting-common-issues">Troubleshooting Common
Issues</a></li>
</ul>
<ol start="11" type="1">
<li><a href="#11-apple-tv-experience">Apple TV Experience</a></li>
</ol>
<ul>
<li><a href="#a-revolutionary-window-system-for-television">A
Revolutionary Window System for Television</a></li>
<li><a href="#controlling-with-the-siri-remote">Controlling with the
Siri Remote</a></li>
<li><a href="#understanding-focus-navigation">Understanding Focus
Navigation</a></li>
<li><a href="#move-mode-rearranging-your-layout">Move Mode: Rearranging
Your Layout</a></li>
<li><a href="#interactive-mode-deep-widget-control">Interactive Mode:
Deep Widget Control</a></li>
<li><a href="#mqtt-control-for-apple-tv">MQTT Control for Apple
TV</a></li>
</ul>
<ol start="12" type="1">
<li><a href="#12-feature-server">Feature Server</a></li>
</ol>
<ul>
<li><a href="#what-is-the-feature-server">What is the Feature
Server?</a></li>
<li><a href="#intercom--broadcast">Intercom &amp; Broadcast</a></li>
<li><a href="#remote-browser">Remote Browser</a></li>
<li><a href="#rtsp-camera-export">RTSP Camera Export</a></li>
<li><a href="#home-assistant-mqtt-bridge">Home Assistant MQTT
Bridge</a></li>
</ul>
<ol start="13" type="1">
<li><a href="#13-quick-reference-card">Quick Reference Card</a></li>
</ol>
<ul>
<li><a href="#remote-browser-full-web-on-your-tv">Remote Browser: Full
Web on Your TV</a></li>
</ul>
<ol start="12" type="1">
<li><a href="#12-quick-reference-card">Quick Reference Card</a></li>
</ol>
<hr />
<h2 data-number="1.2" id="welcome-to-king-kiosk"><span
class="header-section-number">1.2</span> 1. Welcome to King Kiosk</h2>
<h3 data-number="1.2.1" id="what-is-king-kiosk"><span
class="header-section-number">1.2.1</span> What is King Kiosk?</h3>
<p>King Kiosk is the world’s first <strong>Programmable Display
Runtime™</strong> — it turns any screen into a remotely programmable
display surface. It’s not digital signage. It’s not a kiosk. It’s not a
dashboard. It’s all of those things and none of them, because you decide
what it becomes by sending it instructions.</p>
<p>Whether you’re managing a single tablet on your kitchen wall or
orchestrating hundreds of displays across multiple locations, King Kiosk
gives you a composable, MQTT-driven runtime that renders whatever you
need: dashboards, media, cameras, gauges, web content, intercoms — all
in real-time, all remotely controllable, from anywhere in the world.</p>
<p>That’s King Kiosk. A Programmable Display Runtime™.</p>
<h3 data-number="1.2.2" id="why-king-kiosk-is-different"><span
class="header-section-number">1.2.2</span> Why King Kiosk is
Different</h3>
<p><strong>Existing categories are dead ends.</strong> Digital signage
loops slideshows. Kiosk software locks to one app. Dashboard tools can’t
manage displays remotely. Smart home panels lack windowing. You’ve
always had to choose a category. King Kiosk created a new one: the
<strong>Programmable Display Runtime™</strong>.</p>
<p>Here’s what sets us apart:</p>
<p><strong>True Multi-Window Compositing</strong> King Kiosk lets you
compose multiple widgets simultaneously on any screen. Show a clock,
weather, calendar, and live camera feed all at once, each in its own
resizable, independently controllable tile.</p>
<p><strong>Real-Time Remote Control</strong> Through MQTT (a lightweight
messaging system - think of it as a walkie-talkie for your devices), you
can control every aspect of your displays instantly. Change content,
adjust layouts, send notifications, trigger alerts - all in real-time
from anywhere.</p>
<p><strong>Home Assistant Native</strong> King Kiosk speaks the language
of smart homes. It auto-discovers itself to Home Assistant, publishes
sensor data, and responds to automations. Your displays become part of
your smart home ecosystem.</p>
<p><strong>AI-Powered Voice Control</strong> Connect to Home Assistant’s
conversation agents, Anthropic’s Claude, OpenAI, Google Gemini, or even
local Ollama instances. Your displays can listen, understand, and
respond.</p>
<p><strong>Cross-Platform Consistency</strong> The same powerful
experience on Android, iOS, macOS, Windows, Linux, and even Apple TV.
One interface, one command structure, everywhere.</p>
<p><strong>Secure by Design</strong> Optional command signing ensures
only authorized commands reach your displays - like a secret handshake
that verifies messages are genuine. Perfect for enterprise
deployments.</p>
<h3 data-number="1.2.3" id="platform-availability"><span
class="header-section-number">1.2.3</span> Platform Availability</h3>
<p>King Kiosk runs on: - <strong>Android</strong> - Phones, tablets, and
dedicated kiosk hardware - <strong>iOS</strong> - iPhones and iPads -
<strong>macOS</strong> - Mac desktops and laptops -
<strong>Windows</strong> - Desktop and kiosk PCs -
<strong>Linux</strong> - Including Raspberry Pi - <strong>tvOS</strong>
- Apple TV (with remote browser streaming) - <strong>Web</strong> -
Browser-based deployment (limited features)</p>
<hr />
<h2 data-number="1.3" id="getting-started"><span
class="header-section-number">1.3</span> 2. Getting Started</h2>
<h3 data-number="1.3.1" id="initial-setup"><span
class="header-section-number">1.3.1</span> Initial Setup</h3>
<p>When you first launch King Kiosk, you’ll find a clean, modern
interface ready for customization. Before diving into remote control,
take a moment to explore the app:</p>
<ol type="1">
<li><strong>Access Settings</strong> - Tap or click the lock icon to
unlock your display. You’ll be prompted to enter a PIN - <strong>the
default PIN is 1234</strong>.</li>
<li><strong>Configure MQTT Settings</strong> - Set up your MQTT
connection for remote control and <strong>Set Your Device Name</strong>
- Give your display a memorable name like “Kitchen Display” or “Lobby
Screen 1”</li>
<li><strong>Change Your PIN</strong> - For security, navigate to
<strong>Settings -&gt; Security</strong> and change the default PIN to
something unique for your deployment</li>
</ol>
<h3 data-number="1.3.2" id="android-kiosk-mode-lockdown"><span
class="header-section-number">1.3.2</span> Android Kiosk Mode
(Lockdown)</h3>
<p>On Android, King Kiosk can lock a device so it stays dedicated to the
display—great for wall tablets, public screens, and smart-home
dashboards.</p>
<p>There are <strong>two practical levels</strong> of kiosk lockdown on
Android:</p>
<ul>
<li><strong>Standard kiosk (no Device Owner)</strong>: easy to enable in
Settings, but a determined user can often escape depending on the
device/OEM.</li>
<li><strong>Full kiosk (Device Owner)</strong>: strongest lockdown; King
Kiosk can enforce itself as HOME and apply device-owner kiosk
policies.</li>
</ul>
<h4 data-number="1.3.2.1" id="standard-setup-no-device-owner"><span
class="header-section-number">1.3.2.1</span> Standard Setup (No Device
Owner)</h4>
<p>In <strong>Settings -&gt; App Settings -&gt; Kiosk Mode</strong>: 1.
Enable kiosk mode and approve the requested permissions (Device Admin /
overlays / battery optimization prompts). 2. When prompted, set
<strong>King Kiosk</strong> as the <strong>Home/Launcher</strong> app
and choose <strong>Always</strong>.</p>
<p><strong>What to expect:</strong> the device stays in King Kiosk most
of the time, but some devices still allow exit via certain system
gestures/shortcuts.</p>
<h4 data-number="1.3.2.2" id="full-lockdown-device-owner-setup"><span
class="header-section-number">1.3.2.2</span> Full Lockdown (Device Owner
Setup)</h4>
<p>Device Owner setup is intended for <strong>dedicated kiosk
devices</strong> and usually requires a <strong>freshly reset</strong>
device. This is a more advanced setup typically done by IT
administrators.</p>
<ol type="1">
<li>Factory reset the device.</li>
<li>Before adding any Google account, connect the device to a computer
via USB and run a special command using Android development tools. (If
you’re not familiar with this process, consult your IT administrator or
search for “Android Device Owner provisioning” tutorials.)</li>
<li>Launch King Kiosk and enable <strong>Kiosk Mode</strong>.</li>
</ol>
<p><strong>What to expect:</strong> The strongest lockdown available -
users cannot exit the app using normal means. To recover from a
misconfiguration, you may need physical access to the device, and in
worst cases, a factory reset.</p>
<h3 data-number="1.3.3" id="iosipados-kiosk-mode-guided-access"><span
class="header-section-number">1.3.3</span> iOS/iPadOS Kiosk Mode (Guided
Access)</h3>
<p>iOS and iPadOS are much more locked down than Android. For “true
kiosk mode” you typically use:</p>
<ul>
<li><strong>Guided Access</strong> (recommended for personal devices):
enabled by the user in iOS Settings, then started from the device.</li>
<li><strong>Single App Mode</strong> (enterprise/education): requires a
<strong>supervised</strong> device and device management software (MDM -
Mobile Device Management, used by businesses and schools).</li>
</ul>
<p>In King Kiosk, enabling <strong>Kiosk Mode</strong> on iOS is
<strong>best-effort</strong>: - The app can hide system UI and lock
orientation. - The app can attempt to start Guided Access if it’s
enabled, otherwise it will show instructions.</p>
<p><strong>To enable Guided Access:</strong> 1. On the iPhone/iPad, go
to <strong>Settings -&gt; Accessibility -&gt; Guided Access</strong> and
turn it on. 2. Open King Kiosk. 3. Triple‑click the <strong>Side/Home
button</strong> and choose <strong>Guided Access</strong>, then tap
<strong>Start</strong>.</p>
<h3 data-number="1.3.4" id="macos-kiosk-mode-best-effort"><span
class="header-section-number">1.3.4</span> macOS Kiosk Mode
(Best-Effort)</h3>
<p>macOS does not support a fully locked-down kiosk mode without device
management and system policy.</p>
<p>King Kiosk can still provide a solid “kiosk-like” experience on
macOS: - Fullscreen + Always on Top - Hide Dock and menu bar
(best-effort) - Reduce app switching and some system UI access
(best-effort)</p>
<p>For <strong>true kiosks</strong> on macOS, use a <strong>dedicated
macOS user account</strong> with parental controls or restrictions,
and/or device management software that limits system access.</p>
<h3 data-number="1.3.5" id="connecting-to-your-mqtt-server"><span
class="header-section-number">1.3.5</span> Connecting to Your MQTT
Server</h3>
<p>MQTT is the communication backbone of King Kiosk - it’s how your
displays receive commands and send back status updates. Think of an MQTT
server (also called a “broker”) as a central message hub that routes
commands to your devices.</p>
<p>You’ll need access to an MQTT server - this could be: - A local
server like Mosquitto running on a Raspberry Pi or home computer - Your
Home Assistant’s built-in MQTT server - A cloud MQTT service like HiveMQ
or CloudMQTT</p>
<p>In Settings, navigate to the MQTT section and enter: - <strong>Server
Address</strong>: The IP address or web address of your MQTT server
(e.g., 192.168.1.100 or mqtt.example.com) - <strong>Port</strong>:
Usually 1883 for standard connections, 8883 for encrypted connections -
<strong>Username &amp; Password</strong>: If your server requires login
credentials - <strong>Enable SSL</strong>: For encrypted, secure
connections</p>
<p>Once connected, King Kiosk automatically listens for commands and
begins sending status updates.</p>
<h3 data-number="1.3.6" id="understanding-your-device-id"><span
class="header-section-number">1.3.6</span> Understanding Your Device
ID</h3>
<p>Every King Kiosk installation has a unique device ID. This ID is used
in all MQTT topics to ensure commands reach the right display. Your
device ID is based on your configured device name, sanitized for MQTT
compatibility.</p>
<p>For example, if you name your device “Living Room Display”, your
device ID might be <code>living_room_display</code> or similar.</p>
<p>You can find your device ID in Settings under the Device Information
section.</p>
<h3 data-number="1.3.7" id="home-assistant-auto-discovery"><span
class="header-section-number">1.3.7</span> Home Assistant
Auto-Discovery</h3>
<p>If you use Home Assistant, King Kiosk can automatically appear as a
device in your smart home dashboard. When enabled, King Kiosk announces
itself using Home Assistant’s MQTT Discovery protocol.</p>
<p><strong>To enable auto-discovery:</strong> 1. Ensure your Home
Assistant is using the same MQTT broker as King Kiosk 2. In King Kiosk
Settings, navigate to <strong>MQTT &gt; Home Assistant
Discovery</strong> 3. Toggle the feature on</p>
<p>Once connected, your display will appear in Home Assistant with: -
<strong>Sensors</strong> for device status, battery level, screen state,
and more - <strong>Buttons</strong> for common actions like refresh,
screenshot, and restart - <strong>Camera</strong> entity that displays
periodic screenshots of your display</p>
<p>This means you can monitor and control your King Kiosk displays
directly from the Home Assistant UI, include them in automations, and
view their status on your HA dashboards - all without any manual YAML
configuration.</p>
<hr />
<h2 data-number="1.4" id="the-mqtt-architecture"><span
class="header-section-number">1.4</span> 3. The MQTT Architecture</h2>
<h3 data-number="1.4.1" id="how-king-kiosk-communicates"><span
class="header-section-number">1.4.1</span> How King Kiosk
Communicates</h3>
<p>King Kiosk uses a elegant two-level communication model:</p>
<p><strong>System Commands</strong> control the device as a whole -
things like volume, brightness, creating windows, taking screenshots,
and managing layouts.</p>
<p><strong>Element Commands</strong> control individual widgets - like
telling a specific clock to switch from analog to digital, or a carousel
to advance to the next slide.</p>
<p>This separation means you can manage displays at whatever level of
detail you need.</p>
<h3 data-number="1.4.2" id="message-addresses-topics-explained"><span
class="header-section-number">1.4.2</span> Message Addresses (Topics)
Explained</h3>
<p>Every MQTT message has a “topic” - think of it as the mailing address
that tells the system where to deliver the message. King Kiosk uses a
consistent, easy-to-follow address structure:</p>
<p><strong>Sending Commands TO King Kiosk:</strong></p>
<pre><code>kingkiosk/{your-device-id}/system/cmd          -&gt; System-wide commands
kingkiosk/{your-device-id}/element/{widget-id}/cmd  -&gt; Widget-specific commands
kingkiosk/{your-device-id}/window/{window-id}/command -&gt; Window-controller commands (legacy/compat)</code></pre>
<p><strong>Receiving Responses FROM King Kiosk:</strong></p>
<pre><code>kingkiosk/{your-device-id}/system/response     -&gt; System command results
kingkiosk/{your-device-id}/element/{widget-id}/response  -&gt; Widget command results
kingkiosk/{your-device-id}/element/{widget-id}/state     -&gt; Widget current state
kingkiosk/{your-device-id}/element/{widget-id}/event     -&gt; Widget events
kingkiosk/{your-device-id}/info                -&gt; Device capabilities
kingkiosk/{your-device-id}/status              -&gt; Online/offline status</code></pre>
<h3 data-number="1.4.3" id="command-and-response-flow"><span
class="header-section-number">1.4.3</span> Command and Response
Flow</h3>
<p>Commands are sent as structured text messages in a format called JSON
(JavaScript Object Notation) - basically name-value pairs wrapped in
curly braces. Here’s the basic format:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;command_name&quot;</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;parameter1&quot;</span><span class="fu">:</span> <span class="st">&quot;value1&quot;</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;parameter2&quot;</span><span class="fu">:</span> <span class="st">&quot;value2&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>For example, to set the volume to 50%:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_volume&quot;</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.5</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>King Kiosk responds with a JSON result:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;success&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_volume&quot;</span><span class="fu">,</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;volume&quot;</span><span class="fu">:</span> <span class="fl">0.5</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-19T10:30:00.000Z&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.4.4" id="tracking-your-commands"><span
class="header-section-number">1.4.4</span> Tracking Your Commands</h3>
<p>If you send many commands, responses can arrive out of order. To make
it easy to match a response to the command that triggered it, you can
include a <code>correlation_id</code> field (a tracking number of your
choice) in the request. King Kiosk will include that same value in the
response.</p>
<p>Why it helps: - Lets your automations match responses to the right
command - Helps avoid confusion when multiple devices or automations are
active at once - Makes troubleshooting easier because you can search by
a single ID</p>
<p>How to use it: - Pick any short, unique ID (for example
<code>ui-42</code> or <code>req-2024-12-19-01</code>) - Include it in
your command, and the response will have the same ID - If you don’t
include a tracking ID, everything still works - you’ll just match
responses by timing or content</p>
<p>Example with <code>correlation_id</code>:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_volume&quot;</span><span class="fu">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.5</span><span class="fu">,</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;correlation_id&quot;</span><span class="fu">:</span> <span class="st">&quot;req-0007&quot;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.4.5" id="secure-command-signing-optional"><span
class="header-section-number">1.4.5</span> Secure Command Signing
(Optional)</h3>
<p>For deployments requiring extra security, King Kiosk supports signed
commands. When enabled, commands must include a special code that proves
they came from an authorized source - like a digital wax seal that
verifies authenticity.</p>
<p>Signed commands wrap your regular command in a protective
envelope:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ts&quot;</span><span class="fu">:</span> <span class="dv">1703001234</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;msg&quot;</span><span class="fu">:</span> <span class="st">&quot;{</span><span class="ch">\&quot;</span><span class="st">command</span><span class="ch">\&quot;</span><span class="st">:</span><span class="ch">\&quot;</span><span class="st">play</span><span class="ch">\&quot;</span><span class="st">}&quot;</span><span class="fu">,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;sig&quot;</span><span class="fu">:</span> <span class="st">&quot;a1b2c3d4e5f6...&quot;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The verification code (“sig”) is calculated using a secret password
known only to you and your devices. This prevents unauthorized people
from sending commands to your displays.</p>
<hr />
<h2 data-number="1.5" id="the-windowing-system"><span
class="header-section-number">1.5</span> 4. The Windowing System</h2>
<h3 data-number="1.5.1" id="understanding-tiles-and-windows"><span
class="header-section-number">1.5.1</span> Understanding Tiles and
Windows</h3>
<p>King Kiosk’s windowing system is what truly sets it apart. Instead of
a single full-screen view, you can create multiple “tiles” - each
containing a different widget.</p>
<p><strong>Window Properties:</strong> - <strong>Position (x,
y)</strong> - Where on screen the window appears - <strong>Size (width,
height)</strong> - How large the window is - <strong>Movement Animation
(<code>animate</code>)</strong> - MQTT move/update commands animate by
default; set <code>"animate": false</code> to snap instantly -
<strong>Opacity</strong> - Transparency level (0.0 = invisible, 1.0 =
fully visible) - <strong>Stacking Order (Z-Index)</strong> - Which
window appears on top when they overlap (higher numbers appear on top,
like stacking papers) - <strong>Background Mode</strong> - Many widgets
support transparent backgrounds</p>
<p><strong>Setting Opacity When Creating Windows:</strong></p>
<p>Most widget creation commands accept an <code>opacity</code>
parameter:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_clock&quot;</span><span class="fu">,</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;my-clock&quot;</span><span class="fu">,</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;opacity&quot;</span><span class="fu">:</span> <span class="fl">0.8</span><span class="fu">,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Many widgets also support transparent backgrounds with
<code>background_mode</code> and <code>background_opacity</code>:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_clock&quot;</span><span class="fu">,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;transparent-clock&quot;</span><span class="fu">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;transparent&quot;</span><span class="fu">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_opacity&quot;</span><span class="fu">:</span> <span class="fl">0.6</span><span class="fu">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;theme&quot;</span><span class="fu">:</span> <span class="st">&quot;dark&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Background modes include: <code>transparent</code>,
<code>color</code>, <code>gradient</code>, and <code>image</code>.</p>
<p><strong>Controlling Z-Index (Window Stacking Order):</strong></p>
<p>New windows are automatically placed on top. To change stacking order
for existing windows, use the <code>bring_to_front</code> and
<code>send_to_back</code> commands:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;bring_to_front&quot;</span><span class="fu">,</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;important-widget&quot;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;send_to_back&quot;</span><span class="fu">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;background-widget&quot;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The z-index is automatically managed - <code>bring_to_front</code>
assigns the highest z-index, while <code>send_to_back</code> assigns the
lowest. Window stacking order is preserved when you save and load screen
states.</p>
<p>Windows can be in different states: - <strong>Normal</strong> -
Regular display - <strong>Minimized</strong> - Hidden but not closed -
<strong>Maximized</strong> - Full screen</p>
<h3 data-number="1.5.2"
id="controlling-windows-via-touch-and-mouse"><span
class="header-section-number">1.5.2</span> Controlling Windows via Touch
and Mouse</h3>
<p>King Kiosk windows respond to both touch and mouse input, giving you
intuitive direct control regardless of your device type.</p>
<p><strong>Touch Controls (Tablets, Phones, Touch Screens):</strong> -
<strong>Tap and drag the title bar</strong> - Move the window -
<strong>Drag the edges or corners</strong> - Resize the window -
<strong>Double-tap the title bar</strong> - Toggle maximize -
<strong>Swipe down on title bar</strong> - Minimize - <strong>Tap the X
button</strong> - Close the window</p>
<p><strong>Mouse Controls (Desktop, Laptop):</strong> - <strong>Click
and drag the title bar</strong> - Move the window - <strong>Drag the
edges or corners</strong> - Resize the window - <strong>Double-click the
title bar</strong> - Toggle maximize - <strong>Click the minimize
button</strong> - Minimize the window - <strong>Click the X
button</strong> - Close the window - <strong>Right-click the title
bar</strong> - Access window context menu - <strong>Mouse wheel</strong>
- Scroll content within the window</p>
<p><strong>Apple TV Remote:</strong> - <strong>D-pad</strong> - Navigate
between windows using spatial focus - <strong>Select button</strong> -
Interact with focused window - <strong>Play/Pause</strong> - Enter Move
Mode to reposition windows - <strong>Menu button</strong> - Exit modes,
go back, close menus</p>
<p><em>See <a href="#11-apple-tv-experience">Section 11: Apple TV
Experience</a> for the complete guide to King Kiosk’s revolutionary
multi-window system on tvOS.</em></p>
<h3 data-number="1.5.3" id="controlling-windows-via-mqtt"><span
class="header-section-number">1.5.3</span> Controlling Windows via
MQTT</h3>
<p>Creating, moving, and managing windows remotely is where King Kiosk
shines.</p>
<p><strong>Creating a Clock Window:</strong></p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_clock&quot;</span><span class="fu">,</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span><span class="fu">,</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;analog&quot;</span><span class="fu">,</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;theme&quot;</span><span class="fu">:</span> <span class="st">&quot;dark&quot;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Creating a Web Browser Window:</strong></p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_browser&quot;</span><span class="fu">,</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com&quot;</span><span class="fu">,</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;My Browser&quot;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Moving a Window:</strong></p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;move_window&quot;</span><span class="fu">,</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span><span class="fu">,</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">500</span><span class="fu">,</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">200</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Window movement is smoothly animated by default (including Apple TV).
To snap immediately instead of animating:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;move_window&quot;</span><span class="fu">,</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span><span class="fu">,</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">500</span><span class="fu">,</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;animate&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Resizing a Window:</strong></p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;resize_window&quot;</span><span class="fu">,</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span><span class="fu">,</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">400</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Closing a Window:</strong></p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;close_window&quot;</span><span class="fu">,</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Closing All Windows:</strong></p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;close_all_windows&quot;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Bringing a Window to Front:</strong></p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;bring_to_front&quot;</span><span class="fu">,</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Sending a Window to Back:</strong></p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;send_to_back&quot;</span><span class="fu">,</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Maximizing a Window:</strong></p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;maximize_window&quot;</span><span class="fu">,</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Minimizing a Window:</strong></p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;minimize_window&quot;</span><span class="fu">,</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-clock&quot;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.5.4" id="window-layouts-and-arrangements"><span
class="header-section-number">1.5.4</span> Window Layouts and
Arrangements</h3>
<p>Switch between different layout modes:</p>
<p><strong>Set Window Mode:</strong></p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;window_mode&quot;</span><span class="fu">,</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;tiling&quot;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Available modes: - <code>tiling</code> or <code>tile</code> - Windows
automatically arrange in a grid - <code>floating</code> or
<code>float</code> - Windows can overlap freely - <code>toggle</code> -
Switch between tiling and floating</p>
<hr />
<h2 data-number="1.6" id="saving-and-managing-screen-states"><span
class="header-section-number">1.6</span> 5. Saving and Managing Screen
States</h2>
<h3 data-number="1.6.1" id="what-is-a-screen-state"><span
class="header-section-number">1.6.1</span> What is a Screen State?</h3>
<p>A screen state is a snapshot of your current display layout - all the
windows, their positions, sizes, and configurations. Think of it as a
“preset” you can recall instantly.</p>
<p>This is incredibly powerful for scenarios like: - <strong>Morning
Mode</strong> - Calendar, weather, and news - <strong>Movie
Mode</strong> - Single full-screen media player - <strong>Dashboard
Mode</strong> - Multiple gauges and charts for monitoring -
<strong>Presentation Mode</strong> - Specific content for meetings</p>
<h3 data-number="1.6.2" id="saving-your-layout"><span
class="header-section-number">1.6.2</span> Saving Your Layout</h3>
<p>Once you’ve arranged your display how you like it:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;save_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning Dashboard&quot;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>If a state with that name already exists and you want to overwrite
it:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;save_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning Dashboard&quot;</span><span class="fu">,</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;overwrite&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.6.3" id="loading-saved-layouts"><span
class="header-section-number">1.6.3</span> Loading Saved Layouts</h3>
<p>Instantly switch to a saved layout:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;load_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning Dashboard&quot;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>All current windows will close, and the saved layout will be restored
exactly as you saved it.</p>
<h3 data-number="1.6.4" id="listing-your-saved-states"><span
class="header-section-number">1.6.4</span> Listing Your Saved
States</h3>
<p>See all available layouts:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;list_screen_states&quot;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Response includes the name, window count, and when each was
saved.</p>
<h3 data-number="1.6.5" id="deleting-a-saved-state"><span
class="header-section-number">1.6.5</span> Deleting a Saved State</h3>
<p>Remove a layout you no longer need:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;delete_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Old Layout&quot;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.6.6" id="exporting-and-importing-for-backup"><span
class="header-section-number">1.6.6</span> Exporting and Importing for
Backup</h3>
<p><strong>Export a layout for backup or transfer:</strong></p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;export_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning Dashboard&quot;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The response includes the complete screen state data that you can
save externally.</p>
<p><strong>Import a previously exported layout:</strong></p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;import_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Imported Dashboard&quot;</span><span class="fu">,</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;screen_state&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">...exported</span> <span class="er">data...</span> <span class="fu">},</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;overwrite&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Tip: You can include <code>response_topic</code> and
<code>correlation_id</code> on these commands to make automation
workflows easier to track.</p>
<h3 data-number="1.6.7"
id="full-device-backup-and-restore-settings-layouts"><span
class="header-section-number">1.6.7</span> Full Device Backup and
Restore (Settings + Layouts)</h3>
<p>If you want a complete portable snapshot (not just one layout), use
<code>get_config</code>.</p>
<p><strong>Step 1: Export a full backup</strong></p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;get_config&quot;</span><span class="fu">,</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;include_secrets&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;include_layouts&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;correlation_id&quot;</span><span class="fu">:</span> <span class="st">&quot;backup-2026-02-06&quot;</span><span class="fu">,</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>This returns: - <code>config</code> (all current settings) -
<code>screen_states</code> (all saved named layouts) -
<code>current_layout</code> (the live layout snapshot) -
<code>screen_state_count</code></p>
<p>If you plan to share the backup outside your trusted environment, set
<code>include_secrets</code> to <code>false</code> so sensitive fields
are masked.</p>
<p><strong>Step 2: Restore (or clone to another tablet)</strong></p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;provision&quot;</span><span class="fu">,</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;settings&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">...config</span> <span class="er">from</span> <span class="er">backup...</span> <span class="fu">},</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;screen_states&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="er">...screen_states</span> <span class="er">from</span> <span class="er">backup...</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;current_layout&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">...current_layout</span> <span class="er">from</span> <span class="er">backup...</span> <span class="fu">},</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;overwrite&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;correlation_id&quot;</span><span class="fu">:</span> <span class="st">&quot;restore-2026-02-06&quot;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>To clone multiple devices, publish the same payload to each target
device’s <code>kingkiosk/{device_id}/system/cmd</code> topic.</p>
<p>Provision responses include what succeeded and failed: -
<code>applied_settings</code> - <code>failed_settings</code> -
<code>screen_states_imported</code> - <code>screen_states_failed</code>
- <code>current_layout_applied</code></p>
<h3 data-number="1.6.8" id="remote-feature-server-provisioning"><span
class="header-section-number">1.6.8</span> Remote Feature Server
Provisioning</h3>
<p>You can configure Feature Server settings remotely over MQTT, so you
do not need to open the Settings screen on each device.</p>
<p>In plain English: - <code>featureServerEnabled</code>: turns Feature
Server on or off. - <code>featureServerAutoConnect</code>: if on, the
app will reconnect automatically after app restart/network recovery. -
<code>featureServerUrl</code>: the server host/IP to connect to (for
best cross-platform compatibility, use just host/IP, for example
<code>192.168.1.50</code>). - <code>featureServerUseHttps</code>: use
secure WebSocket (<code>wss</code>) if your server is configured for
TLS. - <code>featureServerProduceAudio</code>: whether microphone audio
should be produced to the server. - <code>intercomEnabled</code>:
whether the device should participate in intercom/broadcast.</p>
<p>Example command (publish to
<code>kingkiosk/{device_id}/system/cmd</code>):</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;provision&quot;</span><span class="fu">,</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;settings&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;featureServerEnabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;featureServerAutoConnect&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;featureServerUrl&quot;</span><span class="fu">:</span> <span class="st">&quot;192.168.1.50&quot;</span><span class="fu">,</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;featureServerUseHttps&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;featureServerProduceAudio&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;intercomEnabled&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;correlation_id&quot;</span><span class="fu">:</span> <span class="st">&quot;feature-server-setup-001&quot;</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>How to verify it worked: - Subscribe to
<code>kingkiosk/{device_id}/feature_server/state</code>. - This topic is
retained, so you get the latest status immediately. - Watch fields like
<code>enabled</code>, <code>connected</code>, <code>state</code>, and
<code>last_error</code>.</p>
<p>Important behavior: - If <code>featureServerEnabled</code> is
<code>false</code>, state stays <code>disabled</code> (gray in UI) and
auto-reconnect does not run.</p>
<h3 data-number="1.6.9" id="scheduling-screen-states"><span
class="header-section-number">1.6.9</span> Scheduling Screen States</h3>
<p>Automatically switch layouts based on time of day:</p>
<p><strong>Set up a schedule:</strong></p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_screen_schedule&quot;</span><span class="fu">,</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;entries&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;morning&quot;</span><span class="fu">,</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;screen_state&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning Dashboard&quot;</span><span class="fu">,</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;at&quot;</span><span class="fu">:</span> <span class="st">&quot;07:00&quot;</span><span class="fu">,</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;days&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">1</span><span class="ot">,</span> <span class="dv">2</span><span class="ot">,</span> <span class="dv">3</span><span class="ot">,</span> <span class="dv">4</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;evening&quot;</span><span class="fu">,</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;screen_state&quot;</span><span class="fu">:</span> <span class="st">&quot;Evening Mode&quot;</span><span class="fu">,</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;at&quot;</span><span class="fu">:</span> <span class="st">&quot;18:00&quot;</span><span class="fu">,</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;days&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">1</span><span class="ot">,</span> <span class="dv">2</span><span class="ot">,</span> <span class="dv">3</span><span class="ot">,</span> <span class="dv">4</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">,</span> <span class="dv">6</span><span class="ot">,</span> <span class="dv">7</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Days are: 1=Monday, 2=Tuesday, … 7=Sunday</p>
<p><strong>View current schedule:</strong></p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;list_screen_schedule&quot;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Enable/Disable scheduling:</strong></p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;enable_screen_schedule&quot;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb37"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;disable_screen_schedule&quot;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Manually trigger a scheduled state:</strong></p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;trigger_screen_schedule&quot;</span><span class="fu">,</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;screen_state&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning Dashboard&quot;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.6.10" id="fleet-layout-replication"><span
class="header-section-number">1.6.10</span> Fleet Layout
Replication</h3>
<p>For multi-display deployments, you can replicate layouts across all
devices in a “fleet”:</p>
<p><strong>Publish your current layout to all fleet
members:</strong></p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;replicate_layout&quot;</span><span class="fu">,</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;fleet_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-displays&quot;</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Subscribe a device to receive fleet layouts:</strong></p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;subscribe_fleet&quot;</span><span class="fu">,</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;fleet_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-displays&quot;</span><span class="fu">,</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_apply&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Stop receiving fleet layouts:</strong></p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;unsubscribe_fleet&quot;</span><span class="fu">,</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;fleet_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-displays&quot;</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 data-number="1.7" id="system-commands"><span
class="header-section-number">1.7</span> 6. System Commands</h2>
<h3 data-number="1.7.1" id="device-control"><span
class="header-section-number">1.7.1</span> Device Control</h3>
<p><strong>List all active windows:</strong></p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;list_windows&quot;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Returns detailed information about every window including ID, type,
position, size, and configuration.</p>
<p><strong>Get device information:</strong> Subscribe to
<code>kingkiosk/{device_id}/info</code> to receive: - Device ID and
version - Platform (Android, iOS, macOS, etc.) - Supported capabilities
- Available widget types - Currently active widgets -
<code>timestamp</code> (when this info message was published) -
<code>app_start_timestamp</code> (when the app process started)</p>
<h3 data-number="1.7.2" id="volume-and-brightness"><span
class="header-section-number">1.7.2</span> Volume and Brightness</h3>
<p><strong>Set Volume (0.0 to 1.0):</strong></p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_volume&quot;</span><span class="fu">,</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.5</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Mute/Unmute:</strong></p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mute&quot;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;unmute&quot;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Set Brightness (0.0 to 1.0):</strong></p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_brightness&quot;</span><span class="fu">,</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.8</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Get Current Brightness:</strong></p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;get_brightness&quot;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Restore Default Brightness:</strong></p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;restore_brightness&quot;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.7.3" id="notifications-and-alerts"><span
class="header-section-number">1.7.3</span> Notifications and Alerts</h3>
<p><strong>Show a Toast Notification:</strong></p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;notify&quot;</span><span class="fu">,</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Welcome&quot;</span><span class="fu">,</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Good morning!&quot;</span><span class="fu">,</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;duration&quot;</span><span class="fu">:</span> <span class="dv">5</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Priority levels: <code>low</code>, <code>normal</code>,
<code>high</code></p>
<p><strong>Show a rich notification with formatting:</strong></p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;notify&quot;</span><span class="fu">,</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Update Available&quot;</span><span class="fu">,</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;**Version 2.0** is now available with *exciting new features*!&quot;</span><span class="fu">,</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;format&quot;</span><span class="fu">:</span> <span class="st">&quot;markdown&quot;</span><span class="fu">,</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;thumbnail&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/icon.png&quot;</span><span class="fu">,</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;priority&quot;</span><span class="fu">:</span> <span class="st">&quot;high&quot;</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Show an Alert Dialog:</strong></p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;alert&quot;</span><span class="fu">,</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Attention Required&quot;</span><span class="fu">,</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Please check the system status.&quot;</span><span class="fu">,</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;warning&quot;</span><span class="fu">,</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;position&quot;</span><span class="fu">:</span> <span class="st">&quot;center&quot;</span><span class="fu">,</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_dismiss_seconds&quot;</span><span class="fu">:</span> <span class="dv">30</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Alert options: - <code>type</code>: <code>info</code>,
<code>success</code>, <code>warning</code>, <code>error</code> -
<code>position</code>: Where on screen to show -
<code>show_border</code>: true/false - <code>border_color</code>: Hex
color code - <code>auto_dismiss_seconds</code>: 1-300 seconds</p>
<h3 data-number="1.7.4" id="visual-effects"><span
class="header-section-number">1.7.4</span> Visual Effects</h3>
<p><strong>Halo Effect (Border Glow):</strong></p>
<p>Create an attention-grabbing glowing border around the screen or a
specific window:</p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;halo_effect&quot;</span><span class="fu">,</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF0000&quot;</span><span class="fu">,</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">20</span><span class="fu">,</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;intensity&quot;</span><span class="fu">:</span> <span class="fl">0.8</span><span class="fu">,</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pulse_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;gentle&quot;</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Pulse modes: <code>none</code>, <code>gentle</code>,
<code>moderate</code>, <code>alert</code></p>
<p>Apply to a specific window:</p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;halo_effect&quot;</span><span class="fu">,</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;important-alert&quot;</span><span class="fu">,</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FFD700&quot;</span><span class="fu">,</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pulse_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;alert&quot;</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Disable the effect:</p>
<div class="sourceCode" id="cb54"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;halo_effect&quot;</span><span class="fu">,</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Screensaver (Bouncing Content):</strong></p>
<p>Display a full-screen screensaver with bouncing items like clocks,
images, or text. Each item moves independently around the screen,
bouncing off the edges. Tap anywhere to dismiss.</p>
<p>Turn on a simple clock screensaver:</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screensaver&quot;</span><span class="fu">,</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;enable&quot;</span><span class="fu">,</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;items&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;clock&quot;</span><span class="fu">,</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;show_seconds&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> <span class="dt">&quot;text_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#00FF00&quot;</span> <span class="fu">},</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">250</span><span class="fu">,</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;speed&quot;</span><span class="fu">:</span> <span class="fl">1.0</span><span class="fu">,</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;scale&quot;</span><span class="fu">:</span> <span class="fl">1.5</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#000000&quot;</span><span class="fu">,</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_opacity&quot;</span><span class="fu">:</span> <span class="fl">0.9</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Add multiple bouncing items (each moves independently):</p>
<div class="sourceCode" id="cb56"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screensaver&quot;</span><span class="fu">,</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;enable&quot;</span><span class="fu">,</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;items&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;clock_1&quot;</span><span class="fu">,</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;clock&quot;</span><span class="fu">,</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;show_seconds&quot;</span><span class="fu">:</span> <span class="kw">false</span> <span class="fu">},</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;speed&quot;</span><span class="fu">:</span> <span class="fl">0.8</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;logo_1&quot;</span><span class="fu">,</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/logo.png&quot;</span> <span class="fu">},</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;speed&quot;</span><span class="fu">:</span> <span class="fl">1.2</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;welcome&quot;</span><span class="fu">,</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;text&quot;</span><span class="fu">,</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Welcome!&quot;</span><span class="fu">,</span> <span class="dt">&quot;font_size&quot;</span><span class="fu">:</span> <span class="dv">48</span> <span class="fu">},</span></span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;speed&quot;</span><span class="fu">:</span> <span class="fl">1.0</span></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Item types you can use: - <code>clock</code> - Digital clock
(options: <code>show_seconds</code>, <code>show_date</code>,
<code>text_color</code>, <code>font_size</code>) - <code>image</code> or
<code>logo</code> - Image from URL (options: <code>url</code>,
<code>fit</code>) - <code>text</code> - Custom text (options:
<code>text</code>, <code>font_size</code>, <code>font_weight</code>,
<code>text_color</code>) - <code>icon</code> - System icon (options:
<code>icon</code>, <code>size</code>, <code>color</code>) - icons
include: star, heart, home, music, sun, moon</p>
<p>Item properties: - <code>speed</code> - How fast it bounces (0.5 =
slow, 1.0 = normal, 2.0 = fast) - <code>scale</code> - Size multiplier
(1.5 = 50% bigger) - <code>width</code>, <code>height</code> - Base size
in pixels</p>
<p>Turn off the screensaver:</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screensaver&quot;</span><span class="fu">,</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;disable&quot;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Add an item to a running screensaver:</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screensaver&quot;</span><span class="fu">,</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;add_item&quot;</span><span class="fu">,</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;item&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;new_icon&quot;</span><span class="fu">,</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;icon&quot;</span><span class="fu">,</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="st">&quot;star&quot;</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FFD700&quot;</span> <span class="fu">},</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;speed&quot;</span><span class="fu">:</span> <span class="fl">1.5</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Remove an item:</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screensaver&quot;</span><span class="fu">,</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;remove_item&quot;</span><span class="fu">,</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;item_id&quot;</span><span class="fu">:</span> <span class="st">&quot;new_icon&quot;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.7.5" id="text-to-speech"><span
class="header-section-number">1.7.5</span> Text-to-Speech</h3>
<p>Make your display speak. When the Feature Server is connected, TTS
automatically uses the high-quality Piper engine. When disconnected, it
falls back to on-device TTS. The same commands work in both modes.</p>
<p><strong>Basic speech:</strong></p>
<div class="sourceCode" id="cb60"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Welcome to King Kiosk!&quot;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>With voice customization:</strong></p>
<div class="sourceCode" id="cb61"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;The current temperature is 72 degrees.&quot;</span><span class="fu">,</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;en-US&quot;</span><span class="fu">,</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;volume&quot;</span><span class="fu">:</span> <span class="fl">0.8</span><span class="fu">,</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;rate&quot;</span><span class="fu">:</span> <span class="fl">0.9</span><span class="fu">,</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pitch&quot;</span><span class="fu">:</span> <span class="fl">1.0</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>With a specific Piper voice (Feature Server):</strong></p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Good morning! The front door is unlocked.&quot;</span><span class="fu">,</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;voice&quot;</span><span class="fu">:</span> <span class="st">&quot;en_US-lessac-medium&quot;</span><span class="fu">,</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;volume&quot;</span><span class="fu">:</span> <span class="fl">0.9</span><span class="fu">,</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;rate&quot;</span><span class="fu">:</span> <span class="fl">0.5</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Control playback:</strong></p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;stop&quot;</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Actions: <code>speak</code>, <code>stop</code>, <code>pause</code>,
<code>resume</code></p>
<p><strong>Get available voices:</strong></p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;getVoices&quot;</span><span class="fu">,</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>When the Feature Server is connected, this returns Piper voices with
details like <code>voiceId</code>, <code>languageCode</code>,
<code>quality</code>, and <code>installed</code> status. You can filter
results:</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;getVoices&quot;</span><span class="fu">,</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;en_US&quot;</span><span class="fu">,</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;quality&quot;</span><span class="fu">:</span> <span class="st">&quot;medium&quot;</span><span class="fu">,</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Install a voice on the Feature Server:</strong></p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;voice_pull&quot;</span><span class="fu">,</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;voice&quot;</span><span class="fu">:</span> <span class="st">&quot;en_US-lessac-medium&quot;</span><span class="fu">,</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Check TTS status:</strong></p>
<div class="sourceCode" id="cb67"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;status&quot;</span><span class="fu">,</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The response includes <code>feature_server_connected</code>,
<code>engine</code> (either <code>piper</code> or the on-device engine),
and current settings.</p>
<h3 data-number="1.7.6" id="speech-to-text"><span
class="header-section-number">1.7.6</span> Speech-to-Text</h3>
<p>Enable voice input:</p>
<p><strong>Start listening:</strong></p>
<div class="sourceCode" id="cb68"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stt&quot;</span><span class="fu">,</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;start&quot;</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Stop listening and get result:</strong></p>
<div class="sourceCode" id="cb69"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stt&quot;</span><span class="fu">,</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;stop&quot;</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Configure language:</strong></p>
<div class="sourceCode" id="cb70"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stt&quot;</span><span class="fu">,</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;set_language&quot;</span><span class="fu">,</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;en&quot;</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Send transcriptions to AI agent:</strong></p>
<div class="sourceCode" id="cb71"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stt&quot;</span><span class="fu">,</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;send_to_ai_agent&quot;</span><span class="fu">,</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Audio Input Device (Microphone)</strong></p>
<p>The microphone used for Speech-to-Text is the one selected in
<strong>Settings -&gt; Speech &amp; AI -&gt; Audio Input
Device</strong>.</p>
<p>You can also query/change it via MQTT:</p>
<div class="sourceCode" id="cb72"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;unified_audio&quot;</span><span class="fu">,</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;status&quot;</span><span class="fu">,</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/{device_id}/system/response&quot;</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb73"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;unified_audio&quot;</span><span class="fu">,</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;list_devices&quot;</span><span class="fu">,</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/{device_id}/system/response&quot;</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb74"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;unified_audio&quot;</span><span class="fu">,</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;set_device&quot;</span><span class="fu">,</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;device_id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/{device_id}/system/response&quot;</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.7.7" id="screenshots-and-screen-capture"><span
class="header-section-number">1.7.7</span> Screenshots and Screen
Capture</h3>
<p><strong>Take a screenshot:</strong></p>
<div class="sourceCode" id="cb75"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screenshot&quot;</span><span class="fu">,</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;notify&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The screenshot is published as image data to
<code>kingkiosk/{device_id}/screenshot</code>. Home Assistant can use
this as a camera feed to view your display remotely.</p>
<p><strong>Enable periodic screenshot capture:</strong></p>
<div class="sourceCode" id="cb76"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screenshot_camera&quot;</span><span class="fu">,</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;enable&quot;</span><span class="fu">,</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;interval&quot;</span><span class="fu">:</span> <span class="dv">30</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>This captures and publishes a screenshot every 30 seconds.</p>
<p><strong>Disable screenshot capture:</strong></p>
<div class="sourceCode" id="cb77"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screenshot_camera&quot;</span><span class="fu">,</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;disable&quot;</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.7.8" id="background-settings"><span
class="header-section-number">1.7.8</span> Background Settings</h3>
<p><strong>Set a solid color background:</strong></p>
<div class="sourceCode" id="cb78"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_background&quot;</span><span class="fu">,</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;default&quot;</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Set an image background:</strong></p>
<div class="sourceCode" id="cb79"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_background&quot;</span><span class="fu">,</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;image_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/wallpaper.jpg&quot;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Set a web page as background:</strong></p>
<div class="sourceCode" id="cb80"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_background&quot;</span><span class="fu">,</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;webview&quot;</span><span class="fu">,</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;web_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/animated-background&quot;</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Get current background:</strong></p>
<div class="sourceCode" id="cb81"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;get_background&quot;</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.7.9" id="screensaver"><span
class="header-section-number">1.7.9</span> Screensaver</h3>
<p>King Kiosk includes a built-in screensaver that activates after a
period of inactivity. This helps prevent screen burn-in and can create a
more polished appearance when the display isn’t being actively used.</p>
<p><strong>Configuring the Screensaver (In-App):</strong></p>
<p>Go to <strong>Settings → App Settings</strong> and find the
<strong>Screensaver</strong> option. You can choose from three
modes:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Off</strong></td>
<td>Screensaver is disabled</td>
</tr>
<tr>
<td><strong>Dim</strong></td>
<td>Screen goes black after the timeout period</td>
</tr>
<tr>
<td><strong>Screensaver</strong></td>
<td>A bouncing clock appears after the timeout period</td>
</tr>
</tbody>
</table>
<p>You can also set the <strong>Timeout</strong> (1-60 minutes) - how
long the device must be idle before the screensaver activates.</p>
<p><strong>Waking the Screensaver:</strong></p>
<ul>
<li><strong>Touch/Remote:</strong> Tap anywhere on the screen or press
any button on the remote to wake the display</li>
<li><strong>MQTT Command:</strong> Send a wake command to dismiss the
screensaver remotely</li>
</ul>
<p><strong>Wake from screensaver via MQTT:</strong></p>
<div class="sourceCode" id="cb82"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screensaver&quot;</span><span class="fu">,</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;wake&quot;</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Alternative actions that also wake the screensaver:
<code>wake_up</code>, <code>deactivate</code></p>
<p><strong>Get screensaver state:</strong></p>
<div class="sourceCode" id="cb83"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;screensaver&quot;</span><span class="fu">,</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;get_state&quot;</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<blockquote>
<p><strong>Note:</strong> The idle screensaver is separate from the
MQTT-controlled bouncing screensaver. The idle screensaver activates
automatically based on inactivity, while the MQTT screensaver can be
triggered remotely with custom items like images, text, and clocks.</p>
</blockquote>
<h3 data-number="1.7.10" id="ai-integration"><span
class="header-section-number">1.7.10</span> AI Integration</h3>
<p>King Kiosk can connect to various AI services for voice conversations
and intelligent responses.</p>
<p><strong>Enable AI agent:</strong></p>
<div class="sourceCode" id="cb84"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;ai_agent&quot;</span><span class="fu">,</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;enable&quot;</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Configure Home Assistant conversation:</strong></p>
<div class="sourceCode" id="cb85"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;ai_agent&quot;</span><span class="fu">,</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;configure_home_assistant&quot;</span><span class="fu">,</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;base_url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://homeassistant.local:8123&quot;</span><span class="fu">,</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;access_token&quot;</span><span class="fu">:</span> <span class="st">&quot;your_long_lived_token&quot;</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Configure a chat bot:</strong></p>
<div class="sourceCode" id="cb86"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;provision_ai_chatbot&quot;</span><span class="fu">,</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;provider&quot;</span><span class="fu">:</span> <span class="st">&quot;anthropic&quot;</span><span class="fu">,</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;api_key&quot;</span><span class="fu">:</span> <span class="st">&quot;your_api_key&quot;</span><span class="fu">,</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;model&quot;</span><span class="fu">:</span> <span class="st">&quot;claude-3-sonnet&quot;</span><span class="fu">,</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;enable_speech&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;enable_tts&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Supported providers: <code>anthropic</code>, <code>openai</code>,
<code>gemini</code>, <code>ollama</code></p>
<p><strong>Send a message to the AI:</strong></p>
<div class="sourceCode" id="cb87"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;ai_agent&quot;</span><span class="fu">,</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;send_message&quot;</span><span class="fu">,</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;What&#39;s the weather like today?&quot;</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.7.11" id="batch-commands-and-scripting"><span
class="header-section-number">1.7.11</span> Batch Commands and
Scripting</h3>
<p>Batch scripting lets you send a single MQTT command that runs a whole
sequence of steps on the kiosk — one after another, with optional pauses
between them. Instead of publishing five separate MQTT messages from
Home Assistant and hoping the timing works out, you send one
<code>batch</code> command and King Kiosk handles the rest.</p>
<p>Any command you can send individually over MQTT works inside a batch.
Open windows, load a saved layout, play audio, speak text, change the
background, adjust brightness — mix and match however you want.</p>
<h4 data-number="1.7.11.1" id="why-use-batches"><span
class="header-section-number">1.7.11.1</span> Why Use Batches?</h4>
<ul>
<li><strong>Morning routines</strong> — Set the volume, load a
dashboard, announce the weather, all from one automation trigger</li>
<li><strong>Scene changes</strong> — Close everything, set a background,
open specific windows in the right positions, with timed delays so the
transitions look smooth</li>
<li><strong>Presentations and demos</strong> — Script a walkthrough that
steps through screens automatically</li>
<li><strong>Provisioning a new device</strong> — Configure a kiosk from
scratch: set the background, add windows, enable features, all in one
shot</li>
</ul>
<h4 data-number="1.7.11.2" id="how-it-works"><span
class="header-section-number">1.7.11.2</span> How It Works</h4>
<p>Send a <code>batch</code> command with a <code>commands</code> array.
Each item is a normal King Kiosk MQTT command. They execute in order,
top to bottom. Use <code>wait</code> steps to pause between
commands.</p>
<p>Only one batch can run at a time. If you send a new batch while one
is already running, it will be rejected.</p>
<p>If any individual command fails, the batch logs the error and keeps
going with the next step — it won’t stop the whole sequence.</p>
<h4 data-number="1.7.11.3" id="basic-example"><span
class="header-section-number">1.7.11.3</span> Basic Example</h4>
<div class="sourceCode" id="cb88"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;batch&quot;</span><span class="fu">,</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;commands&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_volume&quot;</span><span class="fu">,</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.3</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;wait&quot;</span><span class="fu">,</span> <span class="dt">&quot;seconds&quot;</span><span class="fu">:</span> <span class="dv">2</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;notify&quot;</span><span class="fu">,</span> <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Starting&quot;</span><span class="fu">,</span> <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning routine beginning&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;load_screen_state&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Morning Dashboard&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span> <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Good morning! Here&#39;s your dashboard.&quot;</span> <span class="fu">}</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.7.11.4" id="provisioning-a-fresh-device"><span
class="header-section-number">1.7.11.4</span> Provisioning a Fresh
Device</h4>
<p>Set up a brand new kiosk with one command:</p>
<div class="sourceCode" id="cb89"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;batch&quot;</span><span class="fu">,</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;commands&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;close_all_windows&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_background&quot;</span><span class="fu">,</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;image_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/wallpaper.jpg&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;wait&quot;</span><span class="fu">,</span> <span class="dt">&quot;seconds&quot;</span><span class="fu">:</span> <span class="dv">1</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_browser&quot;</span><span class="fu">,</span> <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;dashboard&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://homeassistant.local:8123&quot;</span><span class="fu">,</span> <span class="dt">&quot;auto_connect&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_volume&quot;</span><span class="fu">,</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_brightness&quot;</span><span class="fu">,</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.8</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;save_screen_state&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Default Layout&quot;</span> <span class="fu">}</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.7.11.5" id="scene-transitions"><span
class="header-section-number">1.7.11.5</span> Scene Transitions</h4>
<p>Create smooth scene changes with timed delays:</p>
<div class="sourceCode" id="cb90"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;batch&quot;</span><span class="fu">,</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;commands&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;close_all_windows&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;wait&quot;</span><span class="fu">,</span> <span class="dt">&quot;seconds&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_background&quot;</span><span class="fu">,</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;image_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/movie-night.jpg&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;wait&quot;</span><span class="fu">,</span> <span class="dt">&quot;seconds&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_browser&quot;</span><span class="fu">,</span> <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;media&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://youtube.com&quot;</span><span class="fu">,</span> <span class="dt">&quot;auto_connect&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_brightness&quot;</span><span class="fu">,</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.3</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_volume&quot;</span><span class="fu">,</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">0.7</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span> <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Movie night is ready.&quot;</span> <span class="fu">}</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.7.11.6" id="the-wait-command"><span
class="header-section-number">1.7.11.6</span> The Wait Command</h4>
<p>Use <code>wait</code> to pause between steps. The
<code>seconds</code> value can range from 0 to 300 (5 minutes max).
Fractional values like <code>0.5</code> work fine for short pauses.</p>
<div class="sourceCode" id="cb91"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;wait&quot;</span><span class="fu">,</span> <span class="dt">&quot;seconds&quot;</span><span class="fu">:</span> <span class="dv">5</span> <span class="fu">}</span></span></code></pre></div>
<p>Waits are interruptible — if you cancel the batch during a wait, it
stops immediately rather than waiting for the full duration.</p>
<h4 data-number="1.7.11.7"
id="saving-and-loading-scenes-with-screen-states"><span
class="header-section-number">1.7.11.7</span> Saving and Loading Scenes
with Screen States</h4>
<p>You can save the current layout as a named screen state, then restore
it later — either manually or as part of a batch. This is the easiest
way to build reusable “scenes.”</p>
<p><strong>Save a scene:</strong></p>
<div class="sourceCode" id="cb92"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;save_screen_state&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Movie Night&quot;</span> <span class="fu">}</span></span></code></pre></div>
<p><strong>Load a saved scene:</strong></p>
<div class="sourceCode" id="cb93"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;load_screen_state&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Movie Night&quot;</span> <span class="fu">}</span></span></code></pre></div>
<p><strong>List all saved scenes:</strong></p>
<div class="sourceCode" id="cb94"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;list_screen_states&quot;</span><span class="fu">,</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Delete a scene:</strong></p>
<div class="sourceCode" id="cb95"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;delete_screen_state&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Old Layout&quot;</span> <span class="fu">}</span></span></code></pre></div>
<p><strong>Export a scene as JSON</strong> (for backup or sharing to
other devices):</p>
<div class="sourceCode" id="cb96"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;export_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Movie Night&quot;</span><span class="fu">,</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Import a scene from JSON:</strong></p>
<div class="sourceCode" id="cb97"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;import_screen_state&quot;</span><span class="fu">,</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Movie Night&quot;</span><span class="fu">,</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;screen_state&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">...</span> <span class="fu">},</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;overwrite&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.7.11.8" id="monitoring-and-canceling"><span
class="header-section-number">1.7.11.8</span> Monitoring and
Canceling</h4>
<p><strong>Check batch status:</strong></p>
<div class="sourceCode" id="cb98"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;batch_status&quot;</span><span class="fu">,</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The response tells you whether a batch is running, how far along it
is, and the total number of steps.</p>
<p><strong>Cancel a running batch:</strong></p>
<div class="sourceCode" id="cb99"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;kill_batch_script&quot;</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The batch stops after the current command finishes (or immediately if
it’s in a <code>wait</code> step).</p>
<h4 data-number="1.7.11.9" id="home-assistant-automation-example"><span
class="header-section-number">1.7.11.9</span> Home Assistant Automation
Example</h4>
<div class="sourceCode" id="cb100"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">automation</span><span class="kw">:</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">alias</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Good Morning Routine&quot;</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">trigger</span><span class="kw">:</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">platform</span><span class="kw">:</span><span class="at"> time</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">at</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;07:00:00&quot;</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">action</span><span class="kw">:</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">service</span><span class="kw">:</span><span class="at"> mqtt.publish</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/kitchen_tablet/system/cmd&quot;</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a><span class="fu">          payload</span><span class="kw">: </span><span class="ch">&gt;</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>              &quot;command&quot;: &quot;batch&quot;,</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>              &quot;commands&quot;: [</span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>                { &quot;command&quot;: &quot;set_brightness&quot;, &quot;value&quot;: 0.6 },</span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>                { &quot;command&quot;: &quot;set_volume&quot;, &quot;value&quot;: 0.4 },</span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>                { &quot;command&quot;: &quot;load_screen_state&quot;, &quot;name&quot;: &quot;Morning Dashboard&quot; },</span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>                { &quot;command&quot;: &quot;wait&quot;, &quot;seconds&quot;: 1 },</span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>                { &quot;command&quot;: &quot;tts&quot;, &quot;text&quot;: &quot;Good morning! Here&#39;s your schedule for today.&quot; }</span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a>              ]</span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a>            }</span></code></pre></div>
<hr />
<h2 data-number="1.8" id="widget-reference"><span
class="header-section-number">1.8</span> 7. Widget Reference</h2>
<h3 data-number="1.8.1" id="web-browsers"><span
class="header-section-number">1.8.1</span> Web Browsers</h3>
<p>Display any web page in a window.</p>
<p><strong>Open a web browser:</strong></p>
<div class="sourceCode" id="cb101"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_browser&quot;</span><span class="fu">,</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://www.google.com&quot;</span><span class="fu">,</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Search&quot;</span><span class="fu">,</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;google-browser&quot;</span><span class="fu">,</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">800</span><span class="fu">,</span></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">600</span></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Alternative commands: <code>open_web</code>,
<code>open_simple_web</code></p>
<p><strong>Apple TV Convenience:</strong> On tvOS (Apple TV), these
browser commands (<code>open_browser</code>, <code>open_web</code>,
<code>open_simple_web</code>) automatically map to
<code>create_remote_browser</code>. This means you can use the same
familiar API across all platforms - King Kiosk handles the
platform-specific implementation for you. Your automations work
everywhere without modification.</p>
<h3 data-number="1.8.2" id="remote-browser-apple-tv-ios"><span
class="header-section-number">1.8.2</span> Remote Browser (Apple TV
&amp; iOS)</h3>
<p>For Apple TV and iOS devices where local browser rendering is
limited, King Kiosk offers a remote browser experience. A server renders
the web page and streams it to your device in real-time.</p>
<p><strong>Create a remote browser:</strong></p>
<div class="sourceCode" id="cb102"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_remote_browser&quot;</span><span class="fu">,</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;initial_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://www.google.com&quot;</span><span class="fu">,</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_connect&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Optional parameters: <code>name</code>, <code>video_profile</code>
(<code>auto</code>, <code>720p30</code>, <code>1080p30</code>,
<code>1080p60</code>), <code>show_overlay</code></p>
<p><strong>Navigate to a URL:</strong></p>
<div class="sourceCode" id="cb103"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;navigate_remote_browser&quot;</span><span class="fu">,</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://www.example.com&quot;</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Browser navigation:</strong></p>
<div class="sourceCode" id="cb104"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_back&quot;</span><span class="fu">,</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb105"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_forward&quot;</span><span class="fu">,</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb106"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_reload&quot;</span><span class="fu">,</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Simulate interaction:</strong></p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_click&quot;</span><span class="fu">,</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">300</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb108"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_scroll&quot;</span><span class="fu">,</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;delta_x&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;delta_y&quot;</span><span class="fu">:</span> <span class="dv">-100</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb109"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_key&quot;</span><span class="fu">,</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;key&quot;</span><span class="fu">:</span> <span class="st">&quot;Enter&quot;</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb110"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_text&quot;</span><span class="fu">,</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;search query&quot;</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Apple TV Remote mapping:</strong> - D-pad: Move pointer (with
acceleration) - Select/Enter: Click - Menu/Escape: Navigate back -
Play/Pause: Toggle Pointer/Scroll mode - Touch swipe: Pointer mode =
move cursor, Scroll mode = scroll - Long press: Right-click</p>
<p><strong>Browser Session Persistence:</strong></p>
<p>Remote browser sessions automatically remember your logins, just like
a regular browser. When you log into Netflix, YouTube, or any website,
you’ll stay logged in - even after closing the app or restarting your
device.</p>
<p><strong>How it works:</strong> - Your login sessions and site data
are tied to the <code>window_id</code> you specify - Use the same
<code>window_id</code> = same login sessions preserved - Use a different
<code>window_id</code> = fresh browser with no saved logins</p>
<p><strong>Example:</strong> If you create a browser with
<code>"window_id": "netflix"</code>, log into Netflix, then close it -
the next time you create a browser with
<code>"window_id": "netflix"</code>, you’ll still be logged in. But
<code>"window_id": "youtube"</code> would be a separate browser that
doesn’t share Netflix’s login.</p>
<p><strong>Key points:</strong> - <strong>Automatic</strong>: No
configuration needed - just works - <strong>Isolated</strong>: Each
<code>window_id</code> has its own separate logins and data -
<strong>Persistent</strong>: Survives app restarts and device
reboots</p>
<p><strong>Clear browser data (logout/reset):</strong></p>
<div class="sourceCode" id="cb111"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_clear_data&quot;</span><span class="fu">,</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>This clears all cookies, localStorage, and cached data for the
browser tile, then restarts the session. Use this to implement “logout”
functionality for web apps.</p>
<p><strong>Debug status (helpful for double-audio / missing-audio
issues):</strong></p>
<div class="sourceCode" id="cb112"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remote_browser_status&quot;</span><span class="fu">,</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.3" id="clock-widget"><span
class="header-section-number">1.8.3</span> Clock Widget</h3>
<p>Display beautiful analog or digital clocks.</p>
<p><strong>Create a clock:</strong></p>
<div class="sourceCode" id="cb113"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_clock&quot;</span><span class="fu">,</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;main-clock&quot;</span><span class="fu">,</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;analog&quot;</span><span class="fu">,</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;theme&quot;</span><span class="fu">:</span> <span class="st">&quot;dark&quot;</span><span class="fu">,</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;show_numbers&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;show_second_hand&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">300</span><span class="fu">,</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">300</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Change clock mode via element command:</strong> Topic:
<code>kingkiosk/{device_id}/element/main-clock/cmd</code></p>
<div class="sourceCode" id="cb114"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_mode&quot;</span><span class="fu">,</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;digital&quot;</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Toggle between analog and digital:</strong></p>
<div class="sourceCode" id="cb115"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;toggle_mode&quot;</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Configure appearance:</strong></p>
<div class="sourceCode" id="cb116"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;configure&quot;</span><span class="fu">,</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;theme&quot;</span><span class="fu">:</span> <span class="st">&quot;light&quot;</span><span class="fu">,</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;gradient&quot;</span><span class="fu">,</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#1a1a2e&quot;</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Background modes: <code>transparent</code>, <code>gradient</code>,
<code>color</code>, <code>image</code></p>
<h3 data-number="1.8.4" id="weather-widget"><span
class="header-section-number">1.8.4</span> Weather Widget</h3>
<p>Display current weather and forecasts from OpenWeather.</p>
<p><strong>Create a weather widget:</strong></p>
<div class="sourceCode" id="cb117"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_weather_client&quot;</span><span class="fu">,</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;weather-1&quot;</span><span class="fu">,</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;api_key&quot;</span><span class="fu">:</span> <span class="st">&quot;your_openweather_api_key&quot;</span><span class="fu">,</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;location&quot;</span><span class="fu">:</span> <span class="st">&quot;New York&quot;</span><span class="fu">,</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;units&quot;</span><span class="fu">:</span> <span class="st">&quot;imperial&quot;</span><span class="fu">,</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;show_forecast&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_refresh&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;refresh_interval&quot;</span><span class="fu">:</span> <span class="dv">1800</span><span class="fu">,</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">350</span><span class="fu">,</span></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">400</span></span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Units: <code>imperial</code> (Fahrenheit), <code>metric</code>
(Celsius), <code>standard</code> (Kelvin)</p>
<p>You can also use coordinates instead of city name:</p>
<div class="sourceCode" id="cb118"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;latitude&quot;</span><span class="fu">:</span> <span class="fl">40.7128</span><span class="fu">,</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;longitude&quot;</span><span class="fu">:</span> <span class="fl">-74.0060</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.5" id="media-player"><span
class="header-section-number">1.8.5</span> Media Player</h3>
<p>Play video, audio, and images.</p>
<p><strong>Play a video:</strong></p>
<div class="sourceCode" id="cb119"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;play_media&quot;</span><span class="fu">,</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;video&quot;</span><span class="fu">,</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/video.mp4&quot;</span><span class="fu">,</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;video-player&quot;</span><span class="fu">,</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;My Video&quot;</span><span class="fu">,</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;loop&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">640</span><span class="fu">,</span></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">360</span></span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Play audio:</strong></p>
<div class="sourceCode" id="cb120"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;play_media&quot;</span><span class="fu">,</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;audio&quot;</span><span class="fu">,</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/music.mp3&quot;</span><span class="fu">,</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;visualizer&quot;</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Audio styles: <code>window</code> (basic player),
<code>visualizer</code> (spectrum analyzer)</p>
<p><strong>Visualizer options:</strong></p>
<div class="sourceCode" id="cb121"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;play_media&quot;</span><span class="fu">,</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;audio&quot;</span><span class="fu">,</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/music.mp3&quot;</span><span class="fu">,</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;visualizer&quot;</span><span class="fu">,</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;visualizer_type&quot;</span><span class="fu">:</span> <span class="st">&quot;fft&quot;</span><span class="fu">,</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;bars&quot;</span><span class="fu">:</span> <span class="dv">64</span><span class="fu">,</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color_scheme&quot;</span><span class="fu">:</span> <span class="st">&quot;rainbow&quot;</span><span class="fu">,</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;show_peaks&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Display an image:</strong></p>
<div class="sourceCode" id="cb122"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;play_media&quot;</span><span class="fu">,</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/photo.jpg&quot;</span><span class="fu">,</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;image-display&quot;</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Control playback:</strong></p>
<div class="sourceCode" id="cb123"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;play&quot;</span><span class="fu">,</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;video-player&quot;</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb124"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;pause&quot;</span><span class="fu">,</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;video-player&quot;</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb125"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;close&quot;</span><span class="fu">,</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;video-player&quot;</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Background audio control:</strong></p>
<div class="sourceCode" id="cb126"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;play_audio&quot;</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb127"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;pause_audio&quot;</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb128"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stop_audio&quot;</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb129"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;seek_audio&quot;</span><span class="fu">,</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;position&quot;</span><span class="fu">:</span> <span class="dv">30</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.6" id="youtube-player"><span
class="header-section-number">1.8.6</span> YouTube Player</h3>
<p>Play YouTube videos directly.</p>
<p><strong>Open YouTube:</strong></p>
<div class="sourceCode" id="cb130"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;youtube&quot;</span><span class="fu">,</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://www.youtube.com/watch?v=dQw4w9WgXcQ&quot;</span><span class="fu">,</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Music Video&quot;</span><span class="fu">,</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;youtube-player&quot;</span><span class="fu">,</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">800</span><span class="fu">,</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">450</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.7" id="image-carousel"><span
class="header-section-number">1.8.7</span> Image Carousel</h3>
<p>Create beautiful slideshows.</p>
<p><strong>Create a carousel:</strong></p>
<div class="sourceCode" id="cb131"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_carousel&quot;</span><span class="fu">,</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;photo-carousel&quot;</span><span class="fu">,</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Family Photos&quot;</span><span class="fu">,</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;items&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/photo1.jpg&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/photo2.jpg&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/photo3.jpg&quot;</span> <span class="fu">}</span></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;auto_play&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;interval&quot;</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span></span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;infinite_scroll&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;show_indicator&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Video carousel:</strong></p>
<div class="sourceCode" id="cb132"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_video_carousel&quot;</span><span class="fu">,</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;video-carousel&quot;</span><span class="fu">,</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;items&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;video&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/video1.mp4&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;video&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/video2.mp4&quot;</span> <span class="fu">}</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Add items to existing carousel:</strong></p>
<div class="sourceCode" id="cb133"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;add_carousel_item&quot;</span><span class="fu">,</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;photo-carousel&quot;</span><span class="fu">,</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;item&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/photo4.jpg&quot;</span> <span class="fu">}</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Navigate carousel:</strong></p>
<div class="sourceCode" id="cb134"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;navigate_carousel&quot;</span><span class="fu">,</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;photo-carousel&quot;</span><span class="fu">,</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;index&quot;</span><span class="fu">:</span> <span class="dv">5</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Or use <code>next</code> or <code>previous</code> as index
values.</p>
<p><strong>Configure carousel:</strong></p>
<div class="sourceCode" id="cb135"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_carousel_config&quot;</span><span class="fu">,</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;photo-carousel&quot;</span><span class="fu">,</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_play&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;interval&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;scroll_direction&quot;</span><span class="fu">:</span> <span class="st">&quot;vertical&quot;</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.8" id="gauges-and-thermostats"><span
class="header-section-number">1.8.8</span> Gauges and Thermostats</h3>
<p>Use gauges when you want a quick visual read on sensor values
(temperature, power, humidity, etc.).</p>
<p>Gauges now use a modern dark style by default with smooth value
animation.</p>
<p><strong>Create a simple gauge:</strong></p>
<div class="sourceCode" id="cb136"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu-usage&quot;</span><span class="fu">,</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;CPU Usage&quot;</span><span class="fu">,</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;circular&quot;</span><span class="fu">,</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">45</span><span class="fu">,</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;%&quot;</span><span class="fu">,</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">200</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Gauge types: <code>linear</code>, <code>circular</code>,
<code>radial</code>, <code>semicircular</code>,
<code>thermostat</code></p>
<p><strong>Create a thermostat from Home Assistant climate state
(current + heat + cool + optional humidity):</strong></p>
<div class="sourceCode" id="cb137"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;widget_upstairs_thermostat&quot;</span><span class="fu">,</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;widget_upstairs_thermostat&quot;</span><span class="fu">,</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Upstairs Thermostat&quot;</span><span class="fu">,</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;thermostat&quot;</span><span class="fu">,</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;°F&quot;</span><span class="fu">,</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;step_size&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;decimals&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;interactive&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;locked&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pointers&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;current&quot;</span><span class="fu">,</span></span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Current&quot;</span><span class="fu">,</span></span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;needle&quot;</span><span class="fu">,</span></span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;locked&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;subscribe_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/state/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;json_field&quot;</span><span class="fu">:</span> <span class="st">&quot;attributes.current_temperature&quot;</span></span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;heat&quot;</span><span class="fu">,</span></span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Heat&quot;</span><span class="fu">,</span></span>
<span id="cb137-26"><a href="#cb137-26" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;dot&quot;</span><span class="fu">,</span></span>
<span id="cb137-27"><a href="#cb137-27" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF6B35&quot;</span><span class="fu">,</span></span>
<span id="cb137-28"><a href="#cb137-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;subscribe_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/state/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb137-29"><a href="#cb137-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/command/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb137-30"><a href="#cb137-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;json_field&quot;</span><span class="fu">:</span> <span class="st">&quot;attributes.target_temp_low&quot;</span></span>
<span id="cb137-31"><a href="#cb137-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb137-32"><a href="#cb137-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb137-33"><a href="#cb137-33" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;cool&quot;</span><span class="fu">,</span></span>
<span id="cb137-34"><a href="#cb137-34" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Cool&quot;</span><span class="fu">,</span></span>
<span id="cb137-35"><a href="#cb137-35" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;dot&quot;</span><span class="fu">,</span></span>
<span id="cb137-36"><a href="#cb137-36" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#4FC3F7&quot;</span><span class="fu">,</span></span>
<span id="cb137-37"><a href="#cb137-37" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;subscribe_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/state/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb137-38"><a href="#cb137-38" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/command/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb137-39"><a href="#cb137-39" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;json_field&quot;</span><span class="fu">:</span> <span class="st">&quot;attributes.target_temp_high&quot;</span></span>
<span id="cb137-40"><a href="#cb137-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb137-41"><a href="#cb137-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb137-42"><a href="#cb137-42" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;humidity&quot;</span><span class="fu">,</span></span>
<span id="cb137-43"><a href="#cb137-43" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Humidity&quot;</span><span class="fu">,</span></span>
<span id="cb137-44"><a href="#cb137-44" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;dot&quot;</span><span class="fu">,</span></span>
<span id="cb137-45"><a href="#cb137-45" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;locked&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb137-46"><a href="#cb137-46" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#94A3B8&quot;</span><span class="fu">,</span></span>
<span id="cb137-47"><a href="#cb137-47" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;subscribe_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/state/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb137-48"><a href="#cb137-48" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;json_field&quot;</span><span class="fu">:</span> <span class="st">&quot;attributes.current_humidity&quot;</span></span>
<span id="cb137-49"><a href="#cb137-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb137-50"><a href="#cb137-50" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb137-51"><a href="#cb137-51" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Why this works: - Each pointer can listen to the same MQTT topic but
extract a different JSON field. - A thermostat with <code>current</code>
+ <code>heat</code> + <code>cool</code> pointers renders a Nest-style
range gauge. - If you include a <code>humidity</code> pointer, the
thermostat displays <code>HUMIDITY xx%</code> text in the center. -
Humidity pointer values are not clamped to thermostat min/max, so
<code>45%</code> stays <code>45%</code> even if temperature range is
<code>50..90</code>. - If you only provide a <code>current</code>
pointer, thermostat mode falls back to a single-value gauge. - In
multi-pointer thermostat mode, values only change when you drag a
setpoint dot handle, so accidental taps do not jump temperatures.</p>
<p>Color modes: <code>solid</code>, <code>gradient</code>,
<code>thresholds</code>, <code>zones</code></p>
<p>Pointer styles: <code>needle</code>, <code>dot</code>,
<code>triangle</code>, <code>line</code>, <code>target</code></p>
<p><strong>Update gauge value:</strong></p>
<div class="sourceCode" id="cb138"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_gauge_value&quot;</span><span class="fu">,</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu-usage&quot;</span><span class="fu">,</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">72</span></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Update a specific pointer:</strong></p>
<div class="sourceCode" id="cb139"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_pointer_value&quot;</span><span class="fu">,</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;living-room-thermostat&quot;</span><span class="fu">,</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pointer_id&quot;</span><span class="fu">:</span> <span class="st">&quot;current&quot;</span><span class="fu">,</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">72</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Lock/unlock gauge:</strong></p>
<div class="sourceCode" id="cb140"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;lock_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;living-room-thermostat&quot;</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb141"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;unlock_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;living-room-thermostat&quot;</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Configure gauge:</strong></p>
<div class="sourceCode" id="cb142"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;configure_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu-usage&quot;</span><span class="fu">,</span></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;decimals&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;show_min_max&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Tip: pointer MQTT fields (<code>subscribe_topic</code>,
<code>publish_topic</code>, <code>json_field</code>) belong inside each
pointer object. Top-level <code>subscribe_topic</code> is not used by
in-app gauges.</p>
<p>Tip: if <code>publish_topic</code> is a Home Assistant climate
command topic (<code>.../ha/command/climate/...</code>), King Kiosk now
sends <code>service: set_temperature</code> payloads automatically. You
can override with pointer <code>publish_payload</code> templates.</p>
<p><strong>Custom <code>publish_payload</code> templates for thermostat
range mode (copy/paste):</strong></p>
<div class="sourceCode" id="cb143"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;heat&quot;</span><span class="fu">,</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Heat&quot;</span><span class="fu">,</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;dot&quot;</span><span class="fu">,</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/command/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_payload&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;service&quot;</span><span class="fu">:</span> <span class="st">&quot;set_temperature&quot;</span><span class="fu">,</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;target_temp_low&quot;</span><span class="fu">:</span> <span class="st">&quot;{{value}}&quot;</span><span class="fu">,</span></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;target_temp_high&quot;</span><span class="fu">:</span> <span class="st">&quot;{{cool}}&quot;</span></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb144"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;cool&quot;</span><span class="fu">,</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Cool&quot;</span><span class="fu">,</span></span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;dot&quot;</span><span class="fu">,</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/ha/command/climate/upstairs&quot;</span><span class="fu">,</span></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_payload&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;service&quot;</span><span class="fu">:</span> <span class="st">&quot;set_temperature&quot;</span><span class="fu">,</span></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb144-9"><a href="#cb144-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;target_temp_low&quot;</span><span class="fu">:</span> <span class="st">&quot;{{heat}}&quot;</span><span class="fu">,</span></span>
<span id="cb144-10"><a href="#cb144-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;target_temp_high&quot;</span><span class="fu">:</span> <span class="st">&quot;{{value}}&quot;</span></span>
<span id="cb144-11"><a href="#cb144-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb144-12"><a href="#cb144-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb144-13"><a href="#cb144-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Template tokens available in pointer <code>publish_payload</code>: -
<code>{{value}}</code> = this pointer’s value - <code>{{heat}}</code> =
current heat/low setpoint pointer value - <code>{{cool}}</code> =
current cool/high setpoint pointer value - <code>{{current}}</code> =
current temperature pointer value - <code>{{pointer_id}}</code>,
<code>{{gauge_id}}</code>, <code>{{timestamp}}</code></p>
<p><strong>Platform controls:</strong> - tvOS: Use Siri Remote D-pad to
select pointers and adjust values - iOS: For thermostat range mode, drag
the heat/cool dots to adjust; background taps are ignored - macOS: For
thermostat range mode, click-drag the heat/cool dots to adjust;
background clicks are ignored</p>
<h3 data-number="1.8.9" id="charts"><span
class="header-section-number">1.8.9</span> Charts</h3>
<p>Charts support <code>line</code>, <code>bar</code>, and
<code>pie</code>, with dark themed styling and smooth transitions by
default.</p>
<p><strong>Create a line chart:</strong></p>
<div class="sourceCode" id="cb145"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_chart&quot;</span><span class="fu">,</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temperature-chart&quot;</span><span class="fu">,</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_type&quot;</span><span class="fu">:</span> <span class="st">&quot;line&quot;</span><span class="fu">,</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Temperature History&quot;</span><span class="fu">,</span></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max_points&quot;</span><span class="fu">:</span> <span class="dv">60</span><span class="fu">,</span></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">300</span></span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Chart types: <code>line</code>, <code>bar</code>,
<code>pie</code></p>
<p><strong>Add data to chart:</strong></p>
<div class="sourceCode" id="cb146"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;append_chart_data&quot;</span><span class="fu">,</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temperature-chart&quot;</span><span class="fu">,</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">72.5</span></span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Replace all chart data:</strong></p>
<div class="sourceCode" id="cb147"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;replace_chart_data&quot;</span><span class="fu">,</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temperature-chart&quot;</span><span class="fu">,</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;values&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">68</span><span class="ot">,</span> <span class="dv">70</span><span class="ot">,</span> <span class="dv">72</span><span class="ot">,</span> <span class="dv">75</span><span class="ot">,</span> <span class="dv">73</span><span class="ot">,</span> <span class="dv">71</span><span class="ot">,</span> <span class="dv">69</span><span class="ot">]</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Update pie chart:</strong></p>
<div class="sourceCode" id="cb148"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;update_pie_chart&quot;</span><span class="fu">,</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;sales-pie&quot;</span><span class="fu">,</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;slices&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">40</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Product A&quot;</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#3498db&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">30</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Product B&quot;</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#2ecc71&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">30</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Product C&quot;</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#e74c3c&quot;</span> <span class="fu">}</span></span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb148-9"><a href="#cb148-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Configure chart:</strong></p>
<div class="sourceCode" id="cb149"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;configure_chart&quot;</span><span class="fu">,</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temperature-chart&quot;</span><span class="fu">,</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;bar&quot;</span><span class="fu">,</span></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;primaryColor&quot;</span><span class="fu">:</span> <span class="st">&quot;#06B6D4&quot;</span></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Tip: <code>configure_chart</code> supports quick type/color changes.
For full chart styling (like <code>title</code>, <code>showGrid</code>,
<code>minY</code>, <code>maxY</code>, pie sizing), publish JSON to
<code>kingkiosk/chart/&lt;chart_id&gt;/config</code>.</p>
<p><strong>Reset chart data:</strong></p>
<div class="sourceCode" id="cb150"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;reset_chart&quot;</span><span class="fu">,</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temperature-chart&quot;</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.10" id="maps"><span
class="header-section-number">1.8.10</span> Maps</h3>
<p>Display interactive maps with custom pins and overlays.</p>
<p><strong>Create a map:</strong></p>
<div class="sourceCode" id="cb151"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_map&quot;</span><span class="fu">,</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;location-map&quot;</span><span class="fu">,</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Store Locations&quot;</span><span class="fu">,</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;initial_camera&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lat&quot;</span><span class="fu">:</span> <span class="fl">40.7128</span><span class="fu">,</span></span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lon&quot;</span><span class="fu">:</span> <span class="fl">-74.0060</span><span class="fu">,</span></span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;zoom&quot;</span><span class="fu">:</span> <span class="dv">12</span></span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;interaction&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;touch_enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb151-12"><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;remote_enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb151-13"><a href="#cb151-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;allow_user_drop_pins&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb151-14"><a href="#cb151-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb151-15"><a href="#cb151-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb151-16"><a href="#cb151-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb151-17"><a href="#cb151-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span></span>
<span id="cb151-18"><a href="#cb151-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">400</span></span>
<span id="cb151-19"><a href="#cb151-19" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Custom tile provider (e.g., for satellite
imagery):</strong></p>
<div class="sourceCode" id="cb152"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;provider&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;url_template&quot;</span><span class="fu">:</span> <span class="st">&quot;https://your-tile-server/{z}/{x}/{y}.png&quot;</span><span class="fu">,</span></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;attribution&quot;</span><span class="fu">:</span> <span class="st">&quot;Map data © Your Provider&quot;</span></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Add pins to map:</strong> Topic:
<code>kingkiosk/{device_id}/element/location-map/cmd</code></p>
<div class="sourceCode" id="cb153"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;add_pins&quot;</span><span class="fu">,</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pins&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;pin_id&quot;</span><span class="fu">:</span> <span class="st">&quot;store-1&quot;</span><span class="fu">,</span></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;lat&quot;</span><span class="fu">:</span> <span class="fl">40.7128</span><span class="fu">,</span></span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;lon&quot;</span><span class="fu">:</span> <span class="fl">-74.0060</span><span class="fu">,</span></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;default&quot;</span> <span class="fu">}</span></span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;pin_id&quot;</span><span class="fu">:</span> <span class="st">&quot;store-2&quot;</span><span class="fu">,</span></span>
<span id="cb153-12"><a href="#cb153-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;lat&quot;</span><span class="fu">:</span> <span class="fl">40.7580</span><span class="fu">,</span></span>
<span id="cb153-13"><a href="#cb153-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;lon&quot;</span><span class="fu">:</span> <span class="fl">-73.9855</span><span class="fu">,</span></span>
<span id="cb153-14"><a href="#cb153-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;url&quot;</span><span class="fu">,</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/marker.png&quot;</span> <span class="fu">}</span></span>
<span id="cb153-15"><a href="#cb153-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb153-16"><a href="#cb153-16" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb153-17"><a href="#cb153-17" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Move the camera:</strong></p>
<div class="sourceCode" id="cb154"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_camera&quot;</span><span class="fu">,</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;camera&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lat&quot;</span><span class="fu">:</span> <span class="fl">40.7580</span><span class="fu">,</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lon&quot;</span><span class="fu">:</span> <span class="fl">-73.9855</span><span class="fu">,</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;zoom&quot;</span><span class="fu">:</span> <span class="dv">15</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Add text overlays:</strong></p>
<div class="sourceCode" id="cb155"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;add_text&quot;</span><span class="fu">,</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;texts&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;text_id&quot;</span><span class="fu">:</span> <span class="st">&quot;label-1&quot;</span><span class="fu">,</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Headquarters&quot;</span><span class="fu">,</span></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;anchor_type&quot;</span><span class="fu">:</span> <span class="st">&quot;geo&quot;</span><span class="fu">,</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;geo&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;lat&quot;</span><span class="fu">:</span> <span class="fl">40.7128</span><span class="fu">,</span> <span class="dt">&quot;lon&quot;</span><span class="fu">:</span> <span class="fl">-74.0060</span> <span class="fu">},</span></span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;font_size_px&quot;</span><span class="fu">:</span> <span class="dv">16</span><span class="fu">,</span></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FFFFFF&quot;</span><span class="fu">,</span></span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;background_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#333333&quot;</span></span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Clear all pins:</strong></p>
<div class="sourceCode" id="cb156"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;clear_pins&quot;</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.11" id="canvas-visual-diagrams"><span
class="header-section-number">1.8.11</span> Canvas (Visual
Diagrams)</h3>
<p>Create custom visual diagrams with objects and connections.</p>
<p><strong>Create a canvas:</strong></p>
<div class="sourceCode" id="cb157"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_canvas&quot;</span><span class="fu">,</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;network-diagram&quot;</span><span class="fu">,</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Network Topology&quot;</span><span class="fu">,</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;doc&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;objects&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;router&quot;</span><span class="fu">,</span></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Main Router&quot;</span><span class="fu">,</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb157-14"><a href="#cb157-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">60</span></span>
<span id="cb157-15"><a href="#cb157-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb157-16"><a href="#cb157-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb157-17"><a href="#cb157-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;server&quot;</span><span class="fu">,</span></span>
<span id="cb157-18"><a href="#cb157-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></span>
<span id="cb157-19"><a href="#cb157-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Server&quot;</span><span class="fu">,</span></span>
<span id="cb157-20"><a href="#cb157-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb157-21"><a href="#cb157-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">250</span><span class="fu">,</span></span>
<span id="cb157-22"><a href="#cb157-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb157-23"><a href="#cb157-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">60</span></span>
<span id="cb157-24"><a href="#cb157-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb157-25"><a href="#cb157-25" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb157-26"><a href="#cb157-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;connections&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb157-27"><a href="#cb157-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb157-28"><a href="#cb157-28" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;connection_id&quot;</span><span class="fu">:</span> <span class="st">&quot;link-1&quot;</span><span class="fu">,</span></span>
<span id="cb157-29"><a href="#cb157-29" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;router&quot;</span> <span class="fu">},</span></span>
<span id="cb157-30"><a href="#cb157-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;server&quot;</span> <span class="fu">},</span></span>
<span id="cb157-31"><a href="#cb157-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb157-32"><a href="#cb157-32" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#00FF00&quot;</span><span class="fu">,</span></span>
<span id="cb157-33"><a href="#cb157-33" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;arrow&quot;</span><span class="fu">:</span> <span class="st">&quot;end&quot;</span></span>
<span id="cb157-34"><a href="#cb157-34" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb157-35"><a href="#cb157-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb157-36"><a href="#cb157-36" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb157-37"><a href="#cb157-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb157-38"><a href="#cb157-38" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;interaction&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb157-39"><a href="#cb157-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;touch_enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb157-40"><a href="#cb157-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;edit_mode&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb157-41"><a href="#cb157-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb157-42"><a href="#cb157-42" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Object types: <code>node</code>, <code>text</code>,
<code>shape</code>, <code>image</code>, <code>embed</code>,
<code>group</code></p>
<p>Shape types (for <code>type: shape</code>): <code>rect</code>,
<code>round_rect</code>, <code>circle</code>, <code>line</code></p>
<p><strong>Add objects:</strong> Topic:
<code>kingkiosk/{device_id}/element/network-diagram/cmd</code></p>
<div class="sourceCode" id="cb158"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;add_objects&quot;</span><span class="fu">,</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;objects&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;workstation-1&quot;</span><span class="fu">,</span></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Workstation&quot;</span><span class="fu">,</span></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">250</span><span class="fu">,</span></span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">80</span><span class="fu">,</span></span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">50</span></span>
<span id="cb158-12"><a href="#cb158-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb158-13"><a href="#cb158-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb158-14"><a href="#cb158-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Add connections:</strong></p>
<div class="sourceCode" id="cb159"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;add_connections&quot;</span><span class="fu">,</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;connections&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;connection_id&quot;</span><span class="fu">:</span> <span class="st">&quot;link-2&quot;</span><span class="fu">,</span></span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;router&quot;</span> <span class="fu">},</span></span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;workstation-1&quot;</span> <span class="fu">},</span></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;animated&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span></span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb159-11"><a href="#cb159-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Embed widgets in canvas:</strong></p>
<div class="sourceCode" id="cb160"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;gauge-embed&quot;</span><span class="fu">,</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;embed&quot;</span><span class="fu">,</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">350</span><span class="fu">,</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">120</span><span class="fu">,</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">120</span><span class="fu">,</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;embed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;widget_type&quot;</span><span class="fu">:</span> <span class="st">&quot;gauge&quot;</span><span class="fu">,</span></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;bandwidth-gauge&quot;</span><span class="fu">,</span></span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb160-13"><a href="#cb160-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb160-14"><a href="#cb160-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;Mbps&quot;</span></span>
<span id="cb160-15"><a href="#cb160-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb160-16"><a href="#cb160-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb160-17"><a href="#cb160-17" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.12" id="animated-text"><span
class="header-section-number">1.8.12</span> Animated Text</h3>
<p>Display text with stunning animations.</p>
<p><strong>Create animated text:</strong></p>
<div class="sourceCode" id="cb161"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_animated_text&quot;</span><span class="fu">,</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;welcome-text&quot;</span><span class="fu">,</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Welcome to King Kiosk!&quot;</span><span class="fu">,</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;preset&quot;</span><span class="fu">:</span> <span class="st">&quot;typewriterShimmer&quot;</span><span class="fu">,</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;fontSize&quot;</span><span class="fu">:</span> <span class="dv">48</span><span class="fu">,</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FFFFFF&quot;</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span></span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">200</span></span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Available presets: - <code>typewriterShimmer</code> - Characters
appear one by one with shimmer - <code>neonPulse</code> - Glowing neon
effect - <code>bounceCascade</code> - Characters bounce in -
<code>alertFlash</code> - Attention-grabbing flash -
<code>tickerMarquee</code> - Scrolling ticker tape</p>
<p><strong>Custom effects:</strong></p>
<div class="sourceCode" id="cb162"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_animated_text&quot;</span><span class="fu">,</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;custom-text&quot;</span><span class="fu">,</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Breaking News!&quot;</span><span class="fu">,</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;effects&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;fade&quot;</span><span class="fu">,</span></span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;durationMs&quot;</span><span class="fu">:</span> <span class="dv">500</span><span class="fu">,</span></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;stagger&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;eachMs&quot;</span><span class="fu">:</span> <span class="dv">50</span> <span class="fu">}</span></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;slide&quot;</span><span class="fu">,</span></span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">-50</span> <span class="fu">},</span></span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">0</span> <span class="fu">},</span></span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;durationMs&quot;</span><span class="fu">:</span> <span class="dv">800</span><span class="fu">,</span></span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;easing&quot;</span><span class="fu">:</span> <span class="st">&quot;easeOutBack&quot;</span></span>
<span id="cb162-17"><a href="#cb162-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb162-18"><a href="#cb162-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb162-19"><a href="#cb162-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timeline&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb162-20"><a href="#cb162-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;loop&quot;</span></span>
<span id="cb162-21"><a href="#cb162-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb162-22"><a href="#cb162-22" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Effect types: <code>fade</code>, <code>slide</code>,
<code>scale</code>, <code>colorize</code>, <code>marquee</code>,
<code>typewriter</code></p>
<p>Easing options: <code>linear</code>, <code>easeOutCubic</code>,
<code>easeInOutCubic</code>, <code>easeOutBack</code></p>
<p><strong>Update text content:</strong> Topic:
<code>kingkiosk/{device_id}/element/welcome-text/cmd</code></p>
<div class="sourceCode" id="cb163"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_text&quot;</span><span class="fu">,</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;New message here!&quot;</span></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Trigger animation replay:</strong></p>
<div class="sourceCode" id="cb164"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;trigger&quot;</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.13" id="mqtt-image"><span
class="header-section-number">1.8.13</span> MQTT Image</h3>
<p>Display images that update automatically from MQTT messages.</p>
<p><strong>Create an MQTT image tile:</strong></p>
<div class="sourceCode" id="cb165"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_image&quot;</span><span class="fu">,</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;open&quot;</span><span class="fu">,</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;camera-feed&quot;</span><span class="fu">,</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Security Camera&quot;</span><span class="fu">,</span></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/camera/living_room/image&quot;</span><span class="fu">,</span></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;is_base64&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">640</span><span class="fu">,</span></span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">480</span></span>
<span id="cb165-12"><a href="#cb165-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The image updates automatically whenever a new message arrives on the
subscribed topic.</p>
<p><strong>For JSON payloads:</strong></p>
<div class="sourceCode" id="cb166"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/camera/snapshot&quot;</span><span class="fu">,</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;json_field&quot;</span><span class="fu">:</span> <span class="st">&quot;data.image&quot;</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>This extracts the image from
<code>{ "data": { "image": "base64data..." } }</code>.</p>
<p><strong>Update subscription topic:</strong></p>
<div class="sourceCode" id="cb167"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_image&quot;</span><span class="fu">,</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;update_topic&quot;</span><span class="fu">,</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;camera-feed&quot;</span><span class="fu">,</span></span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/camera/backyard/image&quot;</span></span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.14" id="mqtt-button"><span
class="header-section-number">1.8.14</span> MQTT Button</h3>
<p>Create buttons that publish MQTT messages when pressed.</p>
<p><strong>Create an MQTT button:</strong></p>
<div class="sourceCode" id="cb168"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_button&quot;</span><span class="fu">,</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;configure&quot;</span><span class="fu">,</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;light-toggle&quot;</span><span class="fu">,</span></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Living Room Light&quot;</span><span class="fu">,</span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;toggle&quot;</span><span class="fu">,</span></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/lights/living_room/set&quot;</span><span class="fu">,</span></span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_payload&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;state&quot;</span><span class="fu">:</span> <span class="st">&quot;TOGGLE&quot;</span> <span class="fu">},</span></span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;subscription_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/lights/living_room/state&quot;</span><span class="fu">,</span></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icon_on&quot;</span><span class="fu">:</span> <span class="st">&quot;lightbulb&quot;</span><span class="fu">,</span></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icon_off&quot;</span><span class="fu">:</span> <span class="st">&quot;lightbulb_outline&quot;</span><span class="fu">,</span></span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color_on&quot;</span><span class="fu">:</span> <span class="st">&quot;#FFD700&quot;</span><span class="fu">,</span></span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color_off&quot;</span><span class="fu">:</span> <span class="st">&quot;#808080&quot;</span></span>
<span id="cb168-14"><a href="#cb168-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Modes: - <code>toggle</code> or <code>switch</code> - Two-state
button - <code>icon_button</code> or <code>button</code> - Momentary
button</p>
<p><strong>Trigger the button via MQTT:</strong></p>
<div class="sourceCode" id="cb169"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_button&quot;</span><span class="fu">,</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;trigger&quot;</span><span class="fu">,</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;light-toggle&quot;</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.15" id="calendar-with-bidirectional-sync"><span
class="header-section-number">1.8.15</span> Calendar (with Bidirectional
Sync)</h3>
<p>The King Kiosk calendar is more than just a display widget - it
features <strong>full bidirectional MQTT synchronization</strong>. This
means Home Assistant or any external system can add, update, and delete
calendar events, and King Kiosk will broadcast changes made locally so
external systems stay in sync.</p>
<p>The calendar sync is <strong>always-on</strong> - it works even when
no calendar widget is visible on screen, making it perfect for
automation scenarios.</p>
<p><strong>Create a calendar widget:</strong></p>
<div class="sourceCode" id="cb170"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar&quot;</span><span class="fu">,</span></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;create&quot;</span><span class="fu">,</span></span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;main-calendar&quot;</span><span class="fu">,</span></span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Family Calendar&quot;</span><span class="fu">,</span></span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">350</span></span>
<span id="cb170-10"><a href="#cb170-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Add an event (via system command):</strong></p>
<div class="sourceCode" id="cb171"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar&quot;</span><span class="fu">,</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;add_event&quot;</span><span class="fu">,</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;main-calendar&quot;</span><span class="fu">,</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;event&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Team Meeting&quot;</span><span class="fu">,</span></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-20T10:00:00&quot;</span><span class="fu">,</span></span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;end&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-20T11:00:00&quot;</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Navigate to a specific date:</strong></p>
<div class="sourceCode" id="cb172"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar&quot;</span><span class="fu">,</span></span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;go_to_date&quot;</span><span class="fu">,</span></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;main-calendar&quot;</span><span class="fu">,</span></span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;date&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-25&quot;</span></span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Clear all events:</strong></p>
<div class="sourceCode" id="cb173"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar&quot;</span><span class="fu">,</span></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;clear_events&quot;</span><span class="fu">,</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;main-calendar&quot;</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.8.15.1" id="bidirectional-mqtt-sync"><span
class="header-section-number">1.8.15.1</span> Bidirectional MQTT
Sync</h4>
<p>For advanced integration with Home Assistant or other systems, use
the element-level commands on the calendar’s dedicated MQTT topic.</p>
<p><strong>Topic:</strong>
<code>kingkiosk/{device_id}/element/calendar/cmd</code></p>
<p><strong>Create or Update an Event (Upsert):</strong></p>
<div class="sourceCode" id="cb174"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar_upsert&quot;</span><span class="fu">,</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;correlation_id&quot;</span><span class="fu">:</span> <span class="st">&quot;ha-req-123&quot;</span><span class="fu">,</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;event&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;uid&quot;</span><span class="fu">:</span> <span class="st">&quot;doctor-appt-001&quot;</span><span class="fu">,</span></span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Doctor Appointment&quot;</span><span class="fu">,</span></span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-15T00:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb174-8"><a href="#cb174-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;end&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-15T23:59:59Z&quot;</span><span class="fu">,</span></span>
<span id="cb174-9"><a href="#cb174-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;allDay&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb174-10"><a href="#cb174-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Bring insurance card&quot;</span><span class="fu">,</span></span>
<span id="cb174-11"><a href="#cb174-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#4CAF50&quot;</span></span>
<span id="cb174-12"><a href="#cb174-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb174-13"><a href="#cb174-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The <code>uid</code> (or <code>id</code>) uniquely identifies the
event. If an event with that ID exists, it’s updated. Otherwise, a new
event is created. Multiple events per day are fully supported.</p>
<p><strong>Delete an Event:</strong></p>
<div class="sourceCode" id="cb175"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar_delete&quot;</span><span class="fu">,</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;correlation_id&quot;</span><span class="fu">:</span> <span class="st">&quot;ha-req-124&quot;</span><span class="fu">,</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;uid&quot;</span><span class="fu">:</span> <span class="st">&quot;doctor-appt-001&quot;</span></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Bulk Replace All Events:</strong></p>
<p>Replace all calendar events at once - perfect for syncing from an
external calendar source:</p>
<div class="sourceCode" id="cb176"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar_bulk_replace&quot;</span><span class="fu">,</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;correlation_id&quot;</span><span class="fu">:</span> <span class="st">&quot;ha-req-125&quot;</span><span class="fu">,</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;events&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;uid&quot;</span><span class="fu">:</span> <span class="st">&quot;meeting-001&quot;</span><span class="fu">,</span></span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Team Standup&quot;</span><span class="fu">,</span></span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-15T09:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;allDay&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;uid&quot;</span><span class="fu">:</span> <span class="st">&quot;meeting-002&quot;</span><span class="fu">,</span></span>
<span id="cb176-13"><a href="#cb176-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Project Review&quot;</span><span class="fu">,</span></span>
<span id="cb176-14"><a href="#cb176-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-15T14:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb176-15"><a href="#cb176-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;allDay&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb176-16"><a href="#cb176-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb176-17"><a href="#cb176-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb176-18"><a href="#cb176-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;uid&quot;</span><span class="fu">:</span> <span class="st">&quot;holiday-001&quot;</span><span class="fu">,</span></span>
<span id="cb176-19"><a href="#cb176-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Company Holiday&quot;</span><span class="fu">,</span></span>
<span id="cb176-20"><a href="#cb176-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-20T00:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb176-21"><a href="#cb176-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;allDay&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb176-22"><a href="#cb176-22" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF5722&quot;</span></span>
<span id="cb176-23"><a href="#cb176-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb176-24"><a href="#cb176-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb176-25"><a href="#cb176-25" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Get Calendar Status:</strong></p>
<div class="sourceCode" id="cb177"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar_status&quot;</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.8.15.2" id="receiving-calendar-events"><span
class="header-section-number">1.8.15.2</span> Receiving Calendar
Events</h4>
<p>When events are added, updated, or deleted <strong>locally</strong>
on the King Kiosk device (via touch interaction), the changes are
broadcast so external systems can stay synchronized.</p>
<p><strong>Subscribe to:</strong>
<code>kingkiosk/{device_id}/element/calendar/event</code></p>
<p><strong>Event Added/Updated Locally:</strong></p>
<div class="sourceCode" id="cb178"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;event&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar_event_upserted&quot;</span><span class="fu">,</span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;origin&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk&quot;</span><span class="fu">,</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-15T10:30:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;event_data&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;uid&quot;</span><span class="fu">:</span> <span class="st">&quot;new-event-001&quot;</span><span class="fu">,</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Lunch with Client&quot;</span><span class="fu">,</span></span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-16T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;allDay&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Downtown restaurant&quot;</span></span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Event Deleted Locally:</strong></p>
<div class="sourceCode" id="cb179"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;event&quot;</span><span class="fu">:</span> <span class="st">&quot;calendar_event_deleted&quot;</span><span class="fu">,</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;origin&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk&quot;</span><span class="fu">,</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-01-15T10:35:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;uid&quot;</span><span class="fu">:</span> <span class="st">&quot;new-event-001&quot;</span></span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Command Acknowledgements:</strong></p>
<p>When your system sends a command, King Kiosk acknowledges successful
processing: - <code>calendar_upsert_applied</code> - Event was
created/updated - <code>calendar_delete_applied</code> - Event was
deleted - <code>calendar_bulk_applied</code> - Bulk replace
completed</p>
<h4 data-number="1.8.15.3" id="smart-loop-prevention"><span
class="header-section-number">1.8.15.3</span> Smart Loop Prevention</h4>
<p>The calendar sync includes intelligent loop prevention. When King
Kiosk applies a change received via MQTT, it suppresses broadcasting
that same change back out. The <code>correlation_id</code> field helps
track and deduplicate commands, so you can safely have bidirectional
sync without echo loops.</p>
<h3 data-number="1.8.16" id="timers-and-stopwatch"><span
class="header-section-number">1.8.16</span> Timers and Stopwatch</h3>
<p><strong>Create a stopwatch:</strong></p>
<div class="sourceCode" id="cb180"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stopwatch&quot;</span><span class="fu">,</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;main-stopwatch&quot;</span><span class="fu">,</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Workout Timer&quot;</span><span class="fu">,</span></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">250</span><span class="fu">,</span></span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">150</span></span>
<span id="cb180-9"><a href="#cb180-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Create a countdown timer:</strong></p>
<div class="sourceCode" id="cb181"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;timer_widget&quot;</span><span class="fu">,</span></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;countdown-1&quot;</span><span class="fu">,</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Cooking Timer&quot;</span><span class="fu">,</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;duration&quot;</span><span class="fu">:</span> <span class="dv">600</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Control timers:</strong></p>
<div class="sourceCode" id="cb182"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;timer_control&quot;</span><span class="fu">,</span></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timer_id&quot;</span><span class="fu">:</span> <span class="st">&quot;countdown-1&quot;</span><span class="fu">,</span></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;start&quot;</span></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Actions: <code>start</code>, <code>stop</code>, <code>pause</code>,
<code>reset</code></p>
<h3 data-number="1.8.17" id="alarmo-security-system"><span
class="header-section-number">1.8.17</span> Alarmo (Security
System)</h3>
<p>Integrate with the <a
href="https://github.com/nielsfaber/alarmo">Alarmo</a> Home Assistant
add-on. Full MQTT parity: per-mode PIN requirements, force arm (bypass
open sensors), and skip exit delay.</p>
<p><strong>Create an Alarmo panel:</strong></p>
<div class="sourceCode" id="cb183"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;alarmo&quot;</span><span class="fu">,</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;alarm-panel&quot;</span><span class="fu">,</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Home Security&quot;</span><span class="fu">,</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_base_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;alarmo&quot;</span><span class="fu">,</span></span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;entity&quot;</span><span class="fu">:</span> <span class="st">&quot;alarm_control_panel.alarmo&quot;</span><span class="fu">,</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;require_code_to_arm&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;require_code_to_disarm&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;code_length&quot;</span><span class="fu">:</span> <span class="dv">4</span><span class="fu">,</span></span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;available_modes&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;armed_away&quot;</span><span class="ot">,</span> <span class="st">&quot;armed_home&quot;</span><span class="ot">,</span> <span class="st">&quot;armed_night&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">350</span><span class="fu">,</span></span>
<span id="cb183-14"><a href="#cb183-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">500</span></span>
<span id="cb183-15"><a href="#cb183-15" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Per-mode PIN configuration</strong> — require a code for Away
but not Home:</p>
<div class="sourceCode" id="cb184"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;alarmo&quot;</span><span class="fu">,</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;alarm-panel&quot;</span><span class="fu">,</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;require_code_to_arm&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;require_code_to_disarm&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;code_required_modes&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;away&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> <span class="dt">&quot;home&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span> <span class="dt">&quot;night&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span></span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Force arm &amp; skip delay</strong> — the panel shows toggle
chips for these options. You can also set defaults:</p>
<div class="sourceCode" id="cb185"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;alarmo&quot;</span><span class="fu">,</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;alarm-panel&quot;</span><span class="fu">,</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;force&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;skip_delay&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Key parameters: <code>require_code</code> (legacy, sets both
arm/disarm), <code>require_code_to_arm</code>,
<code>require_code_to_disarm</code>, <code>code_required_modes</code>,
<code>force</code>, <code>skip_delay</code>,
<code>mqtt_base_topic</code>, <code>area</code>,
<code>available_modes</code>, <code>code_length</code>.</p>
<h3 data-number="1.8.18" id="dlna-player"><span
class="header-section-number">1.8.18</span> DLNA Player</h3>
<p>Display and control DLNA/UPnP media.</p>
<p><strong>Create a DLNA player:</strong></p>
<div class="sourceCode" id="cb186"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;dlna_player&quot;</span><span class="fu">,</span></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;dlna-1&quot;</span><span class="fu">,</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;DLNA Player&quot;</span><span class="fu">,</span></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">640</span><span class="fu">,</span></span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">480</span></span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The DLNA player shows content pushed from DLNA controllers on your
network (phones, computers, media servers).</p>
<h3 data-number="1.8.19" id="pdf-viewer"><span
class="header-section-number">1.8.19</span> PDF Viewer</h3>
<p>Display PDF documents.</p>
<p><strong>Open a PDF:</strong></p>
<div class="sourceCode" id="cb187"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_pdf&quot;</span><span class="fu">,</span></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/document.pdf&quot;</span><span class="fu">,</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;User Manual&quot;</span><span class="fu">,</span></span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;manual-pdf&quot;</span><span class="fu">,</span></span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span></span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">800</span></span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.8.20" id="games"><span
class="header-section-number">1.8.20</span> Games</h3>
<p>Because even kiosks need a break sometimes.</p>
<p><strong>Launch Missile Command:</strong></p>
<div class="sourceCode" id="cb188"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stop_the_missiles&quot;</span><span class="fu">,</span></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Missile Command&quot;</span><span class="fu">,</span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;game-1&quot;</span><span class="fu">,</span></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span></span>
<span id="cb188-8"><a href="#cb188-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">400</span></span>
<span id="cb188-9"><a href="#cb188-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Control game:</strong></p>
<div class="sourceCode" id="cb189"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;game_control&quot;</span><span class="fu">,</span></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;game-1&quot;</span><span class="fu">,</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;start&quot;</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Actions: <code>start</code>, <code>restart</code>, <code>stop</code>,
<code>pause</code>, <code>resume</code>, <code>toggle_sound</code>,
<code>set_transparent</code>, <code>set_background_mode</code>,
<code>set_background_opacity</code></p>
<h3 data-number="1.8.21" id="led-light-panel"><span
class="header-section-number">1.8.21</span> LED Light Panel</h3>
<p>Turn any King Kiosk screen into a virtual LED light wall. The LED
Light Panel widget renders a grid of illuminated shapes — squares,
triangles, or hexagons — that you can program with color animations,
scrolling text, or pixel-level control. Shapes tessellate naturally
(hexagons form a honeycomb, triangles interlock) and you can toggle
between a clean flat look and a 3D wall-mounted effect with shadows and
glow.</p>
<p>Three shapes are available: - <strong>Squares</strong> — clean
pixel-grid aesthetic, great for text and pixel art -
<strong>Triangles</strong> — tessellated up/down pattern, striking
geometric look - <strong>Hexagons</strong> — honeycomb layout, the
classic modular light panel look</p>
<p>Two rendering modes: - <strong>Flat</strong> — simple filled shapes
with subtle borders (best performance) - <strong>3D Wall</strong> — drop
shadows, face gradients, and colored glow on bright cells</p>
<p><strong>Example 1: Ambient Mood Lighting</strong></p>
<p>Create a honeycomb panel with a slowly rotating rainbow — perfect as
a living room accent wall behind a TV.</p>
<div class="sourceCode" id="cb190"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_led_panel&quot;</span><span class="fu">,</span></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;mood-wall&quot;</span><span class="fu">,</span></span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Mood Lighting&quot;</span><span class="fu">,</span></span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;shape&quot;</span><span class="fu">:</span> <span class="st">&quot;hexagon&quot;</span><span class="fu">,</span></span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;rows&quot;</span><span class="fu">:</span> <span class="dv">6</span><span class="fu">,</span></span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;cols&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gap&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;render_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;wall3d&quot;</span><span class="fu">,</span></span>
<span id="cb190-10"><a href="#cb190-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;preset&quot;</span><span class="fu">:</span> <span class="st">&quot;rainbow_wave&quot;</span><span class="fu">,</span></span>
<span id="cb190-11"><a href="#cb190-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;preset_speed&quot;</span><span class="fu">:</span> <span class="fl">0.3</span><span class="fu">,</span></span>
<span id="cb190-12"><a href="#cb190-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">800</span><span class="fu">,</span></span>
<span id="cb190-13"><a href="#cb190-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">400</span></span>
<span id="cb190-14"><a href="#cb190-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Change the mood on the fly:</p>
<div class="sourceCode" id="cb191"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;preset&quot;</span><span class="fu">,</span></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;mood-wall&quot;</span><span class="fu">,</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;breathing&quot;</span><span class="fu">,</span></span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF6600&quot;</span><span class="fu">,</span></span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;speed&quot;</span><span class="fu">:</span> <span class="fl">0.5</span></span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Built-in presets: <code>rainbow_wave</code>, <code>breathing</code>,
<code>color_chase</code>, <code>sparkle</code>, <code>fire</code>,
<code>matrix</code>, <code>gradient_rotate</code>, <code>solid</code>,
<code>random</code>, <code>wave</code></p>
<p><strong>Example 2: Status Board / Scrolling Marquee</strong></p>
<p>Use a square grid as a pixel-art message board in a retail store,
office lobby, or conference room.</p>
<div class="sourceCode" id="cb192"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_led_panel&quot;</span><span class="fu">,</span></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-sign&quot;</span><span class="fu">,</span></span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Lobby Display&quot;</span><span class="fu">,</span></span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;shape&quot;</span><span class="fu">:</span> <span class="st">&quot;square&quot;</span><span class="fu">,</span></span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;rows&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;cols&quot;</span><span class="fu">:</span> <span class="dv">40</span><span class="fu">,</span></span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gap&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;render_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;flat&quot;</span><span class="fu">,</span></span>
<span id="cb192-10"><a href="#cb192-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">1200</span><span class="fu">,</span></span>
<span id="cb192-11"><a href="#cb192-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">200</span></span>
<span id="cb192-12"><a href="#cb192-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Display scrolling text:</p>
<div class="sourceCode" id="cb193"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_text&quot;</span><span class="fu">,</span></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-sign&quot;</span><span class="fu">,</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;WELCOME TO ACME CORP&quot;</span><span class="fu">,</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#00FF00&quot;</span><span class="fu">,</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;bg&quot;</span><span class="fu">:</span> <span class="st">&quot;#001100&quot;</span><span class="fu">,</span></span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;scroll&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;speed&quot;</span><span class="fu">:</span> <span class="dv">40</span><span class="fu">,</span></span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;direction&quot;</span><span class="fu">:</span> <span class="st">&quot;left&quot;</span></span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The panel includes a built-in 5x7 pixel bitmap font (A-Z, 0-9, common
punctuation). You can even define custom glyphs for logos or special
characters.</p>
<p><strong>Example 3: Custom Animation with the Scripting
Engine</strong></p>
<p>The scripting engine lets you write mathematical expressions that
compute each cell’s color every frame. This creates a pulsing concentric
ring effect on a triangle grid:</p>
<div class="sourceCode" id="cb194"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_led_panel&quot;</span><span class="fu">,</span></span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;art-panel&quot;</span><span class="fu">,</span></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Generative Art&quot;</span><span class="fu">,</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;shape&quot;</span><span class="fu">:</span> <span class="st">&quot;triangle&quot;</span><span class="fu">,</span></span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;rows&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;cols&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;render_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;wall3d&quot;</span></span>
<span id="cb194-9"><a href="#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Then run a script:</p>
<div class="sourceCode" id="cb195"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;run_script&quot;</span><span class="fu">,</span></span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;art-panel&quot;</span><span class="fu">,</span></span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;script&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;fps&quot;</span><span class="fu">:</span> <span class="dv">30</span><span class="fu">,</span></span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;loop&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;variables&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb195-8"><a href="#cb195-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ring_speed&quot;</span><span class="fu">:</span> <span class="fl">3.0</span><span class="fu">,</span></span>
<span id="cb195-9"><a href="#cb195-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;color_speed&quot;</span><span class="fu">:</span> <span class="fl">30.0</span></span>
<span id="cb195-10"><a href="#cb195-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb195-11"><a href="#cb195-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;per_cell&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb195-12"><a href="#cb195-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;h&quot;</span><span class="fu">:</span> <span class="st">&quot;(cell_dist_center * 360 + t * color_speed) % 360&quot;</span><span class="fu">,</span></span>
<span id="cb195-13"><a href="#cb195-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;s&quot;</span><span class="fu">:</span> <span class="st">&quot;0.9&quot;</span><span class="fu">,</span></span>
<span id="cb195-14"><a href="#cb195-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;l&quot;</span><span class="fu">:</span> <span class="st">&quot;0.3 + 0.2 * sin(cell_dist_center * 6.28 - t * ring_speed)&quot;</span></span>
<span id="cb195-15"><a href="#cb195-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb195-16"><a href="#cb195-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb195-17"><a href="#cb195-17" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Script expressions have access to per-cell variables
(<code>cell_x</code>, <code>cell_y</code>,
<code>cell_dist_center</code>, <code>cell_angle</code>), time
(<code>t</code>, <code>frame</code>), math functions (<code>sin</code>,
<code>cos</code>, <code>noise</code>, <code>smoothstep</code>, and
more), and user-defined variables. HSL output means you work with hue
(0-360), saturation (0-1), and lightness (0-1) directly.</p>
<p><strong>Per-cell MQTT control:</strong></p>
<p>For direct integration with sensors or external systems, you can set
individual cells or the entire buffer:</p>
<div class="sourceCode" id="cb196"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_cells&quot;</span><span class="fu">,</span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;mood-wall&quot;</span><span class="fu">,</span></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;cells&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;0&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF0000&quot;</span><span class="fu">,</span></span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;1&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF4400&quot;</span><span class="fu">,</span></span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;2&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF8800&quot;</span><span class="fu">,</span></span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;3&quot;</span><span class="fu">:</span> <span class="st">&quot;#FFCC00&quot;</span><span class="fu">,</span></span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;4&quot;</span><span class="fu">:</span> <span class="st">&quot;#FFFF00&quot;</span></span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb196-11"><a href="#cb196-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Or fill with a gradient:</p>
<div class="sourceCode" id="cb197"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;fill_gradient&quot;</span><span class="fu">,</span></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;mood-wall&quot;</span><span class="fu">,</span></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;#0000FF&quot;</span><span class="fu">,</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;end&quot;</span><span class="fu">:</span> <span class="st">&quot;#FF0000&quot;</span><span class="fu">,</span></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;direction&quot;</span><span class="fu">:</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Reconfigure on the fly:</strong></p>
<div class="sourceCode" id="cb198"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;configure&quot;</span><span class="fu">,</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;mood-wall&quot;</span><span class="fu">,</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;shape&quot;</span><span class="fu">:</span> <span class="st">&quot;triangle&quot;</span><span class="fu">,</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;render_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;flat&quot;</span><span class="fu">,</span></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;rows&quot;</span><span class="fu">:</span> <span class="dv">12</span><span class="fu">,</span></span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;cols&quot;</span><span class="fu">:</span> <span class="dv">8</span></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Tip: For the best visual impact, use
<code>render_mode: "wall3d"</code> with hexagons and a gap of 2-4
pixels. The 3D mode adds realistic shadows and a soft glow effect around
bright cells.</p>
<p>Tip: The scripting engine’s <code>noise()</code> function generates
smooth, organic-looking patterns. Try
<code>"l": "0.3 + 0.2 * noise(cell_x * 0.3, cell_y * 0.3 + t)"</code>
for a lava-lamp effect.</p>
<p>For full parameter details, see the <a
href="MQTT_WIDGET_REFERENCE.md">MQTT Widget Reference</a>.</p>
<hr />
<h2 data-number="1.9" id="building-your-own-widgets"><span
class="header-section-number">1.9</span> 8. Building Your Own
Widgets</h2>
<p>One of King Kiosk’s most powerful features is the ability to create
your own custom widgets using standard web technologies (HTML, CSS, and
JavaScript). If you can build a web page, you can build a King Kiosk
widget.</p>
<h3 data-number="1.9.1" id="why-build-custom-widgets"><span
class="header-section-number">1.9.1</span> Why Build Custom
Widgets?</h3>
<p>The built-in widgets cover most common use cases, but sometimes you
need something unique:</p>
<ul>
<li><strong>Branded Displays</strong> - Create widgets that match your
company’s visual identity</li>
<li><strong>Custom Data Visualization</strong> - Display data from your
specific systems in exactly the format you need</li>
<li><strong>Interactive Kiosks</strong> - Build check-in systems,
surveys, or product configurators</li>
<li><strong>Specialized Integrations</strong> - Connect to APIs and
services that King Kiosk doesn’t support natively</li>
<li><strong>Internal Tools</strong> - Create dashboards for your
specific workflows</li>
</ul>
<p>Custom widgets run inside a browser surface and communicate with King
Kiosk through a bridge connection. The Remote Browser custom-widget path
supports full command/telemetry/storage bridging (including persisted
storage across restarts).</p>
<h3 data-number="1.9.2" id="quick-start"><span
class="header-section-number">1.9.2</span> Quick Start</h3>
<p>Creating a custom widget is as simple as creating an HTML file:</p>
<div class="sourceCode" id="cb199"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>My Widget<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>    body {</span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">margin</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a>      <span class="kw">padding</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a>      <span class="kw">background</span><span class="ch">:</span> <span class="cn">#1a1a2e</span><span class="op">;</span></span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">color</span><span class="ch">:</span> <span class="cn">white</span><span class="op">;</span></span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">sans-serif</span><span class="op">;</span></span>
<span id="cb199-13"><a href="#cb199-13" aria-hidden="true" tabindex="-1"></a>      <span class="kw">display</span><span class="ch">:</span> <span class="dv">flex</span><span class="op">;</span></span>
<span id="cb199-14"><a href="#cb199-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">align-items</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb199-15"><a href="#cb199-15" aria-hidden="true" tabindex="-1"></a>      <span class="kw">justify-content</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb199-16"><a href="#cb199-16" aria-hidden="true" tabindex="-1"></a>      <span class="kw">min-height</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb199-17"><a href="#cb199-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb199-18"><a href="#cb199-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.value</span> { <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">72</span><span class="dt">px</span><span class="op">;</span> <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">bold</span><span class="op">;</span> }</span>
<span id="cb199-19"><a href="#cb199-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb199-20"><a href="#cb199-20" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb199-21"><a href="#cb199-21" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb199-22"><a href="#cb199-22" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;value&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;display&quot;</span><span class="dt">&gt;</span>--<span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb199-23"><a href="#cb199-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-24"><a href="#cb199-24" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb199-25"><a href="#cb199-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Wait for the KingKiosk bridge to be ready</span></span>
<span id="cb199-26"><a href="#cb199-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;kingkiosk-ready&#39;</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb199-27"><a href="#cb199-27" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;KingKiosk bridge ready!&#39;</span>)<span class="op">;</span></span>
<span id="cb199-28"><a href="#cb199-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-29"><a href="#cb199-29" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Listen for commands</span></span>
<span id="cb199-30"><a href="#cb199-30" aria-hidden="true" tabindex="-1"></a>      <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">onCommand</span>(<span class="kw">function</span>(command<span class="op">,</span> payload) {</span>
<span id="cb199-31"><a href="#cb199-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (command <span class="op">===</span> <span class="st">&#39;set_value&#39;</span>) {</span>
<span id="cb199-32"><a href="#cb199-32" aria-hidden="true" tabindex="-1"></a>          <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;display&#39;</span>)<span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> payload<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb199-33"><a href="#cb199-33" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb199-34"><a href="#cb199-34" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb199-35"><a href="#cb199-35" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb199-36"><a href="#cb199-36" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb199-37"><a href="#cb199-37" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb199-38"><a href="#cb199-38" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<h3 data-number="1.9.3" id="adding-your-widget"><span
class="header-section-number">1.9.3</span> Adding Your Widget</h3>
<p>For full custom-widget bridge support, use one of these runtime
paths:</p>
<p><strong>Option 1: Remote Browser custom widget bridge (recommended,
required on tvOS)</strong></p>
<p>Host your widget files, then create a remote browser window:</p>
<div class="sourceCode" id="cb200"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_remote_browser&quot;</span><span class="fu">,</span></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;my-custom-widget&quot;</span><span class="fu">,</span></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;initial_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://your-server.com/widgets/my-widget/&quot;</span><span class="fu">,</span></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_connect&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Option 2: Local <code>customWebView</code> tile
(advanced)</strong></p>
<p>If you already have a local <code>customWebView</code> tile,
configure it via the window command topic:</p>
<p>Topic:
<code>kingkiosk/{device_id}/window/{window_id}/command</code></p>
<div class="sourceCode" id="cb201"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;configure&quot;</span><span class="fu">,</span></span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://your-server.com/widgets/my-widget/&quot;</span><span class="fu">,</span></span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;My Custom Widget&quot;</span><span class="fu">,</span></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;storage&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;theme&quot;</span><span class="fu">:</span> <span class="st">&quot;dark&quot;</span></span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>If you do not need the web bridge API, you can also use native MQTT
widgets:</p>
<p><strong>Native widget examples:</strong></p>
<div class="sourceCode" id="cb202"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temperature&quot;</span><span class="fu">,</span></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;radial&quot;</span><span class="fu">,</span></span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;°F&quot;</span></span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb203"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_chart&quot;</span><span class="fu">,</span></span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;metrics&quot;</span><span class="fu">,</span></span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_type&quot;</span><span class="fu">:</span> <span class="st">&quot;line&quot;</span><span class="fu">,</span></span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max_points&quot;</span><span class="fu">:</span> <span class="dv">50</span></span>
<span id="cb203-6"><a href="#cb203-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb204"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_button&quot;</span><span class="fu">,</span></span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;configure&quot;</span><span class="fu">,</span></span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;light-switch&quot;</span><span class="fu">,</span></span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Living Room Light&quot;</span><span class="fu">,</span></span>
<span id="cb204-6"><a href="#cb204-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;toggle&quot;</span><span class="fu">,</span></span>
<span id="cb204-7"><a href="#cb204-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/lights/living/set&quot;</span><span class="fu">,</span></span>
<span id="cb204-8"><a href="#cb204-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;subscription_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/lights/living/state&quot;</span></span>
<span id="cb204-9"><a href="#cb204-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Native carousel example:</strong></p>
<div class="sourceCode" id="cb205"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_carousel&quot;</span><span class="fu">,</span></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;lobby-display&quot;</span><span class="fu">,</span></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;items&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/slide1.jpg&quot;</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/slide2.jpg&quot;</span><span class="fu">}</span></span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;auto_play&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;interval&quot;</span><span class="fu">:</span> <span class="dv">10</span></span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb205-12"><a href="#cb205-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.9.4" id="connecting-your-widget-to-king-kiosk"><span
class="header-section-number">1.9.4</span> Connecting Your Widget to
King Kiosk</h3>
<p>King Kiosk provides a special <code>window.KingKiosk</code> object in
your widget’s web page that lets your code communicate with the app.
Always wait for this connection to be ready before using it:</p>
<div class="sourceCode" id="cb206"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;kingkiosk-ready&#39;</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Bridge is now available - start using the API</span></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;KingKiosk API ready!&#39;</span>)<span class="op">;</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p><strong>Available Methods:</strong></p>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>KingKiosk.onCommand(callback)</code></td>
<td>Receive commands from MQTT or King Kiosk</td>
</tr>
<tr>
<td><code>KingKiosk.sendCommand(cmd, payload)</code></td>
<td>Send a command (published to MQTT)</td>
</tr>
<tr>
<td><code>KingKiosk.publishTelemetry(data)</code></td>
<td>Send sensor readings or status data to other systems</td>
</tr>
<tr>
<td><code>KingKiosk.storage.get(key)</code></td>
<td>Retrieve a stored value</td>
</tr>
<tr>
<td><code>KingKiosk.storage.set(key, value)</code></td>
<td>Store a value persistently</td>
</tr>
<tr>
<td><code>KingKiosk.storage.getAll()</code></td>
<td>Get all stored values</td>
</tr>
<tr>
<td><code>KingKiosk.getWidgetInfo()</code></td>
<td>Get widget ID and platform info</td>
</tr>
</tbody>
</table>
<h3 data-number="1.9.5" id="receiving-commands"><span
class="header-section-number">1.9.5</span> Receiving Commands</h3>
<p>Register a callback to receive commands sent from MQTT or King
Kiosk:</p>
<div class="sourceCode" id="cb207"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">onCommand</span>(<span class="kw">function</span>(command<span class="op">,</span> payload) {</span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Received:&#39;</span><span class="op">,</span> command<span class="op">,</span> payload)<span class="op">;</span></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span> (command) {</span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&#39;set_value&#39;</span><span class="op">:</span></span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateDisplay</span>(payload<span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&#39;set_color&#39;</span><span class="op">:</span></span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">backgroundColor</span> <span class="op">=</span> payload<span class="op">.</span><span class="at">color</span><span class="op">;</span></span>
<span id="cb207-10"><a href="#cb207-10" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb207-11"><a href="#cb207-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&#39;refresh&#39;</span><span class="op">:</span></span>
<span id="cb207-12"><a href="#cb207-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fetchLatestData</span>()<span class="op">;</span></span>
<span id="cb207-13"><a href="#cb207-13" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb207-14"><a href="#cb207-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb207-15"><a href="#cb207-15" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p><strong>Send commands to your widget via MQTT:</strong></p>
<p>Remote Browser bridge topic:
<code>kingkiosk/{device_id}/element/{window_id}/cmd</code></p>
<div class="sourceCode" id="cb208"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;widget_command&quot;</span><span class="fu">,</span></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;widget_command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_value&quot;</span><span class="fu">,</span></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;payload&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">42</span> <span class="fu">}</span></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Local <code>customWebView</code> topic:
<code>kingkiosk/{device_id}/window/{window_id}/command</code></p>
<div class="sourceCode" id="cb209"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;set_value&quot;</span><span class="fu">,</span></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">42</span></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.9.6" id="sending-data-back-from-your-widget"><span
class="header-section-number">1.9.6</span> Sending Data Back From Your
Widget</h3>
<p>Your widget can send commands back to King Kiosk or share data (like
sensor readings or user actions) with other systems like Home
Assistant.</p>
<p><strong>Send a Command:</strong></p>
<div class="sourceCode" id="cb210"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Notify that a button was pressed</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">sendCommand</span>(<span class="st">&#39;button_pressed&#39;</span><span class="op">,</span> { <span class="dt">buttonId</span><span class="op">:</span> <span class="st">&#39;start&#39;</span> })<span class="op">;</span></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Send form data</span></span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">sendCommand</span>(<span class="st">&#39;form_submitted&#39;</span><span class="op">,</span> {</span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;John Doe&#39;</span><span class="op">,</span></span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;john@example.com&#39;</span></span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Commands are published to:
<code>kingkiosk/{device_id}/widget/{widget_id}/event</code></p>
<p><strong>Share Sensor Data or Status Updates:</strong></p>
<div class="sourceCode" id="cb211"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Share sensor readings with Home Assistant or other systems</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">publishTelemetry</span>({ <span class="dt">temperature</span><span class="op">:</span> <span class="fl">72.5</span> })<span class="op">;</span></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Publish multiple metrics</span></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">publishTelemetry</span>({</span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">cpu_usage</span><span class="op">:</span> <span class="fl">45.2</span><span class="op">,</span></span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">memory_used</span><span class="op">:</span> <span class="dv">8192</span><span class="op">,</span></span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">uptime_seconds</span><span class="op">:</span> <span class="dv">86400</span></span>
<span id="cb211-9"><a href="#cb211-9" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb211-10"><a href="#cb211-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-11"><a href="#cb211-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Periodic heartbeat</span></span>
<span id="cb211-12"><a href="#cb211-12" aria-hidden="true" tabindex="-1"></a><span class="pp">setInterval</span>(<span class="kw">function</span>() {</span>
<span id="cb211-13"><a href="#cb211-13" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">publishTelemetry</span>({</span>
<span id="cb211-14"><a href="#cb211-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">heartbeat</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb211-15"><a href="#cb211-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">timestamp</span><span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()</span>
<span id="cb211-16"><a href="#cb211-16" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb211-17"><a href="#cb211-17" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> <span class="dv">30000</span>)<span class="op">;</span></span></code></pre></div>
<p>Telemetry is published to:
<code>kingkiosk/{device_id}/widget/{widget_id}/telemetry</code></p>
<h3 data-number="1.9.7" id="persistent-storage"><span
class="header-section-number">1.9.7</span> Persistent Storage</h3>
<p>Store data that persists across widget reloads:</p>
<div class="sourceCode" id="cb212"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Store values</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;theme&#39;</span><span class="op">,</span> <span class="st">&#39;dark&#39;</span>)<span class="op">;</span></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;lastUpdate&#39;</span><span class="op">,</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())<span class="op">;</span></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;settings&#39;</span><span class="op">,</span> { <span class="dt">volume</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span> <span class="dt">muted</span><span class="op">:</span> <span class="kw">false</span> })<span class="op">;</span></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Retrieve values (async)</span></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> theme <span class="op">=</span> <span class="cf">await</span> <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;theme&#39;</span>)<span class="op">;</span></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Current theme:&#39;</span><span class="op">,</span> theme)<span class="op">;</span> <span class="co">// &#39;dark&#39;</span></span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-10"><a href="#cb212-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Get all stored values</span></span>
<span id="cb212-11"><a href="#cb212-11" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> allData <span class="op">=</span> <span class="cf">await</span> <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">getAll</span>()<span class="op">;</span></span></code></pre></div>
<p>Storage behavior by runtime: - Remote Browser bridge: persisted
across restarts. - Local <code>customWebView</code>: runtime-scoped to
the active tile/controller.</p>
<h3 data-number="1.9.8" id="platform-considerations"><span
class="header-section-number">1.9.8</span> Platform Considerations</h3>
<p>Custom widgets work across King Kiosk platforms, with path-specific
behavior:</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 36%" />
<col style="width: 36%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Platform</th>
<th>Local <code>customWebView</code></th>
<th>Remote Browser bridge</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>macOS</td>
<td>Yes</td>
<td>Yes</td>
<td>Either path works</td>
</tr>
<tr>
<td>iOS</td>
<td>Yes</td>
<td>Yes</td>
<td>Either path works</td>
</tr>
<tr>
<td>Android</td>
<td>Yes</td>
<td>Yes</td>
<td>Either path works</td>
</tr>
<tr>
<td>Windows</td>
<td>Yes</td>
<td>Yes</td>
<td>Either path works</td>
</tr>
<tr>
<td>Linux</td>
<td>Yes</td>
<td>Yes</td>
<td>Either path works</td>
</tr>
<tr>
<td>Web</td>
<td>Yes</td>
<td>Depends on deployment</td>
<td>Verify WebRTC/bridge support in your runtime</td>
</tr>
<tr>
<td>tvOS</td>
<td>No</td>
<td>Yes</td>
<td>Remote Browser path only</td>
</tr>
</tbody>
</table>
<p><strong>tvOS (Apple TV) Special Notes:</strong></p>
<p>Apple TV uses the Remote Browser path (no local
<code>customWebView</code> runtime). For tvOS widgets: - Use
<code>create_remote_browser</code> with <code>initial_url</code> -
<code>server_url</code> is optional (override); default server settings
are used when omitted - The full bridge API is available:
<code>onCommand</code>, <code>sendCommand</code>,
<code>publishTelemetry</code>, <code>storage.*</code> - Prefer hosted
URLs for larger widgets; inline/data-URL approaches can hit URL-length
limits</p>
<p><strong>Responsive Design Tips:</strong></p>
<div class="sourceCode" id="cb213"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> info <span class="op">=</span> <span class="cf">await</span> <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">getWidgetInfo</span>()<span class="op">;</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (info<span class="op">.</span><span class="at">platform</span> <span class="op">===</span> <span class="st">&#39;ios&#39;</span> <span class="op">||</span> info<span class="op">.</span><span class="at">platform</span> <span class="op">===</span> <span class="st">&#39;android&#39;</span>) {</span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Touch-optimized interface</span></span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">&#39;touch-mode&#39;</span>)<span class="op">;</span></span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Desktop-like layout</span></span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">&#39;desktop-mode&#39;</span>)<span class="op">;</span></span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 data-number="1.9.9" id="complete-example-smart-thermostat"><span
class="header-section-number">1.9.9</span> Complete Example: Smart
Thermostat</h3>
<p>Here’s a fully-featured custom widget demonstrating all API
features:</p>
<div class="sourceCode" id="cb214"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Smart Thermostat<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb214-6"><a href="#cb214-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb214-7"><a href="#cb214-7" aria-hidden="true" tabindex="-1"></a>    body {</span>
<span id="cb214-8"><a href="#cb214-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">-apple-system</span><span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></span>
<span id="cb214-9"><a href="#cb214-9" aria-hidden="true" tabindex="-1"></a>      <span class="kw">background</span><span class="ch">:</span> <span class="fu">linear-gradient(</span><span class="dv">135</span><span class="dt">deg</span><span class="op">,</span> <span class="cn">#1a1a2e</span><span class="op">,</span> <span class="cn">#16213e</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb214-10"><a href="#cb214-10" aria-hidden="true" tabindex="-1"></a>      <span class="kw">color</span><span class="ch">:</span> <span class="cn">white</span><span class="op">;</span></span>
<span id="cb214-11"><a href="#cb214-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">min-height</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb214-12"><a href="#cb214-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">display</span><span class="ch">:</span> <span class="dv">flex</span><span class="op">;</span></span>
<span id="cb214-13"><a href="#cb214-13" aria-hidden="true" tabindex="-1"></a>      <span class="kw">flex-direction</span><span class="ch">:</span> <span class="dv">column</span><span class="op">;</span></span>
<span id="cb214-14"><a href="#cb214-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">align-items</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb214-15"><a href="#cb214-15" aria-hidden="true" tabindex="-1"></a>      <span class="kw">justify-content</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb214-16"><a href="#cb214-16" aria-hidden="true" tabindex="-1"></a>      <span class="kw">margin</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-17"><a href="#cb214-17" aria-hidden="true" tabindex="-1"></a>      <span class="kw">padding</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb214-18"><a href="#cb214-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb214-19"><a href="#cb214-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.temperature</span> { <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">96</span><span class="dt">px</span><span class="op">;</span> <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">200</span><span class="op">;</span> }</span>
<span id="cb214-20"><a href="#cb214-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.unit</span> { <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">36</span><span class="dt">px</span><span class="op">;</span> <span class="kw">vertical-align</span><span class="ch">:</span> <span class="dv">top</span><span class="op">;</span> }</span>
<span id="cb214-21"><a href="#cb214-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.label</span> { <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">14</span><span class="dt">px</span><span class="op">;</span> <span class="kw">text-transform</span><span class="ch">:</span> <span class="dv">uppercase</span><span class="op">;</span> <span class="kw">opacity</span><span class="ch">:</span> <span class="dv">0.7</span><span class="op">;</span> }</span>
<span id="cb214-22"><a href="#cb214-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.controls</span> { <span class="kw">display</span><span class="ch">:</span> <span class="dv">flex</span><span class="op">;</span> <span class="kw">gap</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">40</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb214-23"><a href="#cb214-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.btn</span> {</span>
<span id="cb214-24"><a href="#cb214-24" aria-hidden="true" tabindex="-1"></a>      <span class="kw">width</span><span class="ch">:</span> <span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">height</span><span class="ch">:</span> <span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">border-radius</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb214-25"><a href="#cb214-25" aria-hidden="true" tabindex="-1"></a>      <span class="kw">border</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="fu">rgba(</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">0.3</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb214-26"><a href="#cb214-26" aria-hidden="true" tabindex="-1"></a>      <span class="kw">background</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">0.1</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb214-27"><a href="#cb214-27" aria-hidden="true" tabindex="-1"></a>      <span class="kw">color</span><span class="ch">:</span> <span class="cn">white</span><span class="op">;</span> <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">24</span><span class="dt">px</span><span class="op">;</span> <span class="kw">cursor</span><span class="ch">:</span> <span class="dv">pointer</span><span class="op">;</span></span>
<span id="cb214-28"><a href="#cb214-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb214-29"><a href="#cb214-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.btn</span><span class="in">:hover</span> { <span class="kw">background</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">0.2</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb214-30"><a href="#cb214-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.mode</span> {</span>
<span id="cb214-31"><a href="#cb214-31" aria-hidden="true" tabindex="-1"></a>      <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">8</span><span class="dt">px</span> <span class="dv">16</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb214-32"><a href="#cb214-32" aria-hidden="true" tabindex="-1"></a>      <span class="kw">background</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">0.1</span><span class="fu">)</span><span class="op">;</span> <span class="kw">border-radius</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb214-33"><a href="#cb214-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb214-34"><a href="#cb214-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.mode.heating</span> { <span class="kw">background</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">255</span><span class="op">,</span><span class="dv">100</span><span class="op">,</span><span class="dv">100</span><span class="op">,</span><span class="dv">0.3</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb214-35"><a href="#cb214-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.mode.cooling</span> { <span class="kw">background</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">100</span><span class="op">,</span><span class="dv">100</span><span class="op">,</span><span class="dv">255</span><span class="op">,</span><span class="dv">0.3</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb214-36"><a href="#cb214-36" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb214-37"><a href="#cb214-37" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb214-38"><a href="#cb214-38" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb214-39"><a href="#cb214-39" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;temperature&quot;</span><span class="dt">&gt;</span></span>
<span id="cb214-40"><a href="#cb214-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;temp&quot;</span><span class="dt">&gt;</span>72<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;unit&quot;</span><span class="dt">&gt;</span>°F<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span>
<span id="cb214-41"><a href="#cb214-41" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb214-42"><a href="#cb214-42" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;label&quot;</span><span class="dt">&gt;</span>Target Temperature<span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb214-43"><a href="#cb214-43" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;controls&quot;</span><span class="dt">&gt;</span></span>
<span id="cb214-44"><a href="#cb214-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;btn&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnDown&quot;</span><span class="dt">&gt;</span>-<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb214-45"><a href="#cb214-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;btn&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnUp&quot;</span><span class="dt">&gt;</span>+<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb214-46"><a href="#cb214-46" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb214-47"><a href="#cb214-47" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;mode&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;mode&quot;</span><span class="dt">&gt;</span>OFF<span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb214-48"><a href="#cb214-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-49"><a href="#cb214-49" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb214-50"><a href="#cb214-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> targetTemp <span class="op">=</span> <span class="dv">72</span><span class="op">;</span></span>
<span id="cb214-51"><a href="#cb214-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> mode <span class="op">=</span> <span class="st">&#39;off&#39;</span><span class="op">;</span></span>
<span id="cb214-52"><a href="#cb214-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-53"><a href="#cb214-53" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;kingkiosk-ready&#39;</span><span class="op">,</span> <span class="kw">async</span> <span class="kw">function</span>() {</span>
<span id="cb214-54"><a href="#cb214-54" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Load saved state</span></span>
<span id="cb214-55"><a href="#cb214-55" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> saved <span class="op">=</span> <span class="cf">await</span> <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;targetTemp&#39;</span>)<span class="op">;</span></span>
<span id="cb214-56"><a href="#cb214-56" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (saved) targetTemp <span class="op">=</span> saved<span class="op">;</span></span>
<span id="cb214-57"><a href="#cb214-57" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateDisplay</span>()<span class="op">;</span></span>
<span id="cb214-58"><a href="#cb214-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-59"><a href="#cb214-59" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Handle incoming commands</span></span>
<span id="cb214-60"><a href="#cb214-60" aria-hidden="true" tabindex="-1"></a>      <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">onCommand</span>(<span class="kw">function</span>(cmd<span class="op">,</span> payload) {</span>
<span id="cb214-61"><a href="#cb214-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (cmd <span class="op">===</span> <span class="st">&#39;set_temperature&#39;</span>) {</span>
<span id="cb214-62"><a href="#cb214-62" aria-hidden="true" tabindex="-1"></a>          targetTemp <span class="op">=</span> payload<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb214-63"><a href="#cb214-63" aria-hidden="true" tabindex="-1"></a>          <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;targetTemp&#39;</span><span class="op">,</span> targetTemp)<span class="op">;</span></span>
<span id="cb214-64"><a href="#cb214-64" aria-hidden="true" tabindex="-1"></a>          <span class="fu">updateDisplay</span>()<span class="op">;</span></span>
<span id="cb214-65"><a href="#cb214-65" aria-hidden="true" tabindex="-1"></a>          <span class="fu">sendTelemetry</span>()<span class="op">;</span></span>
<span id="cb214-66"><a href="#cb214-66" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb214-67"><a href="#cb214-67" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (cmd <span class="op">===</span> <span class="st">&#39;set_mode&#39;</span>) {</span>
<span id="cb214-68"><a href="#cb214-68" aria-hidden="true" tabindex="-1"></a>          mode <span class="op">=</span> payload<span class="op">.</span><span class="at">mode</span><span class="op">;</span></span>
<span id="cb214-69"><a href="#cb214-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">updateDisplay</span>()<span class="op">;</span></span>
<span id="cb214-70"><a href="#cb214-70" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb214-71"><a href="#cb214-71" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb214-72"><a href="#cb214-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-73"><a href="#cb214-73" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Send initial telemetry</span></span>
<span id="cb214-74"><a href="#cb214-74" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sendTelemetry</span>()<span class="op">;</span></span>
<span id="cb214-75"><a href="#cb214-75" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb214-76"><a href="#cb214-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-77"><a href="#cb214-77" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">updateDisplay</span>() {</span>
<span id="cb214-78"><a href="#cb214-78" aria-hidden="true" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;temp&#39;</span>)<span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> targetTemp<span class="op">;</span></span>
<span id="cb214-79"><a href="#cb214-79" aria-hidden="true" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;mode&#39;</span>)<span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> mode<span class="op">.</span><span class="fu">toUpperCase</span>()<span class="op">;</span></span>
<span id="cb214-80"><a href="#cb214-80" aria-hidden="true" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;mode&#39;</span>)<span class="op">.</span><span class="at">className</span> <span class="op">=</span> <span class="st">&#39;mode &#39;</span> <span class="op">+</span> mode<span class="op">;</span></span>
<span id="cb214-81"><a href="#cb214-81" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb214-82"><a href="#cb214-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-83"><a href="#cb214-83" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">sendTelemetry</span>() {</span>
<span id="cb214-84"><a href="#cb214-84" aria-hidden="true" tabindex="-1"></a>      <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">publishTelemetry</span>({</span>
<span id="cb214-85"><a href="#cb214-85" aria-hidden="true" tabindex="-1"></a>        <span class="dt">target_temperature</span><span class="op">:</span> targetTemp<span class="op">,</span></span>
<span id="cb214-86"><a href="#cb214-86" aria-hidden="true" tabindex="-1"></a>        <span class="dt">mode</span><span class="op">:</span> mode</span>
<span id="cb214-87"><a href="#cb214-87" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb214-88"><a href="#cb214-88" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb214-89"><a href="#cb214-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-90"><a href="#cb214-90" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;btnUp&#39;</span>)<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> <span class="kw">function</span>() {</span>
<span id="cb214-91"><a href="#cb214-91" aria-hidden="true" tabindex="-1"></a>      targetTemp<span class="op">++;</span></span>
<span id="cb214-92"><a href="#cb214-92" aria-hidden="true" tabindex="-1"></a>      <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;targetTemp&#39;</span><span class="op">,</span> targetTemp)<span class="op">;</span></span>
<span id="cb214-93"><a href="#cb214-93" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateDisplay</span>()<span class="op">;</span></span>
<span id="cb214-94"><a href="#cb214-94" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sendTelemetry</span>()<span class="op">;</span></span>
<span id="cb214-95"><a href="#cb214-95" aria-hidden="true" tabindex="-1"></a>      <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">sendCommand</span>(<span class="st">&#39;temperature_changed&#39;</span><span class="op">,</span> {</span>
<span id="cb214-96"><a href="#cb214-96" aria-hidden="true" tabindex="-1"></a>        <span class="dt">temperature</span><span class="op">:</span> targetTemp<span class="op">,</span> <span class="dt">direction</span><span class="op">:</span> <span class="st">&#39;up&#39;</span></span>
<span id="cb214-97"><a href="#cb214-97" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb214-98"><a href="#cb214-98" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb214-99"><a href="#cb214-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-100"><a href="#cb214-100" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;btnDown&#39;</span>)<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> <span class="kw">function</span>() {</span>
<span id="cb214-101"><a href="#cb214-101" aria-hidden="true" tabindex="-1"></a>      targetTemp<span class="op">--;</span></span>
<span id="cb214-102"><a href="#cb214-102" aria-hidden="true" tabindex="-1"></a>      <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="at">storage</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;targetTemp&#39;</span><span class="op">,</span> targetTemp)<span class="op">;</span></span>
<span id="cb214-103"><a href="#cb214-103" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateDisplay</span>()<span class="op">;</span></span>
<span id="cb214-104"><a href="#cb214-104" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sendTelemetry</span>()<span class="op">;</span></span>
<span id="cb214-105"><a href="#cb214-105" aria-hidden="true" tabindex="-1"></a>      <span class="bu">window</span><span class="op">.</span><span class="at">KingKiosk</span><span class="op">.</span><span class="fu">sendCommand</span>(<span class="st">&#39;temperature_changed&#39;</span><span class="op">,</span> {</span>
<span id="cb214-106"><a href="#cb214-106" aria-hidden="true" tabindex="-1"></a>        <span class="dt">temperature</span><span class="op">:</span> targetTemp<span class="op">,</span> <span class="dt">direction</span><span class="op">:</span> <span class="st">&#39;down&#39;</span></span>
<span id="cb214-107"><a href="#cb214-107" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb214-108"><a href="#cb214-108" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb214-109"><a href="#cb214-109" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb214-110"><a href="#cb214-110" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb214-111"><a href="#cb214-111" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<p>This widget: - Loads its saved state on startup - Responds to
<code>set_temperature</code> and <code>set_mode</code> commands via MQTT
- Publishes telemetry when values change - Sends events when the user
interacts with buttons - Persists its state between reloads</p>
<h3 data-number="1.9.10" id="native-widget-alternatives"><span
class="header-section-number">1.9.10</span> Native Widget
Alternatives</h3>
<p>While building custom widgets with web technologies
(HTML/CSS/JavaScript) offers maximum flexibility, King Kiosk also
provides <strong>built-in alternatives</strong> that don’t require any
coding. These are perfect when you want high-performance displays
without the complexity of web development, or when you’re working in
environments where custom coding isn’t practical.</p>
<p><strong>Three Native Approaches:</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr>
<th>Approach</th>
<th>Best For</th>
<th>Complexity</th>
<th>Performance</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Canvas Widget</strong></td>
<td>Complex dashboards, diagrams, network maps</td>
<td>Medium</td>
<td>Excellent</td>
</tr>
<tr>
<td><strong>MQTT Image</strong></td>
<td>External rendering, Python/Node.js integration</td>
<td>Low</td>
<td>Good</td>
</tr>
<tr>
<td><strong>Dynamic Native Widgets</strong></td>
<td>Simple displays using built-in components</td>
<td>Low</td>
<td>Excellent</td>
</tr>
</tbody>
</table>
<h3 data-number="1.9.11" id="canvas-declarative-native-graphics"><span
class="header-section-number">1.9.11</span> Canvas: Declarative Native
Graphics</h3>
<p>The Canvas widget is King Kiosk’s most powerful native rendering
system. Instead of writing code, you describe what to draw using JSON -
King Kiosk handles all the rendering natively using a high-performance
graphics engine.</p>
<p><strong>Why Canvas?</strong> - <strong>No web overhead</strong> -
Pure native rendering, no WebView memory or CPU cost -
<strong>Declarative</strong> - Describe what you want, not how to draw
it - <strong>Composable</strong> - Embed gauges, charts, and buttons
inside your canvas - <strong>Interactive</strong> - Objects can publish
MQTT messages when tapped - <strong>Real-time updates</strong> - Modify
any object via MQTT commands</p>
<p><strong>Create a Canvas:</strong></p>
<div class="sourceCode" id="cb215"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_canvas&quot;</span><span class="fu">,</span></span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;my-dashboard&quot;</span><span class="fu">,</span></span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Server Status&quot;</span><span class="fu">,</span></span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">800</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span></span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;doc&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;background&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb215-9"><a href="#cb215-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#1a1a2e&quot;</span></span>
<span id="cb215-10"><a href="#cb215-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb215-11"><a href="#cb215-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;objects&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb215-12"><a href="#cb215-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;connections&quot;</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb215-13"><a href="#cb215-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb215-14"><a href="#cb215-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.9.11.1" id="canvas-objects"><span
class="header-section-number">1.9.11.1</span> Canvas Objects</h4>
<p>Every visual element on a canvas is an “object” with a unique ID,
position, size, and type-specific properties.</p>
<p><strong>Common Object Properties:</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object_id</code></td>
<td>string</td>
<td>Unique identifier (required)</td>
</tr>
<tr>
<td><code>type</code></td>
<td>string</td>
<td><code>node</code>, <code>text</code>, <code>shape</code>,
<code>image</code>, <code>embed</code>, <code>group</code></td>
</tr>
<tr>
<td><code>x</code>, <code>y</code></td>
<td>number</td>
<td>Position (top-left corner)</td>
</tr>
<tr>
<td><code>width</code>, <code>height</code></td>
<td>number</td>
<td>Size</td>
</tr>
<tr>
<td><code>z_index</code></td>
<td>int</td>
<td>Render order (higher = on top)</td>
</tr>
<tr>
<td><code>visible</code></td>
<td>bool</td>
<td>Show/hide without removing</td>
</tr>
<tr>
<td><code>locked</code></td>
<td>bool</td>
<td>Prevent local dragging</td>
</tr>
<tr>
<td><code>rotation_deg</code></td>
<td>number</td>
<td>Rotation around center</td>
</tr>
<tr>
<td><code>opacity</code></td>
<td>number</td>
<td>0.0 to 1.0</td>
</tr>
<tr>
<td><code>style</code></td>
<td>object</td>
<td>Colors, borders, etc.</td>
</tr>
<tr>
<td><code>mqtt</code></td>
<td>object</td>
<td>Tap-to-publish behavior</td>
</tr>
</tbody>
</table>
<p><strong>Text Objects:</strong></p>
<div class="sourceCode" id="cb216"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;title&quot;</span><span class="fu">,</span></span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;text&quot;</span><span class="fu">,</span></span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;System Status&quot;</span><span class="fu">,</span></span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">30</span><span class="fu">,</span></span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb216-7"><a href="#cb216-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#ffffff&quot;</span><span class="fu">,</span></span>
<span id="cb216-8"><a href="#cb216-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;font_size_px&quot;</span><span class="fu">:</span> <span class="dv">28</span><span class="fu">,</span></span>
<span id="cb216-9"><a href="#cb216-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;font_weight&quot;</span><span class="fu">:</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb216-10"><a href="#cb216-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb216-11"><a href="#cb216-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Shape Objects:</strong></p>
<div class="sourceCode" id="cb217"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;status-bg&quot;</span><span class="fu">,</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;shape&quot;</span><span class="fu">,</span></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;shape&quot;</span><span class="fu">:</span> <span class="st">&quot;round_rect&quot;</span><span class="fu">,</span></span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">80</span><span class="fu">,</span></span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;fill_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#2d3436&quot;</span><span class="fu">,</span></span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;stroke_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#00ff00&quot;</span><span class="fu">,</span></span>
<span id="cb217-10"><a href="#cb217-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;stroke_width_px&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb217-11"><a href="#cb217-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;corner_radius_px&quot;</span><span class="fu">:</span> <span class="dv">12</span></span>
<span id="cb217-12"><a href="#cb217-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb217-13"><a href="#cb217-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Shape types: <code>rect</code>, <code>round_rect</code>,
<code>circle</code>, <code>line</code></p>
<p><strong>Image Objects:</strong></p>
<div class="sourceCode" id="cb218"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;server-icon&quot;</span><span class="fu">,</span></span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span></span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">70</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">64</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">64</span><span class="fu">,</span></span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;source&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/icons/server.png&quot;</span></span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb218-9"><a href="#cb218-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;fit&quot;</span><span class="fu">:</span> <span class="st">&quot;contain&quot;</span><span class="fu">,</span></span>
<span id="cb218-10"><a href="#cb218-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;opacity&quot;</span><span class="fu">:</span> <span class="fl">0.9</span></span>
<span id="cb218-11"><a href="#cb218-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Node Objects (for diagrams):</strong></p>
<div class="sourceCode" id="cb219"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;server-1&quot;</span><span class="fu">,</span></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">120</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">80</span><span class="fu">,</span></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Web Server&quot;</span><span class="fu">,</span></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;set&quot;</span><span class="fu">:</span> <span class="st">&quot;material&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;dns&quot;</span> <span class="fu">},</span></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#3498db&quot;</span><span class="fu">,</span></span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;border_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#2980b9&quot;</span></span>
<span id="cb219-11"><a href="#cb219-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb219-12"><a href="#cb219-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ports&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb219-13"><a href="#cb219-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;out&quot;</span><span class="fu">,</span> <span class="dt">&quot;pos&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;edge&quot;</span><span class="fu">:</span> <span class="st">&quot;east&quot;</span><span class="fu">,</span> <span class="dt">&quot;t&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span> <span class="fu">}</span></span>
<span id="cb219-14"><a href="#cb219-14" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb219-15"><a href="#cb219-15" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Embedded Widgets:</strong></p>
<p>This is where Canvas becomes incredibly powerful - embed fully
functional native widgets inside your canvas:</p>
<div class="sourceCode" id="cb220"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu-gauge&quot;</span><span class="fu">,</span></span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;embed&quot;</span><span class="fu">,</span></span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">300</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb220-6"><a href="#cb220-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;embed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb220-7"><a href="#cb220-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;widget_type&quot;</span><span class="fu">:</span> <span class="st">&quot;gauge&quot;</span><span class="fu">,</span></span>
<span id="cb220-8"><a href="#cb220-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu-gauge-widget&quot;</span><span class="fu">,</span></span>
<span id="cb220-9"><a href="#cb220-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb220-10"><a href="#cb220-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;radial&quot;</span><span class="fu">,</span></span>
<span id="cb220-11"><a href="#cb220-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb220-12"><a href="#cb220-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb220-13"><a href="#cb220-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">45</span><span class="fu">,</span></span>
<span id="cb220-14"><a href="#cb220-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;%&quot;</span><span class="fu">,</span></span>
<span id="cb220-15"><a href="#cb220-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;CPU&quot;</span><span class="fu">,</span></span>
<span id="cb220-16"><a href="#cb220-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;thresholds&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb220-17"><a href="#cb220-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">70</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#f1c40f&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb220-18"><a href="#cb220-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#e74c3c&quot;</span> <span class="fu">}</span></span>
<span id="cb220-19"><a href="#cb220-19" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb220-20"><a href="#cb220-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb220-21"><a href="#cb220-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb220-22"><a href="#cb220-22" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Embeddable widgets: <code>gauge</code>, <code>chart</code>,
<code>mqtt_button</code>, <code>mqtt_action_status</code></p>
<h4 data-number="1.9.11.2" id="connections-lines-between-objects"><span
class="header-section-number">1.9.11.2</span> Connections (Lines Between
Objects)</h4>
<p>Connect objects with lines - perfect for network diagrams,
flowcharts, and system maps:</p>
<div class="sourceCode" id="cb221"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;connections&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;connection_id&quot;</span><span class="fu">:</span> <span class="st">&quot;link-1&quot;</span><span class="fu">,</span></span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;server-1&quot;</span><span class="fu">,</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;out&quot;</span> <span class="fu">},</span></span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;database-1&quot;</span><span class="fu">,</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;in&quot;</span> <span class="fu">},</span></span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#00ff00&quot;</span><span class="fu">,</span></span>
<span id="cb221-9"><a href="#cb221-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width_px&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb221-10"><a href="#cb221-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;arrow&quot;</span><span class="fu">:</span> <span class="st">&quot;end&quot;</span></span>
<span id="cb221-11"><a href="#cb221-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb221-12"><a href="#cb221-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb221-13"><a href="#cb221-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb221-14"><a href="#cb221-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Connection styles: - <code>arrow</code>: <code>none</code>,
<code>end</code>, <code>both</code> - <code>dash</code>: Array of
dash/gap lengths, e.g., <code>[5, 3]</code> - <code>animated</code>:
<code>true</code> for flowing animation effect</p>
<h4 data-number="1.9.11.3" id="interactive-canvas-objects"><span
class="header-section-number">1.9.11.3</span> Interactive Canvas
Objects</h4>
<p>Make objects respond to taps by publishing MQTT messages:</p>
<div class="sourceCode" id="cb222"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;restart-btn&quot;</span><span class="fu">,</span></span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;shape&quot;</span><span class="fu">,</span></span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;shape&quot;</span><span class="fu">:</span> <span class="st">&quot;round_rect&quot;</span><span class="fu">,</span></span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">500</span><span class="fu">,</span></span>
<span id="cb222-6"><a href="#cb222-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb222-7"><a href="#cb222-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb222-8"><a href="#cb222-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;fill_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#e74c3c&quot;</span><span class="fu">,</span></span>
<span id="cb222-9"><a href="#cb222-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;corner_radius_px&quot;</span><span class="fu">:</span> <span class="dv">8</span></span>
<span id="cb222-10"><a href="#cb222-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb222-11"><a href="#cb222-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb222-12"><a href="#cb222-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;publish&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb222-13"><a href="#cb222-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/server/command&quot;</span><span class="fu">,</span></span>
<span id="cb222-14"><a href="#cb222-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;payload&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;restart&quot;</span> <span class="fu">}</span></span>
<span id="cb222-15"><a href="#cb222-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb222-16"><a href="#cb222-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb222-17"><a href="#cb222-17" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.9.11.4" id="updating-canvas-objects-via-mqtt"><span
class="header-section-number">1.9.11.4</span> Updating Canvas Objects
via MQTT</h4>
<p>After creating a canvas, update individual objects without recreating
the entire canvas:</p>
<p><strong>Update an object:</strong></p>
<div class="sourceCode" id="cb223"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;update_objects&quot;</span><span class="fu">,</span></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;objects&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu-gauge&quot;</span><span class="fu">,</span></span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;embed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">78</span></span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Change text:</strong></p>
<div class="sourceCode" id="cb224"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;update_objects&quot;</span><span class="fu">,</span></span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;objects&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;status-text&quot;</span><span class="fu">,</span></span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;All Systems Operational&quot;</span><span class="fu">,</span></span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb224-8"><a href="#cb224-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#00ff00&quot;</span></span>
<span id="cb224-9"><a href="#cb224-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb224-10"><a href="#cb224-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb224-11"><a href="#cb224-11" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb224-12"><a href="#cb224-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Add new objects:</strong></p>
<div class="sourceCode" id="cb225"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;add_objects&quot;</span><span class="fu">,</span></span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;objects&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;alert-banner&quot;</span><span class="fu">,</span></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;text&quot;</span><span class="fu">,</span></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;WARNING: High CPU Usage&quot;</span><span class="fu">,</span></span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">550</span><span class="fu">,</span></span>
<span id="cb225-9"><a href="#cb225-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#e74c3c&quot;</span><span class="fu">,</span> <span class="dt">&quot;font_size_px&quot;</span><span class="fu">:</span> <span class="dv">18</span> <span class="fu">}</span></span>
<span id="cb225-10"><a href="#cb225-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb225-11"><a href="#cb225-11" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb225-12"><a href="#cb225-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Remove objects:</strong></p>
<div class="sourceCode" id="cb226"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;remove_objects&quot;</span><span class="fu">,</span></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object_ids&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;alert-banner&quot;</span><span class="ot">]</span></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.9.11.5"
id="complete-canvas-example-server-dashboard"><span
class="header-section-number">1.9.11.5</span> Complete Canvas Example:
Server Dashboard</h4>
<p>Here’s a full example creating a server monitoring dashboard:</p>
<div class="sourceCode" id="cb227"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_canvas&quot;</span><span class="fu">,</span></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;server-dashboard&quot;</span><span class="fu">,</span></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Infrastructure Status&quot;</span><span class="fu">,</span></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">900</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">700</span><span class="fu">,</span></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;doc&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;background&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#0f0f23&quot;</span></span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;objects&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-12"><a href="#cb227-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;header&quot;</span><span class="fu">,</span></span>
<span id="cb227-13"><a href="#cb227-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;text&quot;</span><span class="fu">,</span></span>
<span id="cb227-14"><a href="#cb227-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Infrastructure Monitor&quot;</span><span class="fu">,</span></span>
<span id="cb227-15"><a href="#cb227-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">30</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">20</span><span class="fu">,</span></span>
<span id="cb227-16"><a href="#cb227-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#ffffff&quot;</span><span class="fu">,</span> <span class="dt">&quot;font_size_px&quot;</span><span class="fu">:</span> <span class="dv">32</span><span class="fu">,</span> <span class="dt">&quot;font_weight&quot;</span><span class="fu">:</span> <span class="st">&quot;bold&quot;</span> <span class="fu">}</span></span>
<span id="cb227-17"><a href="#cb227-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-18"><a href="#cb227-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-19"><a href="#cb227-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;web-server&quot;</span><span class="fu">,</span></span>
<span id="cb227-20"><a href="#cb227-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></span>
<span id="cb227-21"><a href="#cb227-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb227-22"><a href="#cb227-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">140</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span></span>
<span id="cb227-23"><a href="#cb227-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Web Server&quot;</span><span class="fu">,</span></span>
<span id="cb227-24"><a href="#cb227-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;set&quot;</span><span class="fu">:</span> <span class="st">&quot;material&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;public&quot;</span> <span class="fu">},</span></span>
<span id="cb227-25"><a href="#cb227-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#3498db&quot;</span> <span class="fu">},</span></span>
<span id="cb227-26"><a href="#cb227-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;ports&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;out&quot;</span><span class="fu">,</span> <span class="dt">&quot;pos&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;edge&quot;</span><span class="fu">:</span> <span class="st">&quot;east&quot;</span><span class="fu">,</span> <span class="dt">&quot;t&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span> <span class="fu">}</span><span class="ot">]</span></span>
<span id="cb227-27"><a href="#cb227-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-28"><a href="#cb227-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-29"><a href="#cb227-29" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;api-server&quot;</span><span class="fu">,</span></span>
<span id="cb227-30"><a href="#cb227-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></span>
<span id="cb227-31"><a href="#cb227-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">380</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb227-32"><a href="#cb227-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">140</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span></span>
<span id="cb227-33"><a href="#cb227-33" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;API Server&quot;</span><span class="fu">,</span></span>
<span id="cb227-34"><a href="#cb227-34" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;set&quot;</span><span class="fu">:</span> <span class="st">&quot;material&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;dns&quot;</span> <span class="fu">},</span></span>
<span id="cb227-35"><a href="#cb227-35" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#9b59b6&quot;</span> <span class="fu">},</span></span>
<span id="cb227-36"><a href="#cb227-36" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;ports&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb227-37"><a href="#cb227-37" aria-hidden="true" tabindex="-1"></a>          <span class="fu">{</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;in&quot;</span><span class="fu">,</span> <span class="dt">&quot;pos&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;edge&quot;</span><span class="fu">:</span> <span class="st">&quot;west&quot;</span><span class="fu">,</span> <span class="dt">&quot;t&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-38"><a href="#cb227-38" aria-hidden="true" tabindex="-1"></a>          <span class="fu">{</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;out&quot;</span><span class="fu">,</span> <span class="dt">&quot;pos&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;edge&quot;</span><span class="fu">:</span> <span class="st">&quot;east&quot;</span><span class="fu">,</span> <span class="dt">&quot;t&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span> <span class="fu">}</span></span>
<span id="cb227-39"><a href="#cb227-39" aria-hidden="true" tabindex="-1"></a>        <span class="ot">]</span></span>
<span id="cb227-40"><a href="#cb227-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-41"><a href="#cb227-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-42"><a href="#cb227-42" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;database&quot;</span><span class="fu">,</span></span>
<span id="cb227-43"><a href="#cb227-43" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></span>
<span id="cb227-44"><a href="#cb227-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">660</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb227-45"><a href="#cb227-45" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">140</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span></span>
<span id="cb227-46"><a href="#cb227-46" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Database&quot;</span><span class="fu">,</span></span>
<span id="cb227-47"><a href="#cb227-47" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;set&quot;</span><span class="fu">:</span> <span class="st">&quot;material&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;storage&quot;</span> <span class="fu">},</span></span>
<span id="cb227-48"><a href="#cb227-48" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#27ae60&quot;</span> <span class="fu">},</span></span>
<span id="cb227-49"><a href="#cb227-49" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;ports&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;in&quot;</span><span class="fu">,</span> <span class="dt">&quot;pos&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;edge&quot;</span><span class="fu">:</span> <span class="st">&quot;west&quot;</span><span class="fu">,</span> <span class="dt">&quot;t&quot;</span><span class="fu">:</span> <span class="fl">0.5</span> <span class="fu">}</span> <span class="fu">}</span><span class="ot">]</span></span>
<span id="cb227-50"><a href="#cb227-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-51"><a href="#cb227-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-52"><a href="#cb227-52" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu-gauge&quot;</span><span class="fu">,</span></span>
<span id="cb227-53"><a href="#cb227-53" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;embed&quot;</span><span class="fu">,</span></span>
<span id="cb227-54"><a href="#cb227-54" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">350</span><span class="fu">,</span></span>
<span id="cb227-55"><a href="#cb227-55" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">180</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">180</span><span class="fu">,</span></span>
<span id="cb227-56"><a href="#cb227-56" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;embed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-57"><a href="#cb227-57" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;widget_type&quot;</span><span class="fu">:</span> <span class="st">&quot;gauge&quot;</span><span class="fu">,</span></span>
<span id="cb227-58"><a href="#cb227-58" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;cpu&quot;</span><span class="fu">,</span></span>
<span id="cb227-59"><a href="#cb227-59" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-60"><a href="#cb227-60" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;radial&quot;</span><span class="fu">,</span></span>
<span id="cb227-61"><a href="#cb227-61" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span> <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb227-62"><a href="#cb227-62" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">42</span><span class="fu">,</span></span>
<span id="cb227-63"><a href="#cb227-63" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;%&quot;</span><span class="fu">,</span></span>
<span id="cb227-64"><a href="#cb227-64" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;CPU Usage&quot;</span><span class="fu">,</span></span>
<span id="cb227-65"><a href="#cb227-65" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;thresholds&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb227-66"><a href="#cb227-66" aria-hidden="true" tabindex="-1"></a>              <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">70</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#f39c12&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-67"><a href="#cb227-67" aria-hidden="true" tabindex="-1"></a>              <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#e74c3c&quot;</span> <span class="fu">}</span></span>
<span id="cb227-68"><a href="#cb227-68" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span></span>
<span id="cb227-69"><a href="#cb227-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb227-70"><a href="#cb227-70" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb227-71"><a href="#cb227-71" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-72"><a href="#cb227-72" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-73"><a href="#cb227-73" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;memory-gauge&quot;</span><span class="fu">,</span></span>
<span id="cb227-74"><a href="#cb227-74" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;embed&quot;</span><span class="fu">,</span></span>
<span id="cb227-75"><a href="#cb227-75" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">360</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">350</span><span class="fu">,</span></span>
<span id="cb227-76"><a href="#cb227-76" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">180</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">180</span><span class="fu">,</span></span>
<span id="cb227-77"><a href="#cb227-77" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;embed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-78"><a href="#cb227-78" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;widget_type&quot;</span><span class="fu">:</span> <span class="st">&quot;gauge&quot;</span><span class="fu">,</span></span>
<span id="cb227-79"><a href="#cb227-79" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;memory&quot;</span><span class="fu">,</span></span>
<span id="cb227-80"><a href="#cb227-80" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-81"><a href="#cb227-81" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;radial&quot;</span><span class="fu">,</span></span>
<span id="cb227-82"><a href="#cb227-82" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span> <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">64</span><span class="fu">,</span></span>
<span id="cb227-83"><a href="#cb227-83" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">28</span><span class="fu">,</span></span>
<span id="cb227-84"><a href="#cb227-84" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;GB&quot;</span><span class="fu">,</span></span>
<span id="cb227-85"><a href="#cb227-85" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Memory&quot;</span><span class="fu">,</span></span>
<span id="cb227-86"><a href="#cb227-86" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;thresholds&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb227-87"><a href="#cb227-87" aria-hidden="true" tabindex="-1"></a>              <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">48</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#f39c12&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-88"><a href="#cb227-88" aria-hidden="true" tabindex="-1"></a>              <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">58</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#e74c3c&quot;</span> <span class="fu">}</span></span>
<span id="cb227-89"><a href="#cb227-89" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span></span>
<span id="cb227-90"><a href="#cb227-90" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb227-91"><a href="#cb227-91" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb227-92"><a href="#cb227-92" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-93"><a href="#cb227-93" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-94"><a href="#cb227-94" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;requests-chart&quot;</span><span class="fu">,</span></span>
<span id="cb227-95"><a href="#cb227-95" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;embed&quot;</span><span class="fu">,</span></span>
<span id="cb227-96"><a href="#cb227-96" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">620</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">350</span><span class="fu">,</span></span>
<span id="cb227-97"><a href="#cb227-97" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">250</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">180</span><span class="fu">,</span></span>
<span id="cb227-98"><a href="#cb227-98" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;embed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-99"><a href="#cb227-99" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;widget_type&quot;</span><span class="fu">:</span> <span class="st">&quot;chart&quot;</span><span class="fu">,</span></span>
<span id="cb227-100"><a href="#cb227-100" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;requests&quot;</span><span class="fu">,</span></span>
<span id="cb227-101"><a href="#cb227-101" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-102"><a href="#cb227-102" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;chart_type&quot;</span><span class="fu">:</span> <span class="st">&quot;line&quot;</span><span class="fu">,</span></span>
<span id="cb227-103"><a href="#cb227-103" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Requests/sec&quot;</span><span class="fu">,</span></span>
<span id="cb227-104"><a href="#cb227-104" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;max_points&quot;</span><span class="fu">:</span> <span class="dv">30</span></span>
<span id="cb227-105"><a href="#cb227-105" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb227-106"><a href="#cb227-106" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb227-107"><a href="#cb227-107" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-108"><a href="#cb227-108" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-109"><a href="#cb227-109" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;status-text&quot;</span><span class="fu">,</span></span>
<span id="cb227-110"><a href="#cb227-110" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;text&quot;</span><span class="fu">,</span></span>
<span id="cb227-111"><a href="#cb227-111" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;All Systems Operational&quot;</span><span class="fu">,</span></span>
<span id="cb227-112"><a href="#cb227-112" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">30</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span></span>
<span id="cb227-113"><a href="#cb227-113" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#2ecc71&quot;</span><span class="fu">,</span> <span class="dt">&quot;font_size_px&quot;</span><span class="fu">:</span> <span class="dv">24</span> <span class="fu">}</span></span>
<span id="cb227-114"><a href="#cb227-114" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-115"><a href="#cb227-115" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-116"><a href="#cb227-116" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;restart-btn&quot;</span><span class="fu">,</span></span>
<span id="cb227-117"><a href="#cb227-117" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;embed&quot;</span><span class="fu">,</span></span>
<span id="cb227-118"><a href="#cb227-118" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">700</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">580</span><span class="fu">,</span></span>
<span id="cb227-119"><a href="#cb227-119" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">160</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">60</span><span class="fu">,</span></span>
<span id="cb227-120"><a href="#cb227-120" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;embed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-121"><a href="#cb227-121" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;widget_type&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_button&quot;</span><span class="fu">,</span></span>
<span id="cb227-122"><a href="#cb227-122" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;restart-all&quot;</span><span class="fu">,</span></span>
<span id="cb227-123"><a href="#cb227-123" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb227-124"><a href="#cb227-124" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Restart All&quot;</span><span class="fu">,</span></span>
<span id="cb227-125"><a href="#cb227-125" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;infrastructure/command&quot;</span><span class="fu">,</span></span>
<span id="cb227-126"><a href="#cb227-126" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;publish_payload&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;restart_all&quot;</span> <span class="fu">},</span></span>
<span id="cb227-127"><a href="#cb227-127" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="st">&quot;danger&quot;</span></span>
<span id="cb227-128"><a href="#cb227-128" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb227-129"><a href="#cb227-129" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb227-130"><a href="#cb227-130" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb227-131"><a href="#cb227-131" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb227-132"><a href="#cb227-132" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;connections&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb227-133"><a href="#cb227-133" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-134"><a href="#cb227-134" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;connection_id&quot;</span><span class="fu">:</span> <span class="st">&quot;web-to-api&quot;</span><span class="fu">,</span></span>
<span id="cb227-135"><a href="#cb227-135" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;web-server&quot;</span><span class="fu">,</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;out&quot;</span> <span class="fu">},</span></span>
<span id="cb227-136"><a href="#cb227-136" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;api-server&quot;</span><span class="fu">,</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;in&quot;</span> <span class="fu">},</span></span>
<span id="cb227-137"><a href="#cb227-137" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#2ecc71&quot;</span><span class="fu">,</span> <span class="dt">&quot;width_px&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span> <span class="dt">&quot;animated&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span></span>
<span id="cb227-138"><a href="#cb227-138" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb227-139"><a href="#cb227-139" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb227-140"><a href="#cb227-140" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;connection_id&quot;</span><span class="fu">:</span> <span class="st">&quot;api-to-db&quot;</span><span class="fu">,</span></span>
<span id="cb227-141"><a href="#cb227-141" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;api-server&quot;</span><span class="fu">,</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;out&quot;</span> <span class="fu">},</span></span>
<span id="cb227-142"><a href="#cb227-142" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;object_id&quot;</span><span class="fu">:</span> <span class="st">&quot;database&quot;</span><span class="fu">,</span> <span class="dt">&quot;port_id&quot;</span><span class="fu">:</span> <span class="st">&quot;in&quot;</span> <span class="fu">},</span></span>
<span id="cb227-143"><a href="#cb227-143" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#2ecc71&quot;</span><span class="fu">,</span> <span class="dt">&quot;width_px&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span> <span class="dt">&quot;animated&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span></span>
<span id="cb227-144"><a href="#cb227-144" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb227-145"><a href="#cb227-145" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb227-146"><a href="#cb227-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb227-147"><a href="#cb227-147" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.9.12" id="mqtt-image-external-rendering"><span
class="header-section-number">1.9.12</span> MQTT Image: External
Rendering</h3>
<p>If you have existing tools that generate images (Python scripts,
Node.js apps, image processing pipelines), the MQTT Image widget lets
you stream rendered frames directly to King Kiosk.</p>
<p><strong>Why MQTT Image?</strong> - <strong>Use any language</strong>
- Python, Node.js, Go, Rust - anything that can publish to MQTT -
<strong>Leverage existing libraries</strong> - PIL/Pillow, Cairo,
ImageMagick, matplotlib, D3.js (server-side) - <strong>Pre-rendered
content</strong> - Complex visualizations rendered on powerful hardware
- <strong>Integration flexibility</strong> - Connect to systems that
already generate images</p>
<p><strong>Create an MQTT Image widget:</strong></p>
<div class="sourceCode" id="cb228"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_image&quot;</span><span class="fu">,</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;external-render&quot;</span><span class="fu">,</span></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;myapp/rendered/frame&quot;</span><span class="fu">,</span></span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;is_base64&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;External Dashboard&quot;</span><span class="fu">,</span></span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span> <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb228-8"><a href="#cb228-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">800</span><span class="fu">,</span> <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">600</span></span>
<span id="cb228-9"><a href="#cb228-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Publish images from Python:</strong></p>
<div class="sourceCode" id="cb229"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> paho.mqtt.client <span class="im">as</span> mqtt</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image, ImageDraw, ImageFont</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> base64</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> io</span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> render_dashboard(cpu, memory, status):</span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create image</span></span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> Image.new(<span class="st">&#39;RGB&#39;</span>, (<span class="dv">800</span>, <span class="dv">600</span>), color<span class="op">=</span><span class="st">&#39;#1a1a2e&#39;</span>)</span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a>    draw <span class="op">=</span> ImageDraw.Draw(img)</span>
<span id="cb229-10"><a href="#cb229-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-11"><a href="#cb229-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Draw content</span></span>
<span id="cb229-12"><a href="#cb229-12" aria-hidden="true" tabindex="-1"></a>    draw.text((<span class="dv">50</span>, <span class="dv">30</span>), <span class="st">&quot;System Dashboard&quot;</span>, fill<span class="op">=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb229-13"><a href="#cb229-13" aria-hidden="true" tabindex="-1"></a>    draw.text((<span class="dv">50</span>, <span class="dv">100</span>), <span class="ss">f&quot;CPU: </span><span class="sc">{</span>cpu<span class="sc">}</span><span class="ss">%&quot;</span>, fill<span class="op">=</span><span class="st">&#39;#3498db&#39;</span>)</span>
<span id="cb229-14"><a href="#cb229-14" aria-hidden="true" tabindex="-1"></a>    draw.text((<span class="dv">50</span>, <span class="dv">150</span>), <span class="ss">f&quot;Memory: </span><span class="sc">{</span>memory<span class="sc">}</span><span class="ss">GB&quot;</span>, fill<span class="op">=</span><span class="st">&#39;#9b59b6&#39;</span>)</span>
<span id="cb229-15"><a href="#cb229-15" aria-hidden="true" tabindex="-1"></a>    draw.text((<span class="dv">50</span>, <span class="dv">200</span>), <span class="ss">f&quot;Status: </span><span class="sc">{</span>status<span class="sc">}</span><span class="ss">&quot;</span>, fill<span class="op">=</span><span class="st">&#39;#2ecc71&#39;</span>)</span>
<span id="cb229-16"><a href="#cb229-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-17"><a href="#cb229-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert to base64</span></span>
<span id="cb229-18"><a href="#cb229-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">buffer</span> <span class="op">=</span> io.BytesIO()</span>
<span id="cb229-19"><a href="#cb229-19" aria-hidden="true" tabindex="-1"></a>    img.save(<span class="bu">buffer</span>, <span class="bu">format</span><span class="op">=</span><span class="st">&#39;PNG&#39;</span>)</span>
<span id="cb229-20"><a href="#cb229-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> base64.b64encode(<span class="bu">buffer</span>.getvalue()).decode()</span>
<span id="cb229-21"><a href="#cb229-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-22"><a href="#cb229-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Connect and publish</span></span>
<span id="cb229-23"><a href="#cb229-23" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> mqtt.Client()</span>
<span id="cb229-24"><a href="#cb229-24" aria-hidden="true" tabindex="-1"></a>client.<span class="ex">connect</span>(<span class="st">&quot;your-broker&quot;</span>, <span class="dv">1883</span>)</span>
<span id="cb229-25"><a href="#cb229-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-26"><a href="#cb229-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Render and send</span></span>
<span id="cb229-27"><a href="#cb229-27" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> render_dashboard(cpu<span class="op">=</span><span class="dv">45</span>, memory<span class="op">=</span><span class="dv">28</span>, status<span class="op">=</span><span class="st">&quot;Online&quot;</span>)</span>
<span id="cb229-28"><a href="#cb229-28" aria-hidden="true" tabindex="-1"></a>client.publish(<span class="st">&quot;myapp/rendered/frame&quot;</span>, frame)</span></code></pre></div>
<p><strong>Publish from Node.js:</strong></p>
<div class="sourceCode" id="cb230"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> mqtt <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;mqtt&#39;</span>)<span class="op">;</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> { createCanvas } <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> client <span class="op">=</span> mqtt<span class="op">.</span><span class="fu">connect</span>(<span class="st">&#39;mqtt://your-broker&#39;</span>)<span class="op">;</span></span>
<span id="cb230-5"><a href="#cb230-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-6"><a href="#cb230-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">renderFrame</span>(data) {</span>
<span id="cb230-7"><a href="#cb230-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> canvas <span class="op">=</span> <span class="fu">createCanvas</span>(<span class="dv">800</span><span class="op">,</span> <span class="dv">600</span>)<span class="op">;</span></span>
<span id="cb230-8"><a href="#cb230-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> ctx <span class="op">=</span> canvas<span class="op">.</span><span class="fu">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></span>
<span id="cb230-9"><a href="#cb230-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-10"><a href="#cb230-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Dark background</span></span>
<span id="cb230-11"><a href="#cb230-11" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&#39;#1a1a2e&#39;</span><span class="op">;</span></span>
<span id="cb230-12"><a href="#cb230-12" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="fu">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">800</span><span class="op">,</span> <span class="dv">600</span>)<span class="op">;</span></span>
<span id="cb230-13"><a href="#cb230-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-14"><a href="#cb230-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw content</span></span>
<span id="cb230-15"><a href="#cb230-15" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&#39;white&#39;</span><span class="op">;</span></span>
<span id="cb230-16"><a href="#cb230-16" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="at">font</span> <span class="op">=</span> <span class="st">&#39;32px sans-serif&#39;</span><span class="op">;</span></span>
<span id="cb230-17"><a href="#cb230-17" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="fu">fillText</span>(<span class="st">&#39;System Dashboard&#39;</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">50</span>)<span class="op">;</span></span>
<span id="cb230-18"><a href="#cb230-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-19"><a href="#cb230-19" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&#39;#3498db&#39;</span><span class="op">;</span></span>
<span id="cb230-20"><a href="#cb230-20" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="at">font</span> <span class="op">=</span> <span class="st">&#39;24px sans-serif&#39;</span><span class="op">;</span></span>
<span id="cb230-21"><a href="#cb230-21" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="fu">fillText</span>(<span class="vs">`CPU: </span><span class="sc">${</span>data<span class="op">.</span><span class="at">cpu</span><span class="sc">}</span><span class="vs">%`</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">120</span>)<span class="op">;</span></span>
<span id="cb230-22"><a href="#cb230-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-23"><a href="#cb230-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Return as base64</span></span>
<span id="cb230-24"><a href="#cb230-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> canvas<span class="op">.</span><span class="fu">toBuffer</span>(<span class="st">&#39;image/png&#39;</span>)<span class="op">.</span><span class="fu">toString</span>(<span class="st">&#39;base64&#39;</span>)<span class="op">;</span></span>
<span id="cb230-25"><a href="#cb230-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb230-26"><a href="#cb230-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-27"><a href="#cb230-27" aria-hidden="true" tabindex="-1"></a><span class="co">// Publish every 5 seconds</span></span>
<span id="cb230-28"><a href="#cb230-28" aria-hidden="true" tabindex="-1"></a><span class="pp">setInterval</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb230-29"><a href="#cb230-29" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> frame <span class="op">=</span> <span class="fu">renderFrame</span>({ <span class="dt">cpu</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> <span class="dv">100</span>) })<span class="op">;</span></span>
<span id="cb230-30"><a href="#cb230-30" aria-hidden="true" tabindex="-1"></a>  client<span class="op">.</span><span class="fu">publish</span>(<span class="st">&#39;myapp/rendered/frame&#39;</span><span class="op">,</span> frame)<span class="op">;</span></span>
<span id="cb230-31"><a href="#cb230-31" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> <span class="dv">5000</span>)<span class="op">;</span></span></code></pre></div>
<p><strong>Update interval:</strong></p>
<p>For animated displays, the widget can poll for new images:</p>
<div class="sourceCode" id="cb231"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_image&quot;</span><span class="fu">,</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;myapp/rendered/frame&quot;</span><span class="fu">,</span></span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;is_base64&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;update_interval&quot;</span><span class="fu">:</span> <span class="dv">1000</span></span>
<span id="cb231-6"><a href="#cb231-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.9.13" id="dynamic-native-widgets"><span
class="header-section-number">1.9.13</span> Dynamic Native Widgets</h3>
<p>Don’t overlook the power of King Kiosk’s built-in widgets. Gauges,
charts, and animated text are highly configurable and can be dynamically
updated via MQTT - often eliminating the need for custom development
entirely.</p>
<p><strong>Dynamic Gauge Updates:</strong></p>
<p>Create a gauge once, then update its value from any system:</p>
<div class="sourceCode" id="cb232"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temp-gauge&quot;</span><span class="fu">,</span></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;radial&quot;</span><span class="fu">,</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Temperature&quot;</span><span class="fu">,</span></span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span> <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">72</span><span class="fu">,</span></span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;°F&quot;</span><span class="fu">,</span></span>
<span id="cb232-9"><a href="#cb232-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;thresholds&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb232-10"><a href="#cb232-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">80</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#f39c12&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb232-11"><a href="#cb232-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span> <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#e74c3c&quot;</span> <span class="fu">}</span></span>
<span id="cb232-12"><a href="#cb232-12" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb232-13"><a href="#cb232-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Update from Home Assistant, Node-RED, or any MQTT client:</p>
<div class="sourceCode" id="cb233"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_gauge_value&quot;</span><span class="fu">,</span></span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_id&quot;</span><span class="fu">:</span> <span class="st">&quot;temp-gauge&quot;</span><span class="fu">,</span></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">85</span></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Dynamic Charts:</strong></p>
<p>Create real-time charts that update as data arrives:</p>
<div class="sourceCode" id="cb234"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_chart&quot;</span><span class="fu">,</span></span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;sensor-chart&quot;</span><span class="fu">,</span></span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_type&quot;</span><span class="fu">:</span> <span class="st">&quot;line&quot;</span><span class="fu">,</span></span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Temperature History&quot;</span><span class="fu">,</span></span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max_points&quot;</span><span class="fu">:</span> <span class="dv">60</span><span class="fu">,</span></span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_topic_prefix&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk&quot;</span></span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Append data points over time:</p>
<div class="sourceCode" id="cb235"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;append_chart_data&quot;</span><span class="fu">,</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;chart_id&quot;</span><span class="fu">:</span> <span class="st">&quot;sensor-chart&quot;</span><span class="fu">,</span></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">72</span></span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Dynamic Animated Text:</strong></p>
<p>Create eye-catching displays without writing any code:</p>
<div class="sourceCode" id="cb236"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_animated_text&quot;</span><span class="fu">,</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;alert-display&quot;</span><span class="fu">,</span></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;preset&quot;</span><span class="fu">:</span> <span class="st">&quot;tickerMarquee&quot;</span><span class="fu">,</span></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Welcome to King Kiosk!&quot;</span><span class="fu">,</span></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;layout&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;alignment&quot;</span><span class="fu">:</span> <span class="st">&quot;center&quot;</span><span class="fu">,</span></span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;vertical_alignment&quot;</span><span class="fu">:</span> <span class="st">&quot;middle&quot;</span></span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_mode&quot;</span><span class="fu">:</span> <span class="st">&quot;gradient&quot;</span><span class="fu">,</span></span>
<span id="cb236-11"><a href="#cb236-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;background_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#1a1a2e&quot;</span></span>
<span id="cb236-12"><a href="#cb236-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Update the text dynamically via element command: Topic:
<code>kingkiosk/{device_id}/element/alert-display/cmd</code></p>
<div class="sourceCode" id="cb237"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;set_text&quot;</span><span class="fu">,</span></span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;ALERT: Server maintenance at 2:00 PM&quot;</span></span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>When to Use Each Approach:</strong></p>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr>
<th>Scenario</th>
<th>Recommended Approach</th>
</tr>
</thead>
<tbody>
<tr>
<td>Complex dashboard with multiple data sources</td>
<td>Canvas with embedded widgets</td>
</tr>
<tr>
<td>Network topology / system diagram</td>
<td>Canvas with nodes and connections</td>
</tr>
<tr>
<td>Already have Python/Node rendering code</td>
<td>MQTT Image</td>
</tr>
<tr>
<td>Simple numeric displays</td>
<td>Dynamic Gauges</td>
</tr>
<tr>
<td>Time-series data visualization</td>
<td>Dynamic Charts</td>
</tr>
<tr>
<td>Scrolling announcements</td>
<td>Animated Text</td>
</tr>
<tr>
<td>Full interactivity with custom logic</td>
<td>Custom web widget (HTML/JS)</td>
</tr>
</tbody>
</table>
<hr />
<h3 data-number="1.9.14" id="os-widgets-home-screen-widgets"><span
class="header-section-number">1.9.14</span> OS Widgets (Home Screen
Widgets)</h3>
<p>King Kiosk can create native widgets on your Android home screen or
iOS/iPadOS home screen and lock screen. These widgets update
automatically and work even when the King Kiosk app isn’t open — perfect
for at-a-glance information like temperature sensors, alarm status, or
quick-action buttons.</p>
<p><strong>What are OS Widgets?</strong></p>
<p>OS widgets are small visual elements that appear on your phone or
tablet’s home screen (Android) or home/lock screen (iOS). Unlike the
widgets <em>inside</em> King Kiosk (which appear in windows on the kiosk
display), OS widgets are native to your device’s operating system.</p>
<p>Think of it this way: - <strong>King Kiosk window widgets</strong> =
Displayed inside the King Kiosk app on your wall-mounted tablet -
<strong>OS widgets</strong> = Small info cards on your phone’s home
screen that you can glance at without opening any app</p>
<p><strong>Why Use OS Widgets?</strong></p>
<ul>
<li><strong>Always visible</strong> — No need to open King Kiosk to
check a sensor value</li>
<li><strong>Updates automatically</strong> — Widgets refresh their data
from MQTT on their own schedule</li>
<li><strong>Battery efficient</strong> — Widgets use minimal power
compared to running the full app</li>
<li><strong>Quick actions</strong> — Tap a button widget to control your
home without opening the app</li>
<li><strong>Multiple widgets</strong> — Create as many as you need for
different sensors or controls</li>
</ul>
<p><strong>Supported Widget Types:</strong></p>
<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 39%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr>
<th>Widget Type</th>
<th>What It Shows</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Gauge</strong></td>
<td>Numeric value with optional zones/thresholds</td>
<td>Temperature, humidity, battery levels</td>
</tr>
<tr>
<td><strong>Chart</strong></td>
<td>Small line chart showing value history</td>
<td>Temperature trends, power usage</td>
</tr>
<tr>
<td><strong>Weather</strong></td>
<td>Current conditions and forecast</td>
<td>Current weather, daily forecast</td>
</tr>
<tr>
<td><strong>Alarmo</strong></td>
<td>Security system status and arm/disarm controls</td>
<td>Home security, alarm status</td>
</tr>
<tr>
<td><strong>MQTT Button</strong></td>
<td>Toggle button with on/off states</td>
<td>Light switches, scene triggers</td>
</tr>
<tr>
<td><strong>Sensor</strong></td>
<td>Simple value display</td>
<td>Any numeric sensor value</td>
</tr>
<tr>
<td><strong>Canvas</strong></td>
<td>Visual diagram snapshot</td>
<td>System diagrams, network maps</td>
</tr>
<tr>
<td><strong>Clock</strong></td>
<td>Current time display</td>
<td>Quick time check</td>
</tr>
</tbody>
</table>
<p><strong>Creating an OS Widget:</strong></p>
<p>To create a native OS widget, add the <code>os_widget: true</code>
parameter when creating a widget via MQTT. The widget will be created
both inside King Kiosk (if you want it there) and as a native OS
widget.</p>
<p><strong>Example: Temperature Gauge Widget</strong></p>
<div class="sourceCode" id="cb238"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_gauge&quot;</span><span class="fu">,</span></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;living-room-temp&quot;</span><span class="fu">,</span></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gauge_type&quot;</span><span class="fu">:</span> <span class="st">&quot;radial&quot;</span><span class="fu">,</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Living Room&quot;</span><span class="fu">,</span></span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="dv">90</span><span class="fu">,</span></span>
<span id="cb238-8"><a href="#cb238-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="dv">72</span><span class="fu">,</span></span>
<span id="cb238-9"><a href="#cb238-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;°F&quot;</span><span class="fu">,</span></span>
<span id="cb238-10"><a href="#cb238-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;os_widget&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb238-11"><a href="#cb238-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;homeassistant/sensor/living_room_temperature/state&quot;</span><span class="fu">,</span></span>
<span id="cb238-12"><a href="#cb238-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;json_field&quot;</span><span class="fu">:</span> <span class="st">&quot;temperature&quot;</span></span>
<span id="cb238-13"><a href="#cb238-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>What happens:</strong> 1. King Kiosk creates the gauge inside
the app 2. King Kiosk also registers a native OS widget with your device
3. You can now add this widget to your home screen just like any other
widget 4. The widget automatically subscribes to the MQTT topic and
updates when new values arrive</p>
<p><strong>Example: Security System Widget (Alarmo)</strong></p>
<div class="sourceCode" id="cb239"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;alarmo_widget&quot;</span><span class="fu">,</span></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;home-alarm&quot;</span><span class="fu">,</span></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mqtt_base_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;alarmo&quot;</span><span class="fu">,</span></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;require_code&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;code_length&quot;</span><span class="fu">:</span> <span class="dv">4</span><span class="fu">,</span></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;available_modes&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;armed_away&quot;</span><span class="ot">,</span> <span class="st">&quot;armed_home&quot;</span><span class="ot">,</span> <span class="st">&quot;armed_night&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;os_widget&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb239-9"><a href="#cb239-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The widget shows alarm status and provides arm/disarm buttons.
Tapping the widget opens quick controls without opening the full
app.</p>
<p><strong>Example: MQTT Button Widget</strong></p>
<div class="sourceCode" id="cb240"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_button&quot;</span><span class="fu">,</span></span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;porch-light&quot;</span><span class="fu">,</span></span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Porch Light&quot;</span><span class="fu">,</span></span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;toggle&quot;</span><span class="fu">,</span></span>
<span id="cb240-6"><a href="#cb240-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/lights/porch/set&quot;</span><span class="fu">,</span></span>
<span id="cb240-7"><a href="#cb240-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;subscription_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;home/lights/porch/state&quot;</span><span class="fu">,</span></span>
<span id="cb240-8"><a href="#cb240-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="st">&quot;light_bulb&quot;</span><span class="fu">,</span></span>
<span id="cb240-9"><a href="#cb240-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color_on&quot;</span><span class="fu">:</span> <span class="st">&quot;0xFFFFC107&quot;</span><span class="fu">,</span></span>
<span id="cb240-10"><a href="#cb240-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color_off&quot;</span><span class="fu">:</span> <span class="st">&quot;0xFF757575&quot;</span><span class="fu">,</span></span>
<span id="cb240-11"><a href="#cb240-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;os_widget&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb240-12"><a href="#cb240-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Creates a home screen button that toggles your porch light. The
button color updates based on the light’s state.</p>
<p><strong>Adding Widgets to Your Home Screen:</strong></p>
<p><strong>On Android:</strong> 1. Long-press on your home screen 2. Tap
“Widgets” 3. Scroll to “King Kiosk” 4. Drag the widget type you created
to your home screen 5. Select which widget (if you have multiple)</p>
<p><strong>On iOS/iPadOS:</strong> 1. Long-press on your home screen 2.
Tap the “+” button in the top corner 3. Search for “King Kiosk” 4.
Choose the widget size and type 5. Add to home screen or lock screen 6.
Edit the widget to select which data source</p>
<p><strong>How Updates Work:</strong></p>
<p>OS widgets connect to MQTT independently of the main King Kiosk app.
They use a lightweight MQTT client built into the widget extension:</p>
<ul>
<li><strong>Automatic updates</strong> — Widgets subscribe to their
configured MQTT topic</li>
<li><strong>Efficient refresh</strong> — iOS widgets refresh every 15-60
minutes, Android widgets can refresh more frequently</li>
<li><strong>Cached values</strong> — King Kiosk also caches the latest
values in shared storage for instant widget display</li>
</ul>
<p><strong>Platform Differences:</strong></p>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 39%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Android</th>
<th>iOS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Widget placement</td>
<td>Home screen only</td>
<td>Home screen, lock screen, Today view</td>
</tr>
<tr>
<td>Update frequency</td>
<td>Every few minutes</td>
<td>Every 15-60 minutes (OS controlled)</td>
</tr>
<tr>
<td>Interactive buttons</td>
<td>Yes</td>
<td>Yes (iOS 17+)</td>
</tr>
<tr>
<td>Resize</td>
<td>Yes</td>
<td>Limited sizes</td>
</tr>
</tbody>
</table>
<p><strong>Privacy &amp; Battery:</strong></p>
<ul>
<li>Widgets only connect to MQTT when refreshing — not continuously</li>
<li>MQTT credentials are stored securely in your device’s keychain</li>
<li>Widgets use minimal battery (less than 1% per day typically)</li>
<li>Widgets can be removed at any time without affecting King Kiosk</li>
</ul>
<p><strong>Removing OS Widgets:</strong></p>
<p>To remove a widget from your home screen, simply delete it like any
other widget (long-press and remove). To fully unregister it from King
Kiosk, send a remove command:</p>
<div class="sourceCode" id="cb241"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;close_window&quot;</span><span class="fu">,</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;living-room-temp&quot;</span></span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>This removes both the in-app widget and the OS widget
registration.</p>
<p><strong>Troubleshooting:</strong></p>
<ul>
<li><strong>Widget not appearing in widget list?</strong> Make sure you
created it with <code>os_widget: true</code> and the device supports
widgets</li>
<li><strong>Widget showing old data?</strong> The widget updates on its
own schedule. iOS restricts update frequency to preserve battery</li>
<li><strong>Widget showing “No data”?</strong> Check that MQTT
credentials are configured and the topic has published at least
once</li>
<li><strong>Button widget not responding?</strong> Verify the publish
topic and payload are correct in your MQTT broker</li>
</ul>
<hr />
<h2 data-number="1.10" id="home-assistant-integration"><span
class="header-section-number">1.10</span> 9. Home Assistant
Integration</h2>
<p>King Kiosk is designed to work seamlessly with Home Assistant. Basic
auto-discovery setup is covered in <a
href="#home-assistant-auto-discovery">Getting Started</a> - once
enabled, your displays automatically appear as devices in Home
Assistant.</p>
<p>This section covers advanced integration patterns for power
users.</p>
<h3 data-number="1.10.1" id="creating-custom-sensors"><span
class="header-section-number">1.10.1</span> Creating Custom Sensors</h3>
<p>Monitor widget states in Home Assistant:</p>
<div class="sourceCode" id="cb242"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mqtt</span><span class="kw">:</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">sensor</span><span class="kw">:</span></span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Living Room Clock Mode&quot;</span></span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">state_topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/living_room/element/clock-1/state&quot;</span></span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">value_template</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;{{ value_json.mode }}&quot;</span></span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">json_attributes_topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/living_room/element/clock-1/state&quot;</span></span></code></pre></div>
<h3 data-number="1.10.2"
id="controlling-king-kiosk-from-home-assistant"><span
class="header-section-number">1.10.2</span> Controlling King Kiosk from
Home Assistant</h3>
<p>Create buttons to control your displays:</p>
<div class="sourceCode" id="cb243"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mqtt</span><span class="kw">:</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">button</span><span class="kw">:</span></span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Living Room Morning Mode&quot;</span></span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">command_topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/living_room/system/cmd&quot;</span></span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">payload_press</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{&quot;command&quot;: &quot;load_screen_state&quot;, &quot;name&quot;: &quot;Morning Dashboard&quot;}&#39;</span></span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-7"><a href="#cb243-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Toggle Clock Mode&quot;</span></span>
<span id="cb243-8"><a href="#cb243-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">command_topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/living_room/element/clock-1/cmd&quot;</span></span>
<span id="cb243-9"><a href="#cb243-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">payload_press</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{&quot;command&quot;: &quot;toggle_mode&quot;}&#39;</span></span></code></pre></div>
<p>Use automations to control displays based on events:</p>
<div class="sourceCode" id="cb244"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">automation</span><span class="kw">:</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">alias</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Turn on lobby display when motion detected&quot;</span></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">trigger</span><span class="kw">:</span></span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">platform</span><span class="kw">:</span><span class="at"> state</span></span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">entity_id</span><span class="kw">:</span><span class="at"> binary_sensor.lobby_motion</span></span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">to</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;on&quot;</span></span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">action</span><span class="kw">:</span></span>
<span id="cb244-8"><a href="#cb244-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">service</span><span class="kw">:</span><span class="at"> mqtt.publish</span></span>
<span id="cb244-9"><a href="#cb244-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb244-10"><a href="#cb244-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/lobby_display/system/cmd&quot;</span></span>
<span id="cb244-11"><a href="#cb244-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">payload</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{&quot;command&quot;: &quot;set_brightness&quot;, &quot;value&quot;: 1.0}&#39;</span></span></code></pre></div>
<hr />
<h2 data-number="1.11" id="tips-and-best-practices"><span
class="header-section-number">1.11</span> 10. Tips and Best
Practices</h2>
<h3 data-number="1.11.1" id="performance-optimization"><span
class="header-section-number">1.11.1</span> Performance
Optimization</h3>
<p><strong>For smooth operation:</strong> - Limit the number of
simultaneous video streams - Use appropriate image sizes (don’t load 4K
images for thumbnail displays) - Close unused widgets to free memory -
Use the <code>reset_media</code> command if playback becomes
sluggish</p>
<p><strong>For battery-powered devices:</strong> - Reduce screen
brightness - Extend carousel intervals - Disable unnecessary sensors -
Use screen schedules to dim displays during off-hours</p>
<h3 data-number="1.11.2" id="network-considerations"><span
class="header-section-number">1.11.2</span> Network Considerations</h3>
<p><strong>For reliable MQTT:</strong> - Use a local broker when
possible for lowest latency - Enable SSL for secure communications over
the internet - For critical commands, consider using higher reliability
settings (QoS - Quality of Service levels) to ensure delivery - Monitor
your server’s connection count if managing many displays</p>
<p><strong>For media streaming:</strong> - Ensure adequate bandwidth for
video content - Use local media servers when possible - Consider
CDN-hosted content for distributed deployments</p>
<h3 data-number="1.11.3" id="troubleshooting-common-issues"><span
class="header-section-number">1.11.3</span> Troubleshooting Common
Issues</h3>
<p><strong>MQTT Not Connecting:</strong> 1. Verify broker host and port
in settings 2. Check username and password 3. Ensure the device can
reach the broker (firewall rules) 4. Try disabling SSL to rule out
certificate issues</p>
<p><strong>Widget Not Responding to Commands:</strong> 1. Verify the
widget ID in your command matches the ID you gave when creating the
widget 2. Check for typos in the command name 3. Ensure the widget is
actually created and visible on screen 4. Check the response messages
for error details</p>
<p><strong>Display Seems Slow:</strong> 1. Close unused windows 2. Check
network connectivity 3. Reduce video quality or count 4. Use the
<code>reset_media</code> command 5. Restart the app if necessary</p>
<p><strong>Layout Not Saving:</strong> 1. Ensure you have permission to
write to storage 2. Check available storage space 3. Try a different
state name 4. Export and re-import as a workaround</p>
<hr />
<h2 data-number="1.12" id="apple-tv-experience"><span
class="header-section-number">1.12</span> 11. Apple TV Experience</h2>
<p>King Kiosk on Apple TV isn’t just a port - it’s a completely
reimagined experience built from the ground up for the living room.
While other apps offer basic single-content displays on tvOS, King Kiosk
brings its full Programmable Display Runtime™ to your television,
controlled entirely with the Siri Remote.</p>
<p><strong>There’s simply nothing else like it on the Apple TV
platform.</strong></p>
<h3 data-number="1.12.1"
id="a-revolutionary-window-system-for-television"><span
class="header-section-number">1.12.1</span> A Revolutionary Window
System for Television</h3>
<p>Traditional TV apps show one thing at a time. King Kiosk shatters
that limitation. On your Apple TV, you can simultaneously display:</p>
<ul>
<li>A clock in one corner</li>
<li>Weather forecast in another</li>
<li>A live security camera feed</li>
<li>Your Home Assistant dashboard</li>
<li>A news ticker</li>
<li>And more - all visible at once, each in its own resizable tile</li>
</ul>
<p><strong>Two Layout Modes:</strong></p>
<p><strong>Floating Mode</strong> - Windows float freely on screen.
Position them anywhere, resize them to any dimension, overlap them as
needed. Perfect for creative dashboard layouts where you want precise
control over every pixel.</p>
<p><strong>Tiling Mode</strong> - Inspired by the i3 window manager
beloved by power users, tiling mode automatically arranges your windows
in a clean, non-overlapping grid. Add a new window and it intelligently
splits the space. Remove one and the others expand to fill the gap. No
manual arrangement needed.</p>
<p>Switch between modes anytime with the MQTT command:</p>
<div class="sourceCode" id="cb245"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;window_mode&quot;</span><span class="fu">,</span></span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;tiling&quot;</span></span>
<span id="cb245-4"><a href="#cb245-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Or toggle with <code>"mode": "toggle"</code> to flip between floating
and tiling.</p>
<h3 data-number="1.12.2" id="controlling-with-the-siri-remote"><span
class="header-section-number">1.12.2</span> Controlling with the Siri
Remote</h3>
<p>The Siri Remote becomes your complete control center for King Kiosk.
Here’s what each button does:</p>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>Button</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>D-pad (Up/Down/Left/Right)</strong></td>
<td>Navigate between windows using spatial focus</td>
</tr>
<tr>
<td><strong>Select (Center Click)</strong></td>
<td>Interact with the focused window</td>
</tr>
<tr>
<td><strong>Play/Pause</strong></td>
<td>Enter/exit Move Mode (floating layout only)</td>
</tr>
<tr>
<td><strong>Menu</strong></td>
<td>Exit current mode, go back, or close menus</td>
</tr>
<tr>
<td><strong>TV/Home</strong></td>
<td>Standard tvOS home behavior</td>
</tr>
</tbody>
</table>
<p><strong>The Focus Ring</strong></p>
<p>When navigating between windows, a glowing focus ring shows which
tile is currently selected. This ring is smart:</p>
<ul>
<li><strong>Auto-hides</strong> after 5 seconds of inactivity for a
cleaner display</li>
<li><strong>Instantly reappears</strong> when you press any remote
button</li>
<li><strong>Changes color</strong> to indicate different modes (white
for normal, cyan for interactive)</li>
<li><strong>Shows mode indicators</strong> like “MOVE ARROWS” when in
move mode</li>
</ul>
<h3 data-number="1.12.3" id="understanding-focus-navigation"><span
class="header-section-number">1.12.3</span> Understanding Focus
Navigation</h3>
<p>Unlike touch screens where you tap directly on what you want, Apple
TV uses spatial navigation. When you press a direction on the D-pad,
King Kiosk uses intelligent proximity detection to determine which
window should receive focus next.</p>
<p><strong>How it works:</strong></p>
<ol type="1">
<li>The system calculates the center point of each visible window</li>
<li>When you press Right, it filters to windows with centers to the
right of your current focus</li>
<li>It scores candidates by distance (closer = better)</li>
<li>The closest window in that direction receives focus</li>
</ol>
<p>This feels natural and intuitive - press toward the window you want,
and focus moves there.</p>
<p><strong>Edge Cases:</strong></p>
<p>If no window exists in the direction you pressed, focus either: -
Stays on the current window, or - Cycles through windows by z-order (if
you keep pressing)</p>
<p>This means you can never get “stuck” - keep pressing a direction and
you’ll eventually cycle through all windows.</p>
<h3 data-number="1.12.4" id="move-mode-rearranging-your-layout"><span
class="header-section-number">1.12.4</span> Move Mode: Rearranging Your
Layout</h3>
<p>In floating mode, you can reposition windows using just the
remote:</p>
<ol type="1">
<li><strong>Focus on the window</strong> you want to move</li>
<li><strong>Press Play/Pause</strong> to enter Move Mode</li>
<li>The focus ring changes and shows <strong>“MOVE ARROWS”</strong></li>
<li><strong>Use the D-pad</strong> to nudge the window (40 pixels per
press)</li>
<li><strong>Press Play/Pause again</strong> (or Menu) to exit Move
Mode</li>
</ol>
<p>While in Move Mode: - The moving window stays focused (you can’t
accidentally navigate away) - Other windows ignore D-pad input - Smooth
animation makes positioning feel responsive</p>
<p><strong>Note:</strong> Move Mode is only available in floating
layout. In tiling mode, window positions are automatic.</p>
<h3 data-number="1.12.5" id="interactive-mode-deep-widget-control"><span
class="header-section-number">1.12.5</span> Interactive Mode: Deep
Widget Control</h3>
<p>Some widgets need more than simple selection - they need to capture
D-pad input for their own purposes. King Kiosk calls this
<strong>Interactive Mode</strong> or <strong>Input Capture</strong>.</p>
<p><strong>Widgets that support Interactive Mode:</strong></p>
<table>
<thead>
<tr>
<th>Widget</th>
<th>D-pad Behavior in Interactive Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PDF Viewer</strong></td>
<td>Left/Right = Previous/Next page</td>
</tr>
<tr>
<td><strong>Media Player</strong></td>
<td>Left/Right = Skip back/forward 10 seconds</td>
</tr>
<tr>
<td><strong>DLNA Player</strong></td>
<td>Full playback controls</td>
</tr>
<tr>
<td><strong>Remote Browser</strong></td>
<td>Navigate web pages</td>
</tr>
<tr>
<td><strong>Games</strong></td>
<td>Full game controls</td>
</tr>
<tr>
<td><strong>Custom WebView</strong></td>
<td>Widget-defined controls</td>
</tr>
</tbody>
</table>
<p><strong>Entering Interactive Mode:</strong></p>
<p>Select a widget that supports it, and it automatically captures D-pad
input. The focus ring turns <strong>cyan with a glow effect</strong> and
displays <strong>“INTERACTIVE”</strong> to indicate the mode change.</p>
<p><strong>Exiting Interactive Mode:</strong></p>
<p>Press the <strong>Menu button</strong> to release input capture and
return to normal window navigation.</p>
<h3 data-number="1.12.6" id="mqtt-control-for-apple-tv"><span
class="header-section-number">1.12.6</span> MQTT Control for Apple
TV</h3>
<p>Every feature of King Kiosk on Apple TV is controllable via MQTT -
perfect for Home Assistant automations, Node-RED flows, or custom
control systems.</p>
<p><strong>All standard window commands work identically on Apple
TV:</strong></p>
<div class="sourceCode" id="cb246"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;open_clock&quot;</span><span class="fu">,</span></span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;living-room-clock&quot;</span><span class="fu">,</span></span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;analog&quot;</span><span class="fu">,</span></span>
<span id="cb246-5"><a href="#cb246-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;theme&quot;</span><span class="fu">:</span> <span class="st">&quot;dark&quot;</span><span class="fu">,</span></span>
<span id="cb246-6"><a href="#cb246-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb246-7"><a href="#cb246-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span></span>
<span id="cb246-8"><a href="#cb246-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">300</span><span class="fu">,</span></span>
<span id="cb246-9"><a href="#cb246-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">300</span></span>
<span id="cb246-10"><a href="#cb246-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb247"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_carousel&quot;</span><span class="fu">,</span></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;family-photos&quot;</span><span class="fu">,</span></span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;items&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/photo1.jpg&quot;</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb247-6"><a href="#cb247-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;image&quot;</span><span class="fu">,</span> <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/photo2.jpg&quot;</span><span class="fu">}</span></span>
<span id="cb247-7"><a href="#cb247-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb247-8"><a href="#cb247-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb247-9"><a href="#cb247-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;auto_play&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb247-10"><a href="#cb247-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;interval&quot;</span><span class="fu">:</span> <span class="dv">10</span></span>
<span id="cb247-11"><a href="#cb247-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb247-12"><a href="#cb247-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Apple TV publishes its state too:</strong></p>
<p>Subscribe to <code>kingkiosk/{device_id}/windows</code> to receive
real-time updates about: - Window list and positions - Focus state
changes - Mode changes (floating/tiling) - Window events (created,
closed, moved, resized)</p>
<h3 data-number="1.12.7" id="remote-browser-full-web-on-your-tv"><span
class="header-section-number">1.12.7</span> Remote Browser: Full Web on
Your TV</h3>
<p>Apple TV has no built-in ability to display web pages directly, which
traditionally limits what TV apps can show. King Kiosk solves this
brilliantly with the <strong>Remote Browser</strong> feature.</p>
<p><strong>How it works:</strong></p>
<ol type="1">
<li>A Remote Browser server (which you set up) renders web pages using a
full browser engine</li>
<li>The rendered output streams to your Apple TV in real-time as
video</li>
<li>Your remote control inputs are sent back to the server so you can
interact with web pages</li>
</ol>
<p>The result? Full, interactive web browsing on your TV - something
Apple doesn’t natively allow.</p>
<p><strong>Setting up Remote Browser:</strong></p>
<div class="sourceCode" id="cb248"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_remote_browser&quot;</span><span class="fu">,</span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;ha-dashboard&quot;</span><span class="fu">,</span></span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;initial_url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://homeassistant.local:8123&quot;</span><span class="fu">,</span></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_connect&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>What you can display:</strong> - Home Assistant Lovelace
dashboards - Grafana monitoring panels - Node-RED dashboards - Any web
application - Custom HTML widgets (with full JavaScript)</p>
<p><strong>Platform Convenience:</strong></p>
<p>On Apple TV, the standard browser commands automatically use Remote
Browser: - <code>open_browser</code> -&gt; Creates a Remote Browser -
<code>open_web</code> -&gt; Creates a Remote Browser -
<code>open_simple_web</code> -&gt; Creates a Remote Browser</p>
<p>This means your automations work across all platforms without
modification. Send the same <code>open_browser</code> command to an iPad
and an Apple TV - each uses its optimal rendering method
automatically.</p>
<p><strong>Custom Widgets via Remote Browser:</strong></p>
<p>The full Custom Widget SDK works on Apple TV through Remote Browser:
- <code>KingKiosk.onCommand()</code> receives MQTT commands -
<code>KingKiosk.sendCommand()</code> sends commands back -
<code>KingKiosk.publishTelemetry()</code> publishes sensor data -
<code>KingKiosk.storage.*</code> persists widget state</p>
<p>Build your custom widget once, deploy it everywhere - including Apple
TV.</p>
<h3 data-number="1.12.8" id="apple-tv-tips-and-best-practices"><span
class="header-section-number">1.12.8</span> Apple TV Tips and Best
Practices</h3>
<p><strong>Layout Design for 10-Foot UI:</strong> - Use larger fonts
(minimum 24pt for body text) - High contrast colors work best on TVs -
Leave generous margins - TV overscan can clip edges - Test your layout
from across the room</p>
<p><strong>Performance on Apple TV:</strong> - Video playback is
hardware-accelerated and smooth - Limit simultaneous video streams to
2-3 for best performance - Remote Browser works best on local network
(low latency) - Complex web dashboards may need a powerful Remote
Browser server</p>
<p><strong>Ideal Use Cases:</strong> - Smart home control center in the
living room - Digital photo frame with weather and time overlay -
Security camera monitor with multiple feeds - Meeting room display with
calendar and room status - Retail displays with multiple content
zones</p>
<p><strong>Automation Ideas:</strong></p>
<p><em>“Movie mode” when Apple TV starts playing:</em></p>
<div class="sourceCode" id="cb249"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">automation</span><span class="kw">:</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">alias</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;King Kiosk Movie Mode&quot;</span></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">trigger</span><span class="kw">:</span></span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">platform</span><span class="kw">:</span><span class="at"> state</span></span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">entity_id</span><span class="kw">:</span><span class="at"> media_player.apple_tv</span></span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">to</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;playing&#39;</span></span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">action</span><span class="kw">:</span></span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">service</span><span class="kw">:</span><span class="at"> mqtt.publish</span></span>
<span id="cb249-9"><a href="#cb249-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb249-10"><a href="#cb249-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/living_room_tv/system/cmd&quot;</span></span>
<span id="cb249-11"><a href="#cb249-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">payload</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{&quot;command&quot;: &quot;close_all_windows&quot;}&#39;</span></span></code></pre></div>
<p><em>Show security cameras when doorbell rings:</em></p>
<div class="sourceCode" id="cb250"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">automation</span><span class="kw">:</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">alias</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Doorbell Camera on TV&quot;</span></span>
<span id="cb250-3"><a href="#cb250-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">trigger</span><span class="kw">:</span></span>
<span id="cb250-4"><a href="#cb250-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">platform</span><span class="kw">:</span><span class="at"> state</span></span>
<span id="cb250-5"><a href="#cb250-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">entity_id</span><span class="kw">:</span><span class="at"> binary_sensor.doorbell</span></span>
<span id="cb250-6"><a href="#cb250-6" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">to</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;on&#39;</span></span>
<span id="cb250-7"><a href="#cb250-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">action</span><span class="kw">:</span></span>
<span id="cb250-8"><a href="#cb250-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">service</span><span class="kw">:</span><span class="at"> mqtt.publish</span></span>
<span id="cb250-9"><a href="#cb250-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb250-10"><a href="#cb250-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/living_room_tv/system/cmd&quot;</span></span>
<span id="cb250-11"><a href="#cb250-11" aria-hidden="true" tabindex="-1"></a><span class="fu">          payload</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb250-12"><a href="#cb250-12" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb250-13"><a href="#cb250-13" aria-hidden="true" tabindex="-1"></a>              &quot;command&quot;: &quot;play_media&quot;,</span>
<span id="cb250-14"><a href="#cb250-14" aria-hidden="true" tabindex="-1"></a>              &quot;window_id&quot;: &quot;doorbell-cam&quot;,</span>
<span id="cb250-15"><a href="#cb250-15" aria-hidden="true" tabindex="-1"></a>              &quot;url&quot;: &quot;rtsp://camera.local/doorbell&quot;,</span>
<span id="cb250-16"><a href="#cb250-16" aria-hidden="true" tabindex="-1"></a>              &quot;width&quot;: 640,</span>
<span id="cb250-17"><a href="#cb250-17" aria-hidden="true" tabindex="-1"></a>              &quot;height&quot;: 480,</span>
<span id="cb250-18"><a href="#cb250-18" aria-hidden="true" tabindex="-1"></a>              &quot;x&quot;: 100,</span>
<span id="cb250-19"><a href="#cb250-19" aria-hidden="true" tabindex="-1"></a>              &quot;y&quot;: 100</span>
<span id="cb250-20"><a href="#cb250-20" aria-hidden="true" tabindex="-1"></a>            }</span></code></pre></div>
<hr />
<h2 data-number="1.13" id="feature-server"><span
class="header-section-number">1.13</span> 12. Feature Server</h2>
<p>The Feature Server is the powerhouse behind King Kiosk’s most
advanced capabilities. It provides features that go beyond what a single
tablet can do on its own — things like whole-house intercom, running a
browser on AppleTV, streaming your tablet’s camera to Go2RTC, Frigate,
Home Assistant, and bridging your entire Home Assistant enabled smart
home to MQTT.</p>
<p>Think of it as the brain that connects all your King Kiosk devices
together and ties them into your broader smart home ecosystem.</p>
<h3 data-number="1.13.1" id="what-is-the-feature-server"><span
class="header-section-number">1.13.1</span> What is the Feature
Server?</h3>
<p>The Feature Server is a set of services built into the KingKiosk Core
server. You don’t install it separately — it’s already there. Each
feature can be enabled or disabled independently based on what you need.
The four main features are:</p>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>What It Does</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Intercom &amp; Broadcast</strong></td>
<td>Send live video and audio from one kiosk to all others</td>
</tr>
<tr>
<td><strong>Remote Browser</strong></td>
<td>Run a full Chromium browser on your AppleTV</td>
</tr>
<tr>
<td><strong>RTSP Camera Export</strong></td>
<td>Turn your tablet into a security camera visible in Home Assistant,
Frigate, etc.</td>
</tr>
<tr>
<td><strong>Home Assistant MQTT Bridge</strong></td>
<td>Control all your Home Assistant devices through MQTT</td>
</tr>
<tr>
<td><strong>High-Quality TTS (Piper)</strong></td>
<td>Natural-sounding text-to-speech with 100+ voices in 30+
languages</td>
</tr>
</tbody>
</table>
<p><strong>Important:</strong> When you enable the Feature Server, local
on-device object/person detection and facial recognition are disabled.
The camera stream is sent to the Feature Server instead of being
processed locally. If you need local AI detection, keep the Feature
Server disabled.</p>
<h4 data-number="1.13.1.1" id="automatic-feature-server-discovery"><span
class="header-section-number">1.13.1.1</span> Automatic Feature Server
Discovery</h4>
<p>King Kiosk can automatically find and connect to your Feature Server
without you having to manually enter its address. This makes setup
easier, especially if you have multiple devices or if your server’s IP
address changes.</p>
<p><strong>How It Works:</strong></p>
<p>When your KingKiosk Core server starts up, it publishes its location
on the MQTT topic <code>kingkiosk/core3/api</code>. This message
contains the server’s URL and version information. Every King Kiosk
client device listens to this topic and automatically updates its
connection settings when it sees this announcement.</p>
<p>Think of it like your server saying “Hey everyone, I’m here at this
address!” and all your devices responding “Got it, connecting now!”</p>
<p><strong>Setting Up Autodiscovery:</strong></p>
<ol type="1">
<li><strong>Make sure MQTT is working</strong> - Both your Feature
Server and your King Kiosk devices must be connected to the same MQTT
broker</li>
<li><strong>Start your Feature Server</strong> - When it starts, it
automatically announces itself</li>
<li><strong>Your devices connect automatically</strong> - No manual
configuration needed</li>
</ol>
<p><strong>Manual Override:</strong></p>
<p>Sometimes you might want to manually set the Feature Server address
(for testing, using a different server, etc.). In the King Kiosk
settings under <strong>Feature Server</strong>, you can:</p>
<ol type="1">
<li>Enter a specific server address (like
<code>http://192.168.1.100:3000</code>)</li>
<li>Enable <strong>Manual Override Lock</strong> - This prevents
autodiscovery from changing your manual setting</li>
<li>When locked, the device will ignore autodiscovery announcements and
only use your manually configured address</li>
</ol>
<p>To re-enable autodiscovery, simply disable the manual override lock.
The device will then listen for server announcements again.</p>
<p><strong>Troubleshooting:</strong></p>
<ul>
<li><strong>Device not connecting?</strong> Check that both device and
server are connected to the same MQTT broker</li>
<li><strong>Server address keeps changing?</strong> Enable manual
override lock to force a specific address</li>
<li><strong>Want to use a different server temporarily?</strong> Enter
the address manually and lock it, then unlock when done</li>
</ul>
<hr />
<h3 data-number="1.13.2" id="high-quality-text-to-speech-piper"><span
class="header-section-number">1.13.2</span> High-Quality Text-to-Speech
(Piper)</h3>
<p>When the Feature Server is connected, TTS commands automatically use
the Piper speech synthesis engine instead of the device’s built-in TTS.
Piper produces natural-sounding speech with a large library of voices
across many languages.</p>
<h4 data-number="1.13.2.1" id="how-it-works-1"><span
class="header-section-number">1.13.2.1</span> How It Works</h4>
<p>You don’t need to change any of your existing TTS automations. The
same MQTT commands work in both modes:</p>
<ul>
<li><strong>Feature Server connected</strong> — Speech is synthesized on
the server using Piper, then played back as audio on the device. Higher
quality, more voices, consistent across all devices.</li>
<li><strong>Feature Server disconnected</strong> — Falls back to the
device’s built-in TTS engine (FlutterTts or AVSpeechSynthesizer). Works
offline.</li>
</ul>
<h4 data-number="1.13.2.2" id="choosing-a-voice"><span
class="header-section-number">1.13.2.2</span> Choosing a Voice</h4>
<p>First, discover what voices are available:</p>
<div class="sourceCode" id="cb251"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;getVoices&quot;</span><span class="fu">,</span></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;en_US&quot;</span><span class="fu">,</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/my_device/system/response&quot;</span></span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The response includes voice details like <code>voiceId</code>,
<code>quality</code>, and whether the voice is already installed. Then
use a voice in your speak commands:</p>
<div class="sourceCode" id="cb252"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Dinner is ready!&quot;</span><span class="fu">,</span></span>
<span id="cb252-4"><a href="#cb252-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;voice&quot;</span><span class="fu">:</span> <span class="st">&quot;en_US-lessac-medium&quot;</span></span>
<span id="cb252-5"><a href="#cb252-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.13.2.3" id="installing-voices"><span
class="header-section-number">1.13.2.3</span> Installing Voices</h4>
<p>If a voice isn’t installed yet, you can pull it:</p>
<div class="sourceCode" id="cb253"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;tts&quot;</span><span class="fu">,</span></span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;voice_pull&quot;</span><span class="fu">,</span></span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;voice&quot;</span><span class="fu">:</span> <span class="st">&quot;en_US-lessac-medium&quot;</span></span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>If <code>auto_download</code> is enabled in the server config, voices
are downloaded automatically on first use.</p>
<h4 data-number="1.13.2.4"
id="home-assistant-automation-example-1"><span
class="header-section-number">1.13.2.4</span> Home Assistant Automation
Example</h4>
<div class="sourceCode" id="cb254"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">automation</span><span class="kw">:</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">alias</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Announce Front Door&quot;</span></span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">trigger</span><span class="kw">:</span></span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">platform</span><span class="kw">:</span><span class="at"> state</span></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">entity_id</span><span class="kw">:</span><span class="at"> binary_sensor.front_door</span></span>
<span id="cb254-6"><a href="#cb254-6" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">to</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;on&#39;</span></span>
<span id="cb254-7"><a href="#cb254-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">action</span><span class="kw">:</span></span>
<span id="cb254-8"><a href="#cb254-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">service</span><span class="kw">:</span><span class="at"> mqtt.publish</span></span>
<span id="cb254-9"><a href="#cb254-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb254-10"><a href="#cb254-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/kitchen_tablet/system/cmd&quot;</span></span>
<span id="cb254-11"><a href="#cb254-11" aria-hidden="true" tabindex="-1"></a><span class="fu">          payload</span><span class="kw">: </span><span class="ch">&gt;</span></span>
<span id="cb254-12"><a href="#cb254-12" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb254-13"><a href="#cb254-13" aria-hidden="true" tabindex="-1"></a>              &quot;command&quot;: &quot;tts&quot;,</span>
<span id="cb254-14"><a href="#cb254-14" aria-hidden="true" tabindex="-1"></a>              &quot;text&quot;: &quot;The front door just opened.&quot;,</span>
<span id="cb254-15"><a href="#cb254-15" aria-hidden="true" tabindex="-1"></a>              &quot;voice&quot;: &quot;en_US-lessac-medium&quot;,</span>
<span id="cb254-16"><a href="#cb254-16" aria-hidden="true" tabindex="-1"></a>              &quot;volume&quot;: 0.8</span>
<span id="cb254-17"><a href="#cb254-17" aria-hidden="true" tabindex="-1"></a>            }</span></code></pre></div>
<hr />
<h3 data-number="1.13.3" id="intercom-broadcast"><span
class="header-section-number">1.13.3</span> Intercom &amp;
Broadcast</h3>
<p>Intercom lets you broadcast live audio and video from one King Kiosk
device to all other enabled devices. Walk up to any kiosk, press a
button, and instantly appear on every other screen — like a whole-house
intercom system using your existing tablets.</p>
<h4 data-number="1.13.3.1" id="why-use-it"><span
class="header-section-number">1.13.3.1</span> Why Use It?</h4>
<p>Instead of yelling across the house, making phone calls for a quick
message, or relying on one-way smart speaker announcements, King Kiosk
Intercom gives you:</p>
<ul>
<li><strong>One-button broadcasting</strong> — Start instantly from any
kiosk</li>
<li><strong>Video and audio</strong> — They see and hear you</li>
<li><strong>Every room at once</strong> — All enabled kiosks receive the
broadcast</li>
<li><strong>No extra app needed</strong> — It’s built into your
wall-mounted tablets</li>
</ul>
<h4 data-number="1.13.3.2" id="how-it-works-2"><span
class="header-section-number">1.13.3.2</span> How It Works</h4>
<pre><code>                              ┌─────────────────┐
                         ┌───&gt;│ Living Room     │ speakers + screen
                         │    └─────────────────┘
┌─────────────────┐      │    ┌─────────────────┐
│ Kitchen Kiosk   │ ─────┼───&gt;│ Bedroom         │ speakers + screen
│ &quot;Hey everyone!&quot; │      │    └─────────────────┘
└─────────────────┘      │    ┌─────────────────┐
      SENDER             └───&gt;│ Office          │ speakers + screen
                              └─────────────────┘
                                  RECEIVERS</code></pre>
<ol type="1">
<li>You start a broadcast from one kiosk</li>
<li>All other enabled kiosks receive your video and audio</li>
<li>You see yourself on your own screen as a preview (but don’t hear
yourself — no echo)</li>
<li>You stop the broadcast when you’re done</li>
</ol>
<h4 data-number="1.13.3.3" id="getting-started-1"><span
class="header-section-number">1.13.3.3</span> Getting Started</h4>
<p><strong>Enable intercom on each device</strong> — Before a kiosk can
participate, you need to enable intercom in the Feature Server
settings:</p>
<ol type="1">
<li>Open <strong>Settings</strong> on your King Kiosk device</li>
<li>Go to the <strong>Feature Server</strong> section</li>
<li>Make sure the Feature Server is connected (enter your server
hostname/IP if needed)</li>
<li>Toggle <strong>Enable intercom</strong> on</li>
</ol>
<p>Do this for each kiosk you want to be part of the intercom system.
The device will automatically join the default intercom group.</p>
<h4 data-number="1.13.3.4"
id="adding-an-intercom-button-to-your-kiosk"><span
class="header-section-number">1.13.3.4</span> Adding an Intercom Button
to Your Kiosk</h4>
<p>The easiest way to use intercom is to add a dedicated toggle button
directly on your kiosk screen. This creates a tap-to-talk button that
turns green when broadcasting and gray when idle:</p>
<div class="sourceCode" id="cb256"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;mqtt_button&quot;</span><span class="fu">,</span></span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;configure&quot;</span><span class="fu">,</span></span>
<span id="cb256-4"><a href="#cb256-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;intercom_btn&quot;</span><span class="fu">,</span></span>
<span id="cb256-5"><a href="#cb256-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mode&quot;</span><span class="fu">:</span> <span class="st">&quot;icon_button&quot;</span><span class="fu">,</span></span>
<span id="cb256-6"><a href="#cb256-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;publish_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/{deviceId}/intercom/toggle&quot;</span><span class="fu">,</span></span>
<span id="cb256-7"><a href="#cb256-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;subscription_topic&quot;</span><span class="fu">:</span> <span class="st">&quot;kingkiosk/{deviceId}/intercom/status&quot;</span><span class="fu">,</span></span>
<span id="cb256-8"><a href="#cb256-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;status_path&quot;</span><span class="fu">:</span> <span class="st">&quot;broadcasting&quot;</span><span class="fu">,</span></span>
<span id="cb256-9"><a href="#cb256-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icon_on&quot;</span><span class="fu">:</span> <span class="st">&quot;mic&quot;</span><span class="fu">,</span></span>
<span id="cb256-10"><a href="#cb256-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icon_off&quot;</span><span class="fu">:</span> <span class="st">&quot;mic_off&quot;</span><span class="fu">,</span></span>
<span id="cb256-11"><a href="#cb256-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color_on&quot;</span><span class="fu">:</span> <span class="st">&quot;0xFF4CAF50&quot;</span><span class="fu">,</span></span>
<span id="cb256-12"><a href="#cb256-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;color_off&quot;</span><span class="fu">:</span> <span class="st">&quot;0xFF757575&quot;</span><span class="fu">,</span></span>
<span id="cb256-13"><a href="#cb256-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Intercom&quot;</span></span>
<span id="cb256-14"><a href="#cb256-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Replace <code>{deviceId}</code> with your device’s ID. Tap the button
to start broadcasting, tap again to stop. The icon and color update
automatically based on the intercom status.</p>
<p>When you’re broadcasting, a small self-view of your camera is
overlayed into the mic icon so you can see what others are seeing. Audio
is muted on the self-view to prevent echo — you only see yourself, you
don’t hear yourself.</p>
<h4 data-number="1.13.3.5"
id="home-assistant-automation-example-2"><span
class="header-section-number">1.13.3.5</span> Home Assistant Automation
Example</h4>
<p>Broadcast “dinner’s ready” when a button is pressed:</p>
<div class="sourceCode" id="cb257"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">automation</span><span class="kw">:</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">alias</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Dinner Announcement&quot;</span></span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">trigger</span><span class="kw">:</span></span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">platform</span><span class="kw">:</span><span class="at"> state</span></span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">entity_id</span><span class="kw">:</span><span class="at"> input_button.dinner_ready</span></span>
<span id="cb257-6"><a href="#cb257-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">action</span><span class="kw">:</span></span>
<span id="cb257-7"><a href="#cb257-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">service</span><span class="kw">:</span><span class="at"> mqtt.publish</span></span>
<span id="cb257-8"><a href="#cb257-8" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb257-9"><a href="#cb257-9" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/kitchen-kiosk/intercom/start&quot;</span></span>
<span id="cb257-10"><a href="#cb257-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">payload</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{&quot;group&quot;: &quot;default&quot;}&#39;</span></span>
<span id="cb257-11"><a href="#cb257-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">delay</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;00:00:10&quot;</span></span>
<span id="cb257-12"><a href="#cb257-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">service</span><span class="kw">:</span><span class="at"> mqtt.publish</span></span>
<span id="cb257-13"><a href="#cb257-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb257-14"><a href="#cb257-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kingkiosk/kitchen-kiosk/intercom/stop&quot;</span></span>
<span id="cb257-15"><a href="#cb257-15" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">payload</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{}&#39;</span></span></code></pre></div>
<h4 data-number="1.13.3.6" id="common-use-cases"><span
class="header-section-number">1.13.3.6</span> Common Use Cases</h4>
<ul>
<li><strong>Whole-house announcement</strong> — “Dinner’s ready!” from
the kitchen to everywhere</li>
<li><strong>Doorbell response</strong> — Broadcast from the front door
kiosk so all rooms see who’s there</li>
</ul>
<h4 data-number="1.13.3.7" id="privacy"><span
class="header-section-number">1.13.3.7</span> Privacy</h4>
<ul>
<li>Any device can opt out by disabling intercom at any time</li>
<li>Only devices with intercom enabled can send or receive</li>
<li>Broadcasts are live only — nothing is recorded or stored</li>
</ul>
<h4 data-number="1.13.3.8" id="troubleshooting"><span
class="header-section-number">1.13.3.8</span> Troubleshooting</h4>
<ul>
<li><strong>Broadcast not reaching other devices?</strong> Make sure
receivers have intercom enabled and are in the same group.</li>
<li><strong>Hearing yourself (echo)?</strong> The sender should only see
video, not hear audio. Check that the client properly handles the
<code>isSender</code> flag.</li>
<li><strong>Video/audio won’t auto-play?</strong> KingKiosk handles this
automatically, but web browsers may require user interaction first.</li>
</ul>
<hr />
<h3 data-number="1.13.4" id="remote-browser"><span
class="header-section-number">1.13.4</span> Remote Browser</h3>
<p>Remote Browser lets you display and control a full web browser
running on your server, streamed directly to your King Kiosk tablet. The
heavy lifting happens on your server — your tablet just shows the video
and sends back your touches.</p>
<h4 data-number="1.13.4.1" id="why-use-it-1"><span
class="header-section-number">1.13.4.1</span> Why Use It?</h4>
<p>Tablets and kiosks have limitations — weak hardware, limited memory,
battery drain from complex sites, and logins that get lost on restart.
Remote Browser solves all of this:</p>
<ul>
<li><strong>Server does the work</strong> — A full Chromium browser runs
on your powerful server</li>
<li><strong>Tablet just displays</strong> — It only needs to show a
video stream</li>
<li><strong>Stay logged in</strong> — Sessions persist across restarts
when you use a persistence ID</li>
<li><strong>Touch or keyboard</strong> — Control works however you
prefer</li>
</ul>
<h4 data-number="1.13.4.2" id="how-it-works-3"><span
class="header-section-number">1.13.4.2</span> How It Works</h4>
<pre><code>┌─────────────────┐      video stream      ┌─────────────────┐
│  KingKiosk App  │ &lt;──────────────────── │ KingKiosk Server│
│  (your tablet)  │                        │ (runs Chromium) │
│                 │ ──────────────────── &gt; │                 │
└─────────────────┘   touch/mouse/keys     └─────────────────┘</code></pre>
<ol type="1">
<li>KingKiosk Server runs a headless Chromium browser</li>
<li>Video of the browser is captured and streamed to your tablet</li>
<li>Your touches are sent back to the server and applied to the
browser</li>
<li>Everything happens in real-time with low latency</li>
</ol>
<h4 data-number="1.13.4.3" id="creating-a-remote-browser"><span
class="header-section-number">1.13.4.3</span> Creating a Remote
Browser</h4>
<p>Send this MQTT command to your device’s system topic to open a remote
browser window:</p>
<div class="sourceCode" id="cb259"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;create_remote_browser&quot;</span><span class="fu">,</span></span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb259-4"><a href="#cb259-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;initial_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://www.google.com&quot;</span><span class="fu">,</span></span>
<span id="cb259-5"><a href="#cb259-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auto_connect&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb259-6"><a href="#cb259-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 29%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>window_id</code></td>
<td>yes</td>
<td>Unique ID for this browser tile</td>
</tr>
<tr>
<td><code>initial_url</code></td>
<td>yes</td>
<td>URL to load when the session starts</td>
</tr>
<tr>
<td><code>auto_connect</code></td>
<td>yes</td>
<td>Always set to <code>true</code> to connect immediately</td>
</tr>
<tr>
<td><code>name</code></td>
<td>no</td>
<td>Title shown on the tile</td>
</tr>
<tr>
<td><code>video_profile</code></td>
<td>no</td>
<td>Quality: <code>auto</code>, <code>720p30</code>,
<code>1080p30</code>, <code>1080p60</code></td>
</tr>
<tr>
<td><code>show_overlay</code></td>
<td>no</td>
<td>Show URL bar and stats overlay</td>
</tr>
</tbody>
</table>
<p>The server automatically picks the best video encoder for your
hardware (NVIDIA GPU, Intel/AMD GPU, Raspberry Pi, or software
fallback).</p>
<h4 data-number="1.13.4.4" id="navigating-to-a-url"><span
class="header-section-number">1.13.4.4</span> Navigating to a URL</h4>
<p>Once a remote browser session is running, you can navigate it:</p>
<div class="sourceCode" id="cb260"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;navigate_remote_browser&quot;</span><span class="fu">,</span></span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;window_id&quot;</span><span class="fu">:</span> <span class="st">&quot;browser_1&quot;</span><span class="fu">,</span></span>
<span id="cb260-4"><a href="#cb260-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://youtube.com&quot;</span></span>
<span id="cb260-5"><a href="#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.13.4.5" id="controlling-the-browser"><span
class="header-section-number">1.13.4.5</span> Controlling the
Browser</h4>
<ul>
<li><strong>Tap</strong> = Click</li>
<li><strong>Swipe</strong> = Scroll</li>
<li><strong>Long press</strong> = Right-click</li>
<li><strong>Physical or on-screen keyboard</strong> = Type text</li>
</ul>
<h4 data-number="1.13.4.6" id="common-use-cases-1"><span
class="header-section-number">1.13.4.6</span> Common Use Cases</h4>
<ul>
<li><strong>Dashboard kiosk</strong> — Display a Home Assistant
dashboard at full quality</li>
<li><strong>Spotify player</strong> — Stream music with album art on
your wall display</li>
<li><strong>YouTube TV</strong> — Turn a tablet into a smart TV
display</li>
<li><strong>Security camera viewer</strong> — View Frigate or other
camera feeds in a browser</li>
</ul>
<h4 data-number="1.13.4.7" id="troubleshooting-1"><span
class="header-section-number">1.13.4.7</span> Troubleshooting</h4>
<ul>
<li><strong>Session won’t start?</strong> Check server logs, verify
Chromium is installed, and make sure the Feature Server is
connected.</li>
<li><strong>Video is laggy?</strong> Try a lower quality profile, check
WiFi, or reduce concurrent sessions.</li>
<li><strong>Black screen?</strong> Wait a moment for initial load, or
try a simpler URL first.</li>
</ul>
<hr />
<h3 data-number="1.13.5" id="rtsp-camera-export"><span
class="header-section-number">1.13.5</span> RTSP Camera Export</h3>
<p>RTSP Export lets you stream live video and audio from your King Kiosk
tablet’s camera to your smart home system. Once enabled, your tablet
appears as a camera in Home Assistant, Frigate, or any app that supports
RTSP streams.</p>
<p><strong>In simple terms:</strong> Turn your wall-mounted tablet into
a security camera that shows up in Home Assistant just like your other
cameras.</p>
<h4 data-number="1.13.5.1" id="why-use-it-2"><span
class="header-section-number">1.13.5.1</span> Why Use It?</h4>
<p>By default, King Kiosk only sends periodic snapshots (every few
seconds) for AI detection. That works great for person detection and
presence sensing, but it’s not ideal when you want to:</p>
<ul>
<li>Watch a <strong>live video feed</strong> of what the tablet
sees</li>
<li><strong>Record continuous video</strong> to Frigate</li>
<li>Use the tablet as a <strong>video doorbell or baby
monitor</strong></li>
<li>See <strong>real-time motion</strong> in Home Assistant</li>
</ul>
<p>RTSP Export sends a continuous live video stream through go2rtc,
making your tablet work exactly like any other security camera.</p>
<h4 data-number="1.13.5.2" id="how-it-works-4"><span
class="header-section-number">1.13.5.2</span> How It Works</h4>
<pre><code>┌─────────────────┐     live video      ┌─────────────┐     standard RTSP     ┌─────────────────┐
│  KingKiosk App  │ ────────────────&gt;   │   go2rtc    │ ──────────────────&gt;   │ Home Assistant  │
│  (your tablet)  │                     │  (bridge)   │                       │    / Frigate    │
└─────────────────┘                     └─────────────┘                       └─────────────────┘</code></pre>
<h4 data-number="1.13.5.3" id="setup"><span
class="header-section-number">1.13.5.3</span> Setup</h4>
<p><strong>Step 1:</strong> Make sure go2rtc is running. Most Home
Assistant users already have it (it’s built into Frigate). Check by
opening <code>http://your-home-assistant:1984</code>.</p>
<p><strong>Step 2:</strong> Configure KingKiosk Server. For Home
Assistant add-on users, go to Settings &gt; Add-ons &gt; KingKiosk Core
&gt; Configuration and set: - <code>go2rtc_url</code>:
<code>rtsp://your-go2rtc-ip:8554</code> - <code>go2rtc_api_url</code>:
<code>http://your-go2rtc-ip:1984</code></p>
<p>For standalone users, add to <code>config.toml</code>:</p>
<div class="sourceCode" id="cb262"><pre
class="sourceCode toml"><code class="sourceCode toml"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[gstreamer]</span></span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="dt">go2rtc_url</span> <span class="op">=</span> <span class="st">&quot;rtsp://192.168.1.100:8554&quot;</span></span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="dt">go2rtc_api_url</span> <span class="op">=</span> <span class="st">&quot;http://192.168.1.100:1984&quot;</span></span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="dt">go2rtc_manage_streams</span> <span class="op">=</span> <span class="cn">true</span></span></code></pre></div>
<p><strong>Step 3:</strong> Enable RTSP Export in KingKiosk’s Feature
Server Settings and turn the toggle on.</p>
<p><strong>Step 4:</strong> Your device automatically appears in go2rtc
using its device name (e.g., <code>kitchen-tablet</code>). View it at
<code>rtsp://your-go2rtc:8554/kitchen-tablet</code>.</p>
<h4 data-number="1.13.5.4" id="adding-to-home-assistant"><span
class="header-section-number">1.13.5.4</span> Adding to Home
Assistant</h4>
<p><strong>Generic Camera:</strong> Settings &gt; Devices &amp; Services
&gt; Add Integration &gt; Generic Camera. Enter
<code>rtsp://your-go2rtc:8554/kitchen-tablet</code>.</p>
<p><strong>Frigate:</strong></p>
<div class="sourceCode" id="cb263"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cameras</span><span class="kw">:</span></span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">kitchen_tablet</span><span class="kw">:</span></span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ffmpeg</span><span class="kw">:</span></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">inputs</span><span class="kw">:</span></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> rtsp://your-go2rtc:8554/kitchen-tablet</span></span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">roles</span><span class="kw">:</span></span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="kw">-</span><span class="at"> detect</span></span>
<span id="cb263-8"><a href="#cb263-8" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="kw">-</span><span class="at"> record</span></span></code></pre></div>
<p><strong>WebRTC Camera Card (lowest latency):</strong></p>
<div class="sourceCode" id="cb264"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> custom:webrtc-camera</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="fu">url</span><span class="kw">:</span><span class="at"> kitchen-tablet</span></span></code></pre></div>
<h4 data-number="1.13.5.5" id="snapshots-vs.-rtsp-export"><span
class="header-section-number">1.13.5.5</span> Snapshots vs. RTSP
Export</h4>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 48%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Snapshots (Default)</th>
<th>RTSP Export</th>
</tr>
</thead>
<tbody>
<tr>
<td>Use case</td>
<td>AI detection, periodic checks</td>
<td>Live viewing, recording</td>
</tr>
<tr>
<td>Updates</td>
<td>Every few seconds</td>
<td>Continuous (30fps)</td>
</tr>
<tr>
<td>Bandwidth</td>
<td>Very low</td>
<td>Higher (like a security camera)</td>
</tr>
<tr>
<td>CPU usage</td>
<td>Low</td>
<td>Moderate</td>
</tr>
<tr>
<td>Best for</td>
<td>Person detection, presence sensing</td>
<td>Baby monitor, security camera</td>
</tr>
</tbody>
</table>
<p>You can use both at the same time — snapshots for AI detection and
RTSP Export for live viewing.</p>
<h4 data-number="1.13.5.6" id="troubleshooting-2"><span
class="header-section-number">1.13.5.6</span> Troubleshooting</h4>
<ul>
<li><strong>Stream not showing in go2rtc?</strong> Check server logs,
verify go2rtc is reachable, confirm your config URLs.</li>
<li><strong>Stream won’t play?</strong> Wait a few seconds for the first
keyframe, or try VLC with TCP mode.</li>
<li><strong>No audio?</strong> KingKiosk uses Opus format. Add
<code>default_query: video=h264&amp;audio=aac</code> to your go2rtc
config to convert to AAC.</li>
<li><strong>Choppy video?</strong> Use a wired connection if possible,
or check WiFi signal strength.</li>
</ul>
<hr />
<h3 data-number="1.13.6" id="home-assistant-mqtt-bridge"><span
class="header-section-number">1.13.6</span> Home Assistant MQTT
Bridge</h3>
<p>The Home Assistant MQTT Bridge is a two-way communication system that
connects your Home Assistant smart home to MQTT. It makes all your Home
Assistant devices (lights, switches, sensors, etc.) available through
MQTT, and lets you control them by sending MQTT messages.</p>
<p><strong>In simple terms:</strong> It’s a translator that lets King
Kiosk (and any other MQTT-connected system) see and control everything
in your Home Assistant setup.</p>
<h4 data-number="1.13.6.1" id="why-use-it-3"><span
class="header-section-number">1.13.6.1</span> Why Use It?</h4>
<p>Home Assistant is great at managing smart home devices, but sometimes
other systems need to monitor or control those devices too. By bridging
Home Assistant to MQTT, you can:</p>
<ul>
<li><strong>Connect external systems</strong> that don’t work with Home
Assistant directly</li>
<li><strong>Build custom automations</strong> using tools that
understand MQTT</li>
<li><strong>Monitor your entire home</strong> from any MQTT-capable
application</li>
<li><strong>Control devices</strong> from King Kiosk or other systems
without going through the HA API</li>
</ul>
<h4 data-number="1.13.6.2" id="how-it-works-5"><span
class="header-section-number">1.13.6.2</span> How It Works</h4>
<p>The bridge operates in both directions:</p>
<ul>
<li><strong>Home Assistant to MQTT:</strong> When something changes in
HA (a light turns on, a temperature changes, motion is detected), the
bridge immediately publishes that update to MQTT.</li>
<li><strong>MQTT to Home Assistant:</strong> When you send a command
through MQTT (turn on a light, set a thermostat), the bridge forwards it
to Home Assistant.</li>
</ul>
<h4 data-number="1.13.6.3" id="what-gets-shared"><span
class="header-section-number">1.13.6.3</span> What Gets Shared</h4>
<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>What It Contains</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Entity States</strong></td>
<td>Current status of all devices — lights (on/off, brightness, color),
sensors (temperature, humidity), switches, covers, climate</td>
</tr>
<tr>
<td><strong>Entity Registry</strong></td>
<td>Device names, room assignments, manufacturer info, unique IDs</td>
</tr>
<tr>
<td><strong>Device Registry</strong></td>
<td>Physical device info — firmware versions, connection status, serial
numbers</td>
</tr>
<tr>
<td><strong>Area Registry</strong></td>
<td>Rooms and locations in your home</td>
</tr>
<tr>
<td><strong>Services Registry</strong></td>
<td>All available actions and their parameters</td>
</tr>
</tbody>
</table>
<h4 data-number="1.13.6.4" id="setup-1"><span
class="header-section-number">1.13.6.4</span> Setup</h4>
<p><strong>Step 1:</strong> Get a Home Assistant Long-Lived Access
Token. Go to your HA profile &gt; Long-Lived Access Tokens &gt; Create
Token.</p>
<p><strong>Step 2:</strong> Configure the bridge in your
<code>config.toml</code>:</p>
<div class="sourceCode" id="cb265"><pre
class="sourceCode toml"><code class="sourceCode toml"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[home_assistant_bridge]</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="dt">enabled</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a><span class="dt">ha_url</span> <span class="op">=</span> <span class="st">&quot;http://homeassistant.local:8123&quot;</span></span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true" tabindex="-1"></a><span class="dt">ha_token</span> <span class="op">=</span> <span class="st">&quot;YOUR_LONG_LIVED_TOKEN_HERE&quot;</span></span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true" tabindex="-1"></a><span class="dt">mqtt_prefix</span> <span class="op">=</span> <span class="st">&quot;kingkiosk/ha&quot;</span></span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true" tabindex="-1"></a><span class="dt">publish_registry</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true" tabindex="-1"></a><span class="dt">publish_services</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb265-8"><a href="#cb265-8" aria-hidden="true" tabindex="-1"></a><span class="dt">publish_attributes</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb265-9"><a href="#cb265-9" aria-hidden="true" tabindex="-1"></a><span class="dt">retain_state</span> <span class="op">=</span> <span class="cn">true</span></span></code></pre></div>
<p><strong>Step 3 (optional):</strong> Filter what gets shared if you
have many devices:</p>
<div class="sourceCode" id="cb266"><pre
class="sourceCode toml"><code class="sourceCode toml"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="dt">include_domains</span> <span class="op">=</span> <span class="op">[</span><span class="st">&quot;light&quot;</span><span class="op">,</span> <span class="st">&quot;switch&quot;</span><span class="op">,</span> <span class="st">&quot;sensor&quot;</span><span class="op">]</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="dt">exclude_entity_globs</span> <span class="op">=</span> <span class="op">[</span><span class="st">&quot;*_battery&quot;</span><span class="op">]</span></span></code></pre></div>
<h4 data-number="1.13.6.5" id="reading-device-states"><span
class="header-section-number">1.13.6.5</span> Reading Device States</h4>
<p>Subscribe to MQTT topics following this pattern:</p>
<pre><code>kingkiosk/ha/state/{domain}/{object_id}</code></pre>
<p>Example — living room light:</p>
<pre><code>kingkiosk/ha/state/light/living_room</code></pre>
<p>Returns:</p>
<div class="sourceCode" id="cb269"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;entity_id&quot;</span><span class="fu">:</span> <span class="st">&quot;light.living_room&quot;</span><span class="fu">,</span></span>
<span id="cb269-3"><a href="#cb269-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;state&quot;</span><span class="fu">:</span> <span class="st">&quot;on&quot;</span><span class="fu">,</span></span>
<span id="cb269-4"><a href="#cb269-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;attributes&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb269-5"><a href="#cb269-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;brightness&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb269-6"><a href="#cb269-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;friendly_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Living Room Light&quot;</span></span>
<span id="cb269-7"><a href="#cb269-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb269-8"><a href="#cb269-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h4 data-number="1.13.6.6" id="controlling-devices"><span
class="header-section-number">1.13.6.6</span> Controlling Devices</h4>
<p>Send commands to:</p>
<pre><code>kingkiosk/ha/command/{domain}/{object_id}</code></pre>
<p><strong>Turn on a light:</strong></p>
<div class="sourceCode" id="cb271"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;service&quot;</span><span class="fu">:</span> <span class="st">&quot;turn_on&quot;</span><span class="fu">,</span> <span class="dt">&quot;data&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;brightness&quot;</span><span class="fu">:</span> <span class="dv">255</span><span class="fu">}}</span></span></code></pre></div>
<p><strong>Set thermostat temperature:</strong></p>
<div class="sourceCode" id="cb272"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;service&quot;</span><span class="fu">:</span> <span class="st">&quot;set_temperature&quot;</span><span class="fu">,</span> <span class="dt">&quot;data&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;temperature&quot;</span><span class="fu">:</span> <span class="dv">72</span><span class="fu">}}</span></span></code></pre></div>
<p><strong>Turn off a switch:</strong></p>
<div class="sourceCode" id="cb273"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;service&quot;</span><span class="fu">:</span> <span class="st">&quot;turn_off&quot;</span><span class="fu">}</span></span></code></pre></div>
<p>Command results are published to
<code>kingkiosk/ha/command/{domain}/{object_id}/result</code>.</p>
<h4 data-number="1.13.6.7" id="quick-reference"><span
class="header-section-number">1.13.6.7</span> Quick Reference</h4>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>I Want To…</th>
<th>MQTT Topic</th>
</tr>
</thead>
<tbody>
<tr>
<td>See all devices</td>
<td><code>kingkiosk/ha/registry/entities</code></td>
</tr>
<tr>
<td>Monitor a light</td>
<td><code>kingkiosk/ha/state/light/{name}</code></td>
</tr>
<tr>
<td>Turn on a light</td>
<td><code>kingkiosk/ha/command/light/{name}</code> with
<code>{"service": "turn_on"}</code></td>
</tr>
<tr>
<td>See all available commands</td>
<td><code>kingkiosk/ha/registry/services</code></td>
</tr>
<tr>
<td>Check if bridge is working</td>
<td><code>kingkiosk/ha/status</code></td>
</tr>
</tbody>
</table>
<h4 data-number="1.13.6.8" id="troubleshooting-3"><span
class="header-section-number">1.13.6.8</span> Troubleshooting</h4>
<ul>
<li><strong>Bridge shows “offline”?</strong> Check that Home Assistant
is running and accessible, verify your token, confirm the MQTT broker is
connected.</li>
<li><strong>Can see states but can’t control devices?</strong> Check
your exclude filters, look at the command result topic for errors,
verify the entity ID matches exactly.</li>
<li><strong>Too much MQTT traffic?</strong> Use filters to limit
domains, disable registry/attribute publishing if you only need
states.</li>
</ul>
<hr />
<h2 data-number="1.14" id="quick-reference-card"><span
class="header-section-number">1.14</span> 13. Quick Reference Card</h2>
<h3 data-number="1.14.1" id="essential-topics"><span
class="header-section-number">1.14.1</span> Essential Topics</h3>
<table>
<colgroup>
<col style="width: 56%" />
<col style="width: 43%" />
</colgroup>
<thead>
<tr>
<th>Purpose</th>
<th>Topic</th>
</tr>
</thead>
<tbody>
<tr>
<td>Send system commands</td>
<td><code>kingkiosk/{device_id}/system/cmd</code></td>
</tr>
<tr>
<td>Send element/widget commands</td>
<td><code>kingkiosk/{device_id}/element/{widget_id}/cmd</code></td>
</tr>
<tr>
<td>Send window-controller commands</td>
<td><code>kingkiosk/{device_id}/window/{window_id}/command</code></td>
</tr>
<tr>
<td>System responses</td>
<td><code>kingkiosk/{device_id}/system/response</code></td>
</tr>
<tr>
<td>Widget state</td>
<td><code>kingkiosk/{device_id}/element/{widget_id}/state</code></td>
</tr>
<tr>
<td>Device info</td>
<td><code>kingkiosk/{device_id}/info</code></td>
</tr>
<tr>
<td>Online status</td>
<td><code>kingkiosk/{device_id}/status</code></td>
</tr>
</tbody>
</table>
<h3 data-number="1.14.2" id="most-used-commands"><span
class="header-section-number">1.14.2</span> Most-Used Commands</h3>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Action</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Create clock</td>
<td><code>{"command": "open_clock", "window_id": "clock-1"}</code></td>
</tr>
<tr>
<td>Create web browser</td>
<td><code>{"command": "open_browser", "url": "...", "window_id": "web-1"}</code></td>
</tr>
<tr>
<td>Close window</td>
<td><code>{"command": "close_window", "window_id": "..."}</code></td>
</tr>
<tr>
<td>Close all windows</td>
<td><code>{"command": "close_all_windows"}</code></td>
</tr>
<tr>
<td>Set volume</td>
<td><code>{"command": "set_volume", "value": 0.5}</code></td>
</tr>
<tr>
<td>Set brightness</td>
<td><code>{"command": "set_brightness", "value": 0.8}</code></td>
</tr>
<tr>
<td>Show notification</td>
<td><code>{"command": "notify", "title": "...", "message": "..."}</code></td>
</tr>
<tr>
<td>Text-to-speech</td>
<td><code>{"command": "tts", "text": "..."}</code></td>
</tr>
<tr>
<td>Take screenshot</td>
<td><code>{"command": "screenshot"}</code></td>
</tr>
<tr>
<td>Save layout</td>
<td><code>{"command": "save_screen_state", "name": "..."}</code></td>
</tr>
<tr>
<td>Load layout</td>
<td><code>{"command": "load_screen_state", "name": "..."}</code></td>
</tr>
<tr>
<td>Backup full config + layouts</td>
<td><code>{"command":"get_config","include_secrets":true,"include_layouts":true}</code></td>
</tr>
<tr>
<td>Restore/clone full config + layouts</td>
<td><code>{"command":"provision","settings":{...},"screen_states":[...],"current_layout":{...},"overwrite":true}</code></td>
</tr>
<tr>
<td>List windows</td>
<td><code>{"command": "list_windows"}</code></td>
</tr>
</tbody>
</table>
<h3 data-number="1.14.3" id="widget-types"><span
class="header-section-number">1.14.3</span> Widget Types</h3>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 38%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Widget</th>
<th>Create Command</th>
<th>Key Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td>Clock</td>
<td><code>open_clock</code></td>
<td><code>mode</code>, <code>theme</code>,
<code>show_numbers</code></td>
</tr>
<tr>
<td>Weather</td>
<td><code>open_weather_client</code></td>
<td><code>api_key</code>, <code>location</code>, <code>units</code></td>
</tr>
<tr>
<td>Web Browser</td>
<td><code>open_browser</code></td>
<td><code>url</code>, <code>title</code></td>
</tr>
<tr>
<td>Remote Browser</td>
<td><code>create_remote_browser</code></td>
<td><code>window_id</code>, <code>initial_url</code>, optional
<code>server_url</code></td>
</tr>
<tr>
<td>Custom Widget</td>
<td><code>create_remote_browser</code></td>
<td><code>window_id</code>, <code>initial_url</code>, optional
<code>server_url</code></td>
</tr>
<tr>
<td>Video/Audio</td>
<td><code>play_media</code></td>
<td><code>type</code>, <code>url</code>, <code>loop</code></td>
</tr>
<tr>
<td>YouTube</td>
<td><code>youtube</code></td>
<td><code>url</code></td>
</tr>
<tr>
<td>Carousel</td>
<td><code>create_carousel</code></td>
<td><code>items</code>, <code>config</code></td>
</tr>
<tr>
<td>Gauge</td>
<td><code>create_gauge</code></td>
<td><code>gauge_type</code>, <code>min</code>, <code>max</code>,
<code>unit</code>, <code>pointers[]</code></td>
</tr>
<tr>
<td>Chart</td>
<td><code>create_chart</code></td>
<td><code>chart_type</code>, <code>max_points</code>,
<code>title</code></td>
</tr>
<tr>
<td>Map</td>
<td><code>open_map</code></td>
<td><code>initial_camera</code>, <code>provider</code></td>
</tr>
<tr>
<td>Canvas</td>
<td><code>open_canvas</code></td>
<td><code>doc</code>, <code>interaction</code></td>
</tr>
<tr>
<td>Animated Text</td>
<td><code>open_animated_text</code></td>
<td><code>text</code>, <code>preset</code>, <code>effects</code></td>
</tr>
<tr>
<td>MQTT Image</td>
<td><code>mqtt_image</code></td>
<td><code>mqtt_topic</code>, <code>is_base64</code></td>
</tr>
<tr>
<td>MQTT Button</td>
<td><code>mqtt_button</code></td>
<td><code>publish_topic</code>, <code>subscription_topic</code></td>
</tr>
<tr>
<td>Calendar</td>
<td><code>calendar</code></td>
<td><code>action</code>, <code>uid</code> (for sync)</td>
</tr>
<tr>
<td>Timer</td>
<td><code>timer_widget</code></td>
<td><code>config.duration</code></td>
</tr>
<tr>
<td>Stopwatch</td>
<td><code>stopwatch</code></td>
<td>-</td>
</tr>
<tr>
<td>DLNA Player</td>
<td><code>dlna_player</code></td>
<td>-</td>
</tr>
<tr>
<td>PDF</td>
<td><code>open_pdf</code></td>
<td><code>url</code></td>
</tr>
<tr>
<td>Alarmo</td>
<td><code>alarmo</code></td>
<td><code>mqtt_base_topic</code>, <code>entity</code>,
<code>require_code_to_arm</code>, <code>require_code_to_disarm</code>,
<code>code_required_modes</code>, <code>force</code>,
<code>skip_delay</code></td>
</tr>
<tr>
<td>Games</td>
<td><code>stop_the_missiles</code></td>
<td><code>game_type</code>, <code>config</code></td>
</tr>
</tbody>
</table>
<hr />
<p><em>Thank you for being a King Kiosk beta tester! Your feedback
shapes the future of the Programmable Display Runtime™. Report issues
and share ideas in our Facebook group.</em></p>
<p><strong>King Kiosk - The Programmable Display Runtime™</strong></p>
      <footer class="doc-footer">
        <p>
          <a href="https://kingkiosk.kallinnovations.com">KingKiosk</a>
          &mdash; The Programmable Display Runtime &mdash;
          &copy; Kall Innovations
        </p>
      </footer>
    </main>
  </div>

</div>

<!-- Back to Top -->
<button class="back-to-top" onclick="window.scrollTo({top:0,behavior:'smooth'})" aria-label="Back to top">
  &uarr;
</button>

<script>
// Back to Top visibility
const btn = document.querySelector('.back-to-top');
window.addEventListener('scroll', () => {
  btn.classList.toggle('visible', window.scrollY > 400);
});

// Active TOC highlight on scroll
const tocLinks = document.querySelectorAll('#TOC a');
const headings = [];
tocLinks.forEach(link => {
  const id = link.getAttribute('href');
  if (id && id.startsWith('#')) {
    const el = document.getElementById(id.slice(1));
    if (el) headings.push({ el, link });
  }
});

function updateActiveTOC() {
  let current = null;
  const scrollY = window.scrollY + 100;
  for (const { el, link } of headings) {
    if (el.offsetTop <= scrollY) {
      current = link;
    }
  }
  tocLinks.forEach(l => l.classList.remove('active'));
  if (current) current.classList.add('active');
}

window.addEventListener('scroll', updateActiveTOC, { passive: true });
updateActiveTOC();

// Close sidebar on mobile when clicking a link
document.querySelectorAll('.sidebar a').forEach(a => {
  a.addEventListener('click', () => {
    if (window.innerWidth <= 960) {
      document.querySelector('.sidebar').classList.remove('open');
    }
  });
});
</script>

</body>
</html>
